var yb=Object.defineProperty,vb=Object.defineProperties;var _b=Object.getOwnPropertyDescriptors;var my=Object.getOwnPropertySymbols;var Ib=Object.prototype.hasOwnProperty,wb=Object.prototype.propertyIsEnumerable;var yy=(n,e,t)=>e in n?yb(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,L=(n,e)=>{for(var t in e||={})Ib.call(e,t)&&yy(n,t,e[t]);if(my)for(var t of my(e))wb.call(e,t)&&yy(n,t,e[t]);return n},Ee=(n,e)=>vb(n,_b(e));var S=(n,e,t)=>new Promise((r,i)=>{var s=u=>{try{c(t.next(u))}catch(d){i(d)}},o=u=>{try{c(t.throw(u))}catch(d){i(d)}},c=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);c((t=t.apply(n,e)).next())});var Pl=null;var Ml=1,vy=Symbol("SIGNAL");function ye(n){let e=Pl;return Pl=n,e}function _y(){return Pl}var Ol={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Eb(n){if(!(Ul(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Ml)){if(!n.producerMustRecompute(n)&&!Ll(n)){n.dirty=!1,n.lastCleanEpoch=Ml;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Ml}}function kl(n){return n&&(n.nextProducerIndex=0),ye(n)}function Iy(n,e){if(ye(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Ul(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Vl(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Ll(n){jl(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Eb(t),r!==t.version))return!0}return!1}function Fl(n){if(jl(n),Ul(n))for(let e=0;e<n.producerNode.length;e++)Vl(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Vl(n,e){if(Db(n),n.liveConsumerNode.length===1&&Tb(n))for(let r=0;r<n.producerNode.length;r++)Vl(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];jl(i),i.producerIndexOfThis[r]=e}}function Ul(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function jl(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Db(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Tb(n){return n.producerNode!==void 0}function bb(){throw new Error}var Cb=bb;function wy(n){Cb=n}function q(n){return typeof n=="function"}function Ur(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var pa=Ur(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function tr(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ce=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(q(r))try{r()}catch(s){e=s instanceof pa?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Ey(s)}catch(o){e=e??[],o instanceof pa?e=[...e,...o.errors]:e.push(o)}}if(e)throw new pa(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Ey(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&tr(t,e)}remove(e){let{_finalizers:t}=this;t&&tr(t,e),e instanceof n&&e._removeParent(this)}};Ce.EMPTY=(()=>{let n=new Ce;return n.closed=!0,n})();var Bl=Ce.EMPTY;function ga(n){return n instanceof Ce||n&&"closed"in n&&q(n.remove)&&q(n.add)&&q(n.unsubscribe)}function Ey(n){q(n)?n():n.unsubscribe()}var Rt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var jr={setTimeout(n,e,...t){let{delegate:r}=jr;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=jr;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ma(n){jr.setTimeout(()=>{let{onUnhandledError:e}=Rt;if(e)e(n);else throw n})}function Ds(){}var Dy=$l("C",void 0,void 0);function Ty(n){return $l("E",void 0,n)}function by(n){return $l("N",n,void 0)}function $l(n,e,t){return{kind:n,value:e,error:t}}var nr=null;function Br(n){if(Rt.useDeprecatedSynchronousErrorHandling){let e=!nr;if(e&&(nr={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=nr;if(nr=null,t)throw r}}else n()}function Cy(n){Rt.useDeprecatedSynchronousErrorHandling&&nr&&(nr.errorThrown=!0,nr.error=n)}var rr=class extends Ce{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ga(e)&&e.add(this)):this.destination=Rb}static create(e,t,r){return new $r(e,t,r)}next(e){this.isStopped?ql(by(e),this):this._next(e)}error(e){this.isStopped?ql(Ty(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ql(Dy,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Sb=Function.prototype.bind;function Hl(n,e){return Sb.call(n,e)}var zl=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){ya(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){ya(r)}else ya(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ya(t)}}},$r=class extends rr{constructor(e,t,r){super();let i;if(q(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Rt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Hl(e.next,s),error:e.error&&Hl(e.error,s),complete:e.complete&&Hl(e.complete,s)}):i=e}this.destination=new zl(i)}};function ya(n){Rt.useDeprecatedSynchronousErrorHandling?Cy(n):ma(n)}function Ab(n){throw n}function ql(n,e){let{onStoppedNotification:t}=Rt;t&&jr.setTimeout(()=>t(n,e))}var Rb={closed:!0,next:Ds,error:Ab,complete:Ds};var Hr=typeof Symbol=="function"&&Symbol.observable||"@@observable";function lt(n){return n}function va(...n){return Gl(n)}function Gl(n){return n.length===0?lt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var re=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=xb(t)?t:new $r(t,r,i);return Br(()=>{let{operator:o,source:c}=this;s.add(o?o.call(s,c):c?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Sy(r),new r((i,s)=>{let o=new $r({next:c=>{try{t(c)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Hr](){return this}pipe(...t){return Gl(t)(this)}toPromise(t){return t=Sy(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function Sy(n){var e;return(e=n??Rt.Promise)!==null&&e!==void 0?e:Promise}function Nb(n){return n&&q(n.next)&&q(n.error)&&q(n.complete)}function xb(n){return n&&n instanceof rr||Nb(n)&&ga(n)}function Wl(n){return q(n?.lift)}function ie(n){return e=>{if(Wl(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function se(n,e,t,r,i){return new Kl(n,e,t,r,i)}var Kl=class extends rr{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(c){try{t(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function qr(){return ie((n,e)=>{let t=null;n._refCount++;let r=se(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var zr=class extends re{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Wl(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ce;let t=this.getSubject();e.add(this.source.subscribe(se(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ce.EMPTY)}return e}refCount(){return qr()(this)}};var Ay=Ur(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var tt=(()=>{class n extends re{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new _a(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Ay}next(t){Br(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Br(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Br(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Bl:(this.currentObservers=null,s.push(t),new Ce(()=>{this.currentObservers=null,tr(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new re;return t.source=this,t}}return n.create=(e,t)=>new _a(e,t),n})(),_a=class extends tt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Bl}};var qe=class extends tt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ql={now(){return(Ql.delegate||Date).now()},delegate:void 0};var Ia=class extends Ce{constructor(e,t){super()}schedule(e,t=0){return this}};var Ts={setInterval(n,e,...t){let{delegate:r}=Ts;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Ts;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Gr=class extends Ia{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Ts.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Ts.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,tr(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Wr=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Wr.now=Ql.now;var Kr=class extends Wr{constructor(e,t=Wr.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Yl=new Kr(Gr);var wa=class extends Gr{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Ea=class extends Kr{};var Zl=new Ea(wa);var dt=new re(n=>n.complete());function Ry(n){return n&&q(n.schedule)}function Ny(n){return n[n.length-1]}function xy(n){return q(Ny(n))?n.pop():void 0}function Cn(n){return Ry(Ny(n))?n.pop():void 0}function Jl(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Py(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function c(f){try{d(r.next(f))}catch(g){o(g)}}function u(f){try{d(r.throw(f))}catch(g){o(g)}}function d(f){f.done?s(f.value):i(f.value).then(c,u)}d((r=r.apply(n,e||[])).next())})}function My(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ir(n){return this instanceof ir?(this.v=n,this):new ir(n)}function Oy(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(E){return function(A){return Promise.resolve(A).then(E,g)}}function c(E,A){r[E]&&(i[E]=function(x){return new Promise(function(R,F){s.push([E,x,R,F])>1||u(E,x)})},A&&(i[E]=A(i[E])))}function u(E,A){try{d(r[E](A))}catch(x){_(s[0][3],x)}}function d(E){E.value instanceof ir?Promise.resolve(E.value.v).then(f,g):_(s[0][2],E)}function f(E){u("next",E)}function g(E){u("throw",E)}function _(E,A){E(A),s.shift(),s.length&&u(s[0][0],s[0][1])}}function ky(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof My=="function"?My(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(c,u){o=n[s](o),i(c,u,o.done,o.value)})}}function i(s,o,c,u){Promise.resolve(u).then(function(d){s({value:d,done:c})},o)}}var Da=n=>n&&typeof n.length=="number"&&typeof n!="function";function Ta(n){return q(n?.then)}function ba(n){return q(n[Hr])}function Ca(n){return Symbol.asyncIterator&&q(n?.[Symbol.asyncIterator])}function Sa(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Mb(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Aa=Mb();function Ra(n){return q(n?.[Aa])}function Na(n){return Oy(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield ir(t.read());if(i)return yield ir(void 0);yield yield ir(r)}}finally{t.releaseLock()}})}function xa(n){return q(n?.getReader)}function Fe(n){if(n instanceof re)return n;if(n!=null){if(ba(n))return Pb(n);if(Da(n))return Ob(n);if(Ta(n))return kb(n);if(Ca(n))return Ly(n);if(Ra(n))return Lb(n);if(xa(n))return Fb(n)}throw Sa(n)}function Pb(n){return new re(e=>{let t=n[Hr]();if(q(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Ob(n){return new re(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function kb(n){return new re(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ma)})}function Lb(n){return new re(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function Ly(n){return new re(e=>{Vb(n,e).catch(t=>e.error(t))})}function Fb(n){return Ly(Na(n))}function Vb(n,e){var t,r,i,s;return Py(this,void 0,void 0,function*(){try{for(t=ky(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function st(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Sn(n,e=0){return ie((t,r)=>{t.subscribe(se(r,i=>st(r,n,()=>r.next(i),e),()=>st(r,n,()=>r.complete(),e),i=>st(r,n,()=>r.error(i),e)))})}function An(n,e=0){return ie((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Fy(n,e){return Fe(n).pipe(An(e),Sn(e))}function Vy(n,e){return Fe(n).pipe(An(e),Sn(e))}function Uy(n,e){return new re(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function jy(n,e){return new re(t=>{let r;return st(t,e,()=>{r=n[Aa](),st(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>q(r?.return)&&r.return()})}function Ma(n,e){if(!n)throw new Error("Iterable cannot be null");return new re(t=>{st(t,e,()=>{let r=n[Symbol.asyncIterator]();st(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function By(n,e){return Ma(Na(n),e)}function $y(n,e){if(n!=null){if(ba(n))return Fy(n,e);if(Da(n))return Uy(n,e);if(Ta(n))return Vy(n,e);if(Ca(n))return Ma(n,e);if(Ra(n))return jy(n,e);if(xa(n))return By(n,e)}throw Sa(n)}function Ne(n,e){return e?$y(n,e):Fe(n)}function z(...n){let e=Cn(n);return Ne(n,e)}function Qr(n,e){let t=q(n)?n:()=>n,r=i=>i.error(t());return new re(e?i=>e.schedule(r,0,i):r)}function Xl(n){return!!n&&(n instanceof re||q(n.lift)&&q(n.subscribe))}var sn=Ur(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ee(n,e){return ie((t,r)=>{let i=0;t.subscribe(se(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:Ub}=Array;function jb(n,e){return Ub(e)?n(...e):n(e)}function Hy(n){return ee(e=>jb(n,e))}var{isArray:Bb}=Array,{getPrototypeOf:$b,prototype:Hb,keys:qb}=Object;function qy(n){if(n.length===1){let e=n[0];if(Bb(e))return{args:e,keys:null};if(zb(e)){let t=qb(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function zb(n){return n&&typeof n=="object"&&$b(n)===Hb}function zy(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Pa(...n){let e=Cn(n),t=xy(n),{args:r,keys:i}=qy(n);if(r.length===0)return Ne([],e);let s=new re(Gb(r,e,i?o=>zy(i,o):lt));return t?s.pipe(Hy(t)):s}function Gb(n,e,t=lt){return r=>{Gy(e,()=>{let{length:i}=n,s=new Array(i),o=i,c=i;for(let u=0;u<i;u++)Gy(e,()=>{let d=Ne(n[u],e),f=!1;d.subscribe(se(r,g=>{s[u]=g,f||(f=!0,c--),c||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function Gy(n,e,t){n?st(t,n,e):e()}function Wy(n,e,t,r,i,s,o,c){let u=[],d=0,f=0,g=!1,_=()=>{g&&!u.length&&!d&&e.complete()},E=x=>d<r?A(x):u.push(x),A=x=>{s&&e.next(x),d++;let R=!1;Fe(t(x,f++)).subscribe(se(e,F=>{i?.(F),s?E(F):e.next(F)},()=>{R=!0},void 0,()=>{if(R)try{for(d--;u.length&&d<r;){let F=u.shift();o?st(e,o,()=>A(F)):A(F)}_()}catch(F){e.error(F)}}))};return n.subscribe(se(e,E,()=>{g=!0,_()})),()=>{c?.()}}function Oe(n,e,t=1/0){return q(e)?Oe((r,i)=>ee((s,o)=>e(r,s,i,o))(Fe(n(r,i))),t):(typeof e=="number"&&(t=e),ie((r,i)=>Wy(r,i,n,t)))}function ed(n=1/0){return Oe(lt,n)}function Ky(){return ed(1)}function Yr(...n){return Ky()(Ne(n,Cn(n)))}function Oa(n){return new re(e=>{Fe(n()).subscribe(e)})}function mt(n,e){return ie((t,r)=>{let i=0;t.subscribe(se(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Rn(n){return ie((e,t)=>{let r=null,i=!1,s;r=e.subscribe(se(t,void 0,void 0,o=>{s=Fe(n(o,Rn(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function Qy(n,e,t,r,i){return(s,o)=>{let c=t,u=e,d=0;s.subscribe(se(o,f=>{let g=d++;u=c?n(u,f,g):(c=!0,f),r&&o.next(u)},i&&(()=>{c&&o.next(u),o.complete()})))}}function Zr(n,e){return q(e)?Oe(n,e,1):Oe(n,1)}function Nn(n){return ie((e,t)=>{let r=!1;e.subscribe(se(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function on(n){return n<=0?()=>dt:ie((e,t)=>{let r=0;e.subscribe(se(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function td(n){return ee(()=>n)}function ka(n=Wb){return ie((e,t)=>{let r=!1;e.subscribe(se(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Wb(){return new sn}function bs(n){return ie((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function jt(n,e){let t=arguments.length>=2;return r=>r.pipe(n?mt((i,s)=>n(i,s,r)):lt,on(1),t?Nn(e):ka(()=>new sn))}function Jr(n){return n<=0?()=>dt:ie((e,t)=>{let r=[];e.subscribe(se(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function nd(n,e){let t=arguments.length>=2;return r=>r.pipe(n?mt((i,s)=>n(i,s,r)):lt,Jr(1),t?Nn(e):ka(()=>new sn))}function La(n,e){return ie(Qy(n,e,arguments.length>=2,!0))}function Fa(...n){let e=Cn(n);return ie((t,r)=>{(e?Yr(n,t,e):Yr(n,t)).subscribe(r)})}function Nt(n,e){return ie((t,r)=>{let i=null,s=0,o=!1,c=()=>o&&!i&&r.complete();t.subscribe(se(r,u=>{i?.unsubscribe();let d=0,f=s++;Fe(n(u,f)).subscribe(i=se(r,g=>r.next(e?e(u,g,f,d++):g),()=>{i=null,c()}))},()=>{o=!0,c()}))})}function rd(n){return ie((e,t)=>{Fe(n).subscribe(se(t,()=>t.complete(),Ds)),!t.closed&&e.subscribe(t)})}function ke(n,e,t){let r=q(n)||e||t?{next:n,error:e,complete:t}:n;return r?ie((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let c=!0;i.subscribe(se(s,u=>{var d;(d=r.next)===null||d===void 0||d.call(r,u),s.next(u)},()=>{var u;c=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var d;c=!1,(d=r.error)===null||d===void 0||d.call(r,u),s.error(u)},()=>{var u,d;c&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):lt}var Mv="https://g.co/ng/security#xss",j=class extends Error{constructor(e,t){super(Yd(e,t)),this.code=e}};function Yd(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Vs(n){return{toString:n}.toString()}var Va="__parameters__";function Kb(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function Pv(n,e,t){return Vs(()=>{let r=Kb(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return c.annotation=o,c;function c(u,d,f){let g=u.hasOwnProperty(Va)?u[Va]:Object.defineProperty(u,Va,{value:[]})[Va];for(;g.length<=f;)g.push(null);return(g[f]=g[f]||[]).push(o),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function _e(n){for(let e in n)if(n[e]===_e)return e;throw Error("Could not find renamed property on target object.")}function ot(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(ot).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function Yy(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var Qb=_e({__forward_ref__:_e});function Ov(n){return n.__forward_ref__=Ov,n.toString=function(){return ot(this())},n}function vt(n){return kv(n)?n():n}function kv(n){return typeof n=="function"&&n.hasOwnProperty(Qb)&&n.__forward_ref__===Ov}function U(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function fc(n){return{providers:n.providers||[],imports:n.imports||[]}}function pc(n){return Zy(n,Fv)||Zy(n,Vv)}function Lv(n){return pc(n)!==null}function Zy(n,e){return n.hasOwnProperty(e)?n[e]:null}function Yb(n){let e=n&&(n[Fv]||n[Vv]);return e||null}function Jy(n){return n&&(n.hasOwnProperty(Xy)||n.hasOwnProperty(Zb))?n[Xy]:null}var Fv=_e({\u0275prov:_e}),Xy=_e({\u0275inj:_e}),Vv=_e({ngInjectableDef:_e}),Zb=_e({ngInjectorDef:_e}),H=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=U({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Uv(n){return n&&!!n.\u0275providers}var Jb=_e({\u0275cmp:_e}),Xb=_e({\u0275dir:_e}),eC=_e({\u0275pipe:_e}),tC=_e({\u0275mod:_e}),za=_e({\u0275fac:_e}),As=_e({__NG_ELEMENT_ID__:_e}),ev=_e({__NG_ENV_ID__:_e});function Rs(n){return typeof n=="string"?n:n==null?"":String(n)}function nC(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Rs(n)}function rC(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new j(-200,n)}function Zd(n,e){throw new j(-201,!1)}var J=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(J||{}),hd;function jv(){return hd}function yt(n){let e=hd;return hd=n,e}function Bv(n,e,t){let r=pc(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&J.Optional)return null;if(e!==void 0)return e;Zd(n,"Injector")}var iC={},Ns=iC,fd="__NG_DI_FLAG__",Ga="ngTempTokenPath",sC="ngTokenPath",oC=/\n/gm,aC="\u0275",tv="__source",ni;function cC(){return ni}function xn(n){let e=ni;return ni=n,e}function uC(n,e=J.Default){if(ni===void 0)throw new j(-203,!1);return ni===null?Bv(n,void 0,e):ni.get(n,e&J.Optional?null:void 0,e)}function W(n,e=J.Default){return(jv()||uC)(vt(n),e)}function O(n,e=J.Default){return W(n,gc(e))}function gc(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function pd(n){let e=[];for(let t=0;t<n.length;t++){let r=vt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new j(900,!1);let i,s=J.Default;for(let o=0;o<r.length;o++){let c=r[o],u=lC(c);typeof u=="number"?u===-1?i=c.token:s|=u:i=c}e.push(W(i,s))}else e.push(W(r))}return e}function $v(n,e){return n[fd]=e,n.prototype[fd]=e,n}function lC(n){return n[fd]}function dC(n,e,t,r){let i=n[Ga];throw e[tv]&&i.unshift(e[tv]),n.message=hC(`
`+n.message,i,t,r),n[sC]=i,n[Ga]=null,n}function hC(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==aC?n.slice(2):n;let i=ot(e);if(Array.isArray(e))i=e.map(ot).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let c=e[o];s.push(o+":"+(typeof c=="string"?JSON.stringify(c):ot(c)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(oC,`
  `)}`}var Ot=$v(Pv("Optional"),8);var Hv=$v(Pv("SkipSelf"),4);function ii(n,e){let t=n.hasOwnProperty(za);return t?n[za]:null}function Jd(n,e){n.forEach(t=>Array.isArray(t)?Jd(t,e):e(t))}function qv(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Wa(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}var xs={},Bt=[],si=new H(""),zv=new H("",-1),Gv=new H(""),Ka=class{get(e,t=Ns){if(t===Ns){let r=new Error(`NullInjectorError: No provider for ${ot(e)}!`);throw r.name="NullInjectorError",r}return t}},Wv=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Wv||{}),Ht=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Ht||{}),On=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(On||{});function fC(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function gd(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],c=t[r++];n.setAttribute(e,o,c,s)}else{let s=i,o=t[++r];gC(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function pC(n){return n===3||n===4||n===6}function gC(n){return n.charCodeAt(0)===64}function Xd(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?nv(n,t,i,null,e[++r]):nv(n,t,i,null,null))}}return n}function nv(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let c=n[s++];if(typeof c=="number"){if(c===e){o=-1;break}else if(c>e){o=s-1;break}}}for(;s<n.length;){let c=n[s];if(typeof c=="number")break;if(c===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var Kv="ng-template";function mC(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&fC(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(eh(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function eh(n){return n.type===4&&n.value!==Kv}function yC(n,e,t){let r=n.type===4&&!t?Kv:n.value;return e===r}function vC(n,e,t){let r=4,i=n.attrs,s=i!==null?wC(i):0,o=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!o&&!xt(r)&&!xt(u))return!1;if(o&&xt(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!yC(n,u,t)||u===""&&e.length===1){if(xt(r))return!1;o=!0}}else if(r&8){if(i===null||!mC(n,i,u,t)){if(xt(r))return!1;o=!0}}else{let d=e[++c],f=_C(u,i,eh(n),t);if(f===-1){if(xt(r))return!1;o=!0;continue}if(d!==""){let g;if(f>s?g="":g=i[f+1].toLowerCase(),r&2&&d!==g){if(xt(r))return!1;o=!0}}}}return xt(r)||o}function xt(n){return(n&1)===0}function _C(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return EC(e,n)}function IC(n,e,t=!1){for(let r=0;r<e.length;r++)if(vC(n,e[r],t))return!0;return!1}function wC(n){for(let e=0;e<n.length;e++){let t=n[e];if(pC(t))return e}return n.length}function EC(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function rv(n,e){return n?":not("+e.trim()+")":e}function DC(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let c=n[++t];i+="["+o+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!xt(o)&&(e+=rv(s,i),i=""),r=o,s=s||!xt(r);t++}return i!==""&&(e+=rv(s,i)),e}function TC(n){return n.map(DC).join(",")}function bC(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!xt(i))break;i=s}r++}return{attrs:e,classes:t}}function Ue(n){return Vs(()=>{let e=Xv(n),t=Ee(L({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Wv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ht.Emulated,styles:n.styles||Bt,_:null,schemas:n.schemas||null,tView:null,id:""});e_(t);let r=n.dependencies;return t.directiveDefs=sv(r,!1),t.pipeDefs=sv(r,!0),t.id=AC(t),t})}function CC(n){return ar(n)||Qv(n)}function SC(n){return n!==null}function mc(n){return Vs(()=>({type:n.type,bootstrap:n.bootstrap||Bt,declarations:n.declarations||Bt,imports:n.imports||Bt,exports:n.exports||Bt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function iv(n,e){if(n==null)return xs;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,c=On.None;Array.isArray(i)?(c=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=c!==On.None?[r,c]:r,e[s]=o):t[s]=r}return t}function Us(n){return Vs(()=>{let e=Xv(n);return e_(e),e})}function ar(n){return n[Jb]||null}function Qv(n){return n[Xb]||null}function Yv(n){return n[eC]||null}function Zv(n){let e=ar(n)||Qv(n)||Yv(n);return e!==null?e.standalone:!1}function Jv(n,e){let t=n[tC]||null;if(!t&&e===!0)throw new Error(`Type ${ot(n)} does not have '\u0275mod' property.`);return t}function Xv(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||xs,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Bt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:iv(n.inputs,e),outputs:iv(n.outputs),debugInfo:null}}function e_(n){n.features?.forEach(e=>e(n))}function sv(n,e){if(!n)return null;let t=e?Yv:CC;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(SC)}function AC(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Vn(n){return{\u0275providers:n}}function RC(...n){return{\u0275providers:t_(!0,n),\u0275fromNgModule:!0}}function t_(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return Jd(e,o=>{let c=o;md(c,s,[],r)&&(i||=[],i.push(c))}),i!==void 0&&n_(i,s),t}function n_(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];th(i,s=>{e(s,r)})}}function md(n,e,t,r){if(n=vt(n),!n)return!1;let i=null,s=Jy(n),o=!s&&ar(n);if(!s&&!o){let u=n.ngModule;if(s=Jy(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=n}let c=r.has(i);if(o){if(c)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let d of u)md(d,e,t,r)}}else if(s){if(s.imports!=null&&!c){r.add(i);let d;try{Jd(s.imports,f=>{md(f,e,t,r)&&(d||=[],d.push(f))})}finally{}d!==void 0&&n_(d,e)}if(!c){let d=ii(i)||(()=>new i);e({provide:i,useFactory:d,deps:Bt},i),e({provide:Gv,useValue:i,multi:!0},i),e({provide:si,useValue:()=>W(i),multi:!0},i)}let u=s.providers;if(u!=null&&!c){let d=n;th(u,f=>{e(f,d)})}}else return!1;return i!==n&&n.providers!==void 0}function th(n,e){for(let t of n)Uv(t)&&(t=t.\u0275providers),Array.isArray(t)?th(t,e):e(t)}var NC=_e({provide:String,useValue:_e});function r_(n){return n!==null&&typeof n=="object"&&NC in n}function xC(n){return!!(n&&n.useExisting)}function MC(n){return!!(n&&n.useFactory)}function yd(n){return typeof n=="function"}var yc=new H(""),ja={},PC={},id;function nh(){return id===void 0&&(id=new Ka),id}var wt=class{},Ms=class extends wt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,_d(e,o=>this.processProvider(o)),this.records.set(zv,Xr(void 0,this)),i.has("environment")&&this.records.set(wt,Xr(void 0,this));let s=this.records.get(yc);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Gv,Bt,J.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ye(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ye(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=xn(this),r=yt(void 0),i;try{return e()}finally{xn(t),yt(r)}}get(e,t=Ns,r=J.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(ev))return e[ev](this);r=gc(r);let i,s=xn(this),o=yt(void 0);try{if(!(r&J.SkipSelf)){let u=this.records.get(e);if(u===void 0){let d=UC(e)&&pc(e);d&&this.injectableDefInScope(d)?u=Xr(vd(e),ja):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let c=r&J.Self?nh():this.parent;return t=r&J.Optional&&t===Ns?null:t,c.get(e,t)}catch(c){if(c.name==="NullInjectorError"){if((c[Ga]=c[Ga]||[]).unshift(ot(e)),s)throw c;return dC(c,e,"R3InjectorError",this.source)}else throw c}finally{yt(o),xn(s)}}resolveInjectorInitializers(){let e=ye(null),t=xn(this),r=yt(void 0),i;try{let s=this.get(si,Bt,J.Self);for(let o of s)o()}finally{xn(t),yt(r),ye(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(ot(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new j(205,!1)}processProvider(e){e=vt(e);let t=yd(e)?e:vt(e&&e.provide),r=kC(e);if(!yd(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Xr(void 0,ja,!0),i.factory=()=>pd(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=ye(null);try{return t.value===ja&&(t.value=PC,t.value=t.factory()),typeof t.value=="object"&&t.value&&VC(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ye(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=vt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function vd(n){let e=pc(n),t=e!==null?e.factory:ii(n);if(t!==null)return t;if(n instanceof H)throw new j(204,!1);if(n instanceof Function)return OC(n);throw new j(204,!1)}function OC(n){if(n.length>0)throw new j(204,!1);let t=Yb(n);return t!==null?()=>t.factory(n):()=>new n}function kC(n){if(r_(n))return Xr(void 0,n.useValue);{let e=LC(n);return Xr(e,ja)}}function LC(n,e,t){let r;if(yd(n)){let i=vt(n);return ii(i)||vd(i)}else if(r_(n))r=()=>vt(n.useValue);else if(MC(n))r=()=>n.useFactory(...pd(n.deps||[]));else if(xC(n))r=()=>W(vt(n.useExisting));else{let i=vt(n&&(n.useClass||n.provide));if(FC(n))r=()=>new i(...pd(n.deps));else return ii(i)||vd(i)}return r}function Xr(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function FC(n){return!!n.deps}function VC(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function UC(n){return typeof n=="function"||typeof n=="object"&&n instanceof H}function _d(n,e){for(let t of n)Array.isArray(t)?_d(t,e):t&&Uv(t)?_d(t.\u0275providers,e):e(t)}function ln(n,e){n instanceof Ms&&n.assertNotDestroyed();let t,r=xn(n),i=yt(void 0);try{return e()}finally{xn(r),yt(i)}}function jC(){return jv()!==void 0||cC()!=null}function BC(n){return typeof n=="function"}var dn=0,ne=1,$=2,rt=3,Mt=4,kt=5,Qa=6,ov=7,an=8,oi=9,qt=10,ht=11,Ps=12,av=13,hi=14,zt=15,ai=16,ei=17,ci=18,vc=19,i_=20,Pn=21,sd=22,_t=23,kn=25,s_=1;var cr=7,Ya=8,Za=9,It=10,Ja=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Ja||{});function sr(n){return Array.isArray(n)&&typeof n[s_]=="object"}function hn(n){return Array.isArray(n)&&n[s_]===!0}function o_(n){return(n.flags&4)!==0}function _c(n){return n.componentOffset>-1}function a_(n){return(n.flags&1)===1}function js(n){return!!n.template}function Id(n){return(n[$]&512)!==0}var wd=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function c_(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Ic(){return u_}function u_(n){return n.type.prototype.ngOnChanges&&(n.setInput=HC),$C}Ic.ngInherit=!0;function $C(){let n=d_(this),e=n?.current;if(e){let t=n.previous;if(t===xs)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function HC(n,e,t,r,i){let s=this.declaredInputs[r],o=d_(n)||qC(n,{previous:xs,current:null}),c=o.current||(o.current={}),u=o.previous,d=u[s];c[s]=new wd(d&&d.currentValue,t,u===xs),c_(n,e,i,t)}var l_="__ngSimpleChanges__";function d_(n){return n[l_]||null}function qC(n,e){return n[l_]=e}var cv=null;var Mn=function(n,e,t){cv?.(n,e,t)},zC="svg",GC="math";function cn(n){for(;Array.isArray(n);)n=n[dn];return n}function WC(n,e){return cn(e[n])}function Gt(n,e){return cn(e[n.index])}function h_(n,e){return n.data[e]}function fi(n,e){let t=e[n];return sr(t)?t:t[dn]}function rh(n){return(n[$]&128)===128}function KC(n){return hn(n[rt])}function Xa(n,e){return e==null?null:n[e]}function f_(n){n[ei]=0}function p_(n){n[$]&1024||(n[$]|=1024,rh(n)&&Ec(n))}function QC(n,e){for(;n>0;)e=e[hi],n--;return e}function wc(n){return!!(n[$]&9216||n[_t]?.dirty)}function Ed(n){n[qt].changeDetectionScheduler?.notify(8),n[$]&64&&(n[$]|=1024),wc(n)&&Ec(n)}function Ec(n){n[qt].changeDetectionScheduler?.notify(0);let e=ur(n);for(;e!==null&&!(e[$]&8192||(e[$]|=8192,!rh(e)));)e=ur(e)}function g_(n,e){if((n[$]&256)===256)throw new j(911,!1);n[Pn]===null&&(n[Pn]=[]),n[Pn].push(e)}function YC(n,e){if(n[Pn]===null)return;let t=n[Pn].indexOf(e);t!==-1&&n[Pn].splice(t,1)}function ur(n){let e=n[rt];return hn(e)?e[rt]:e}var oe={lFrame:b_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var m_=!1;function ZC(){return oe.lFrame.elementDepthCount}function JC(){oe.lFrame.elementDepthCount++}function XC(){oe.lFrame.elementDepthCount--}function y_(){return oe.bindingsEnabled}function e0(){return oe.skipHydrationRootTNode!==null}function t0(n){return oe.skipHydrationRootTNode===n}function n0(){oe.skipHydrationRootTNode=null}function Ve(){return oe.lFrame.lView}function pi(){return oe.lFrame.tView}function Wt(){let n=v_();for(;n!==null&&n.type===64;)n=n.parent;return n}function v_(){return oe.lFrame.currentTNode}function r0(){let n=oe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Bs(n,e){let t=oe.lFrame;t.currentTNode=n,t.isParent=e}function __(){return oe.lFrame.isParent}function i0(){oe.lFrame.isParent=!1}function I_(){return m_}function uv(n){m_=n}function s0(){return oe.lFrame.bindingIndex}function o0(n){return oe.lFrame.bindingIndex=n}function w_(){return oe.lFrame.bindingIndex++}function a0(n){let e=oe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function c0(){return oe.lFrame.inI18n}function u0(n,e){let t=oe.lFrame;t.bindingIndex=t.bindingRootIndex=n,Dd(e)}function l0(){return oe.lFrame.currentDirectiveIndex}function Dd(n){oe.lFrame.currentDirectiveIndex=n}function E_(n){oe.lFrame.currentQueryIndex=n}function d0(n){let e=n[ne];return e.type===2?e.declTNode:e.type===1?n[kt]:null}function D_(n,e,t){if(t&J.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&J.Host);)if(i=d0(s),i===null||(s=s[hi],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=oe.lFrame=T_();return r.currentTNode=e,r.lView=n,!0}function ih(n){let e=T_(),t=n[ne];oe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function T_(){let n=oe.lFrame,e=n===null?null:n.child;return e===null?b_(n):e}function b_(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function C_(){let n=oe.lFrame;return oe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var S_=C_;function sh(){let n=C_();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function h0(n){return(oe.lFrame.contextLView=QC(n,oe.lFrame.contextLView))[an]}function Dc(){return oe.lFrame.selectedIndex}function lr(n){oe.lFrame.selectedIndex=n}function f0(){let n=oe.lFrame;return h_(n.tView,n.selectedIndex)}function p0(){return oe.lFrame.currentNamespace}var A_=!0;function oh(){return A_}function ah(n){A_=n}function g0(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=u_(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function ch(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:d,ngOnDestroy:f}=s;o&&(n.contentHooks??=[]).push(-t,o),c&&((n.contentHooks??=[]).push(t,c),(n.contentCheckHooks??=[]).push(t,c)),u&&(n.viewHooks??=[]).push(-t,u),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),f!=null&&(n.destroyHooks??=[]).push(t,f)}}function Ba(n,e,t){R_(n,e,3,t)}function $a(n,e,t,r){(n[$]&3)===t&&R_(n,e,t,r)}function od(n,e){let t=n[$];(t&3)===e&&(t&=16383,t+=1,n[$]=t)}function R_(n,e,t,r){let i=r!==void 0?n[ei]&65535:0,s=r??-1,o=e.length-1,c=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(n[ei]+=65536),(c<s||s==-1)&&(m0(n,t,e,u),n[ei]=(n[ei]&4294901760)+u+2),u++}function lv(n,e){Mn(4,n,e);let t=ye(null);try{e.call(n)}finally{ye(t),Mn(5,n,e)}}function m0(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],c=n[o];i?n[$]>>14<n[ei]>>16&&(n[$]&3)===e&&(n[$]+=16384,lv(c,s)):lv(c,s)}var ri=-1,Os=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function y0(n){return n instanceof Os}function v0(n){return(n.flags&8)!==0}function _0(n){return(n.flags&16)!==0}var ad={},Td=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=gc(r);let i=this.injector.get(e,ad,r);return i!==ad||t===ad?i:this.parentInjector.get(e,t,r)}};function N_(n){return n!==ri}function ec(n){return n&32767}function I0(n){return n>>16}function tc(n,e){let t=I0(n),r=e;for(;t>0;)r=r[hi],t--;return r}var bd=!0;function dv(n){let e=bd;return bd=n,e}var w0=256,x_=w0-1,M_=5,E0=0,$t={};function D0(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(As)&&(r=t[As]),r==null&&(r=t[As]=E0++);let i=r&x_,s=1<<i;e.data[n+(i>>M_)]|=s}function P_(n,e){let t=O_(n,e);if(t!==-1)return t;let r=e[ne];r.firstCreatePass&&(n.injectorIndex=e.length,cd(r.data,n),cd(e,null),cd(r.blueprint,null));let i=uh(n,e),s=n.injectorIndex;if(N_(i)){let o=ec(i),c=tc(i,e),u=c[ne].data;for(let d=0;d<8;d++)e[s+d]=c[o+d]|u[o+d]}return e[s+8]=i,s}function cd(n,e){n.push(0,0,0,0,0,0,0,0,e)}function O_(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function uh(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=U_(i),r===null)return ri;if(t++,i=i[hi],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ri}function T0(n,e,t){D0(n,e,t)}function k_(n,e,t){if(t&J.Optional||n!==void 0)return n;Zd(e,"NodeInjector")}function L_(n,e,t,r){if(t&J.Optional&&r===void 0&&(r=null),!(t&(J.Self|J.Host))){let i=n[oi],s=yt(void 0);try{return i?i.get(e,r,t&J.Optional):Bv(e,r,t&J.Optional)}finally{yt(s)}}return k_(r,e,t)}function F_(n,e,t,r=J.Default,i){if(n!==null){if(e[$]&2048&&!(r&J.Self)){let o=R0(n,e,t,r,$t);if(o!==$t)return o}let s=V_(n,e,t,r,$t);if(s!==$t)return s}return L_(e,t,r,i)}function V_(n,e,t,r,i){let s=S0(t);if(typeof s=="function"){if(!D_(e,n,r))return r&J.Host?k_(i,t,r):L_(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&J.Optional))Zd(t);else return o}finally{S_()}}else if(typeof s=="number"){let o=null,c=O_(n,e),u=ri,d=r&J.Host?e[zt][kt]:null;for((c===-1||r&J.SkipSelf)&&(u=c===-1?uh(n,e):e[c+8],u===ri||!fv(r,!1)?c=-1:(o=e[ne],c=ec(u),e=tc(u,e)));c!==-1;){let f=e[ne];if(hv(s,c,f.data)){let g=b0(c,e,t,o,r,d);if(g!==$t)return g}u=e[c+8],u!==ri&&fv(r,e[ne].data[c+8]===d)&&hv(s,c,e)?(o=f,c=ec(u),e=tc(u,e)):c=-1}}return i}function b0(n,e,t,r,i,s){let o=e[ne],c=o.data[n+8],u=r==null?_c(c)&&bd:r!=o&&(c.type&3)!==0,d=i&J.Host&&s===c,f=C0(c,o,t,u,d);return f!==null?ks(e,o,f,c):$t}function C0(n,e,t,r,i){let s=n.providerIndexes,o=e.data,c=s&1048575,u=n.directiveStart,d=n.directiveEnd,f=s>>20,g=r?c:c+f,_=i?c+f:d;for(let E=g;E<_;E++){let A=o[E];if(E<u&&t===A||E>=u&&A.type===t)return E}if(i){let E=o[u];if(E&&js(E)&&E.type===t)return u}return null}function ks(n,e,t,r){let i=n[t],s=e.data;if(y0(i)){let o=i;o.resolving&&rC(nC(s[t]));let c=dv(o.canSeeViewProviders);o.resolving=!0;let u,d=o.injectImpl?yt(o.injectImpl):null,f=D_(n,r,J.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&g0(t,s[t],e)}finally{d!==null&&yt(d),dv(c),o.resolving=!1,S_()}}return i}function S0(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(As)?n[As]:void 0;return typeof e=="number"?e>=0?e&x_:A0:e}function hv(n,e,t){let r=1<<n;return!!(t[e+(n>>M_)]&r)}function fv(n,e){return!(n&J.Self)&&!(n&J.Host&&e)}var or=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return F_(this._tNode,this._lView,e,gc(r),t)}};function A0(){return new or(Wt(),Ve())}function lh(n){return Vs(()=>{let e=n.prototype.constructor,t=e[za]||Cd(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[za]||Cd(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Cd(n){return kv(n)?()=>{let e=Cd(vt(n));return e&&e()}:ii(n)}function R0(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[$]&2048&&!(o[$]&512);){let c=V_(s,o,t,r|J.Self,$t);if(c!==$t)return c;let u=s.parent;if(!u){let d=o[i_];if(d){let f=d.get(t,$t,r);if(f!==$t)return f}u=U_(o),o=o[hi]}s=u}return i}function U_(n){let e=n[ne],t=e.type;return t===2?e.declTNode:t===1?n[kt]:null}function pv(n,e=null,t=null,r){let i=j_(n,e,t,r);return i.resolveInjectorInitializers(),i}function j_(n,e=null,t=null,r,i=new Set){let s=[t||Bt,RC(n)];return r=r||(typeof n=="object"?void 0:ot(n)),new Ms(s,e||nh(),r||null,i)}var Pt=class n{static{this.THROW_IF_NOT_FOUND=Ns}static{this.NULL=new Ka}static create(e,t){if(Array.isArray(e))return pv({name:""},t,e,"");{let r=e.name??"";return pv({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=U({token:n,providedIn:"any",factory:()=>W(zv)})}static{this.__NG_ELEMENT_ID__=-1}};var N0=new H("");N0.__NG_ELEMENT_ID__=n=>{let e=Wt();if(e===null)throw new j(204,!1);if(e.type&2)return e.value;if(n&J.Optional)return null;throw new j(204,!1)};var x0="ngOriginalError";function ud(n){return n[x0]}var B_=!0,$_=(()=>{class n{static{this.__NG_ELEMENT_ID__=M0}static{this.__NG_ENV_ID__=t=>t}}return n})(),Sd=class extends $_{constructor(e){super(),this._lView=e}onDestroy(e){return g_(this._lView,e),()=>YC(this._lView,e)}};function M0(){return new Sd(Ve())}var gi=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new qe(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=U({token:n,providedIn:"root",factory:()=>new n})}}return n})();var Ad=class extends tt{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,jC()&&(this.destroyRef=O($_,{optional:!0})??void 0,this.pendingTasks=O(gi,{optional:!0})??void 0)}emit(e){let t=ye(null);try{super.next(e)}finally{ye(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let c=super.subscribe({next:i,error:s,complete:o});return e instanceof Ce&&e.add(c),c}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},nt=Ad;function nc(...n){}function H_(n){let e,t;function r(){n=nc;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function gv(n){return queueMicrotask(()=>n()),()=>{n=nc}}var dh="isAngularZone",rc=dh+"_ID",P0=0,Ie=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new nt(!1),this.onMicrotaskEmpty=new nt(!1),this.onStable=new nt(!1),this.onError=new nt(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=B_}=e;if(typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,L0(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(dh)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new j(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,O0,nc,nc);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},O0={};function hh(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function k0(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){H_(()=>{n.callbackScheduled=!1,Rd(n),n.isCheckStableRunning=!0,hh(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Rd(n)}function L0(n){let e=()=>{k0(n)},t=P0++;n._inner=n._inner.fork({name:"angular",properties:{[dh]:!0,[rc]:t,[rc+t]:!0},onInvokeTask:(r,i,s,o,c,u)=>{if(F0(u))return r.invokeTask(s,o,c,u);try{return mv(n),r.invokeTask(s,o,c,u)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),yv(n)}},onInvoke:(r,i,s,o,c,u,d)=>{try{return mv(n),r.invoke(s,o,c,u,d)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!V0(u)&&e(),yv(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,Rd(n),hh(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function Rd(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function mv(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function yv(n){n._nesting--,hh(n)}var Nd=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new nt,this.onMicrotaskEmpty=new nt,this.onStable=new nt,this.onError=new nt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function F0(n){return q_(n,"__ignore_ng_zone__")}function V0(n){return q_(n,"__scheduler_tick__")}function q_(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var un=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&ud(e);for(;t&&ud(t);)t=ud(t);return t||null}},U0=new H("",{providedIn:"root",factory:()=>{let n=O(Ie),e=O(un);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function j0(){return Tc(Wt(),Ve())}function Tc(n,e){return new bc(Gt(n,e))}var bc=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=j0}}return n})();function z_(n){return(n.flags&128)===128}var G_=new Map,B0=0;function $0(){return B0++}function H0(n){G_.set(n[vc],n)}function xd(n){G_.delete(n[vc])}var vv="__ngContext__";function dr(n,e){sr(e)?(n[vv]=e[vc],H0(e)):n[vv]=e}function W_(n){return Q_(n[Ps])}function K_(n){return Q_(n[Mt])}function Q_(n){for(;n!==null&&!hn(n);)n=n[Mt];return n}var Md;function Y_(n){Md=n}function q0(){if(Md!==void 0)return Md;if(typeof document<"u")return document;throw new j(210,!1)}var fh=new H("",{providedIn:"root",factory:()=>z0}),z0="ng",ph=new H(""),Un=new H("",{providedIn:"platform",factory:()=>"unknown"});var gh=new H("",{providedIn:"root",factory:()=>q0().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var G0="h",W0="b";var K0=()=>null;function mh(n,e,t=!1){return K0(n,e,t)}var Z_=!1,Q0=new H("",{providedIn:"root",factory:()=>Z_});var ic=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Mv})`}};function yh(n){return n instanceof ic?n.changingThisBreaksApplicationSecurity:n}function J_(n,e){let t=Y0(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Mv})`)}return t===e}function Y0(n){return n instanceof ic&&n.getTypeName()||null}var Z0=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function X_(n){return n=String(n),n.match(Z0)?n:"unsafe:"+n}var vh=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(vh||{});function eI(n){let e=J0();return e?e.sanitize(vh.URL,n)||"":J_(n,"URL")?yh(n):X_(Rs(n))}function J0(){let n=Ve();return n&&n[qt].sanitizer}function tI(n){return n instanceof Function?n():n}var fr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(fr||{}),X0;function _h(n,e){return X0(n,e)}function ti(n,e,t,r,i){if(r!=null){let s,o=!1;hn(r)?s=r:sr(r)&&(o=!0,r=r[dn]);let c=cn(r);n===0&&t!==null?i==null?oI(e,t,c):sc(e,t,c,i||null,!0):n===1&&t!==null?sc(e,t,c,i||null,!0):n===2?pS(e,c,o):n===3&&e.destroyNode(c),s!=null&&mS(e,n,s,t,i)}}function eS(n,e){return n.createText(e)}function tS(n,e,t){n.setValue(e,t)}function nI(n,e,t){return n.createElement(e,t)}function nS(n,e){rI(n,e),e[dn]=null,e[kt]=null}function rS(n,e,t,r,i,s){r[dn]=i,r[kt]=e,Cc(n,r,t,1,i,s)}function rI(n,e){e[qt].changeDetectionScheduler?.notify(9),Cc(n,e,e[ht],2,null,null)}function iS(n){let e=n[Ps];if(!e)return ld(n[ne],n);for(;e;){let t=null;if(sr(e))t=e[Ps];else{let r=e[It];r&&(t=r)}if(!t){for(;e&&!e[Mt]&&e!==n;)sr(e)&&ld(e[ne],e),e=e[rt];e===null&&(e=n),sr(e)&&ld(e[ne],e),t=e&&e[Mt]}e=t}}function sS(n,e,t,r){let i=It+r,s=t.length;r>0&&(t[i-1][Mt]=e),r<s-It?(e[Mt]=t[i],qv(t,It+r,e)):(t.push(e),e[Mt]=null),e[rt]=t;let o=e[ai];o!==null&&t!==o&&iI(o,e);let c=e[ci];c!==null&&c.insertView(n),Ed(e),e[$]|=128}function iI(n,e){let t=n[Za],r=e[rt];if(sr(r))n[$]|=Ja.HasTransplantedViews;else{let i=r[rt][zt];e[zt]!==i&&(n[$]|=Ja.HasTransplantedViews)}t===null?n[Za]=[e]:t.push(e)}function Ih(n,e){let t=n[Za],r=t.indexOf(e);t.splice(r,1)}function Pd(n,e){if(n.length<=It)return;let t=It+e,r=n[t];if(r){let i=r[ai];i!==null&&i!==n&&Ih(i,r),e>0&&(n[t-1][Mt]=r[Mt]);let s=Wa(n,It+e);nS(r[ne],r);let o=s[ci];o!==null&&o.detachView(s[ne]),r[rt]=null,r[Mt]=null,r[$]&=-129}return r}function sI(n,e){if(!(e[$]&256)){let t=e[ht];t.destroyNode&&Cc(n,e,t,3,null,null),iS(e)}}function ld(n,e){if(e[$]&256)return;let t=ye(null);try{e[$]&=-129,e[$]|=256,e[_t]&&Fl(e[_t]),aS(n,e),oS(n,e),e[ne].type===1&&e[ht].destroy();let r=e[ai];if(r!==null&&hn(e[rt])){r!==e[rt]&&Ih(r,e);let i=e[ci];i!==null&&i.detachView(n)}xd(e)}finally{ye(t)}}function oS(n,e){let t=n.cleanup,r=e[ov];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[t[s+1]];t[s].call(o)}r!==null&&(e[ov]=null);let i=e[Pn];if(i!==null){e[Pn]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function aS(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Os)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let c=i[s[o]],u=s[o+1];Mn(4,c,u);try{u.call(c)}finally{Mn(5,c,u)}}else{Mn(4,i,s);try{s.call(i)}finally{Mn(5,i,s)}}}}}function cS(n,e,t){return uS(n,e.parent,t)}function uS(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[dn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===Ht.None||s===Ht.Emulated)return null}return Gt(r,t)}}function sc(n,e,t,r,i){n.insertBefore(e,t,r,i)}function oI(n,e,t){n.appendChild(e,t)}function _v(n,e,t,r,i){r!==null?sc(n,e,t,r,i):oI(n,e,t)}function aI(n,e){return n.parentNode(e)}function lS(n,e){return n.nextSibling(e)}function dS(n,e,t){return fS(n,e,t)}function hS(n,e,t){return n.type&40?Gt(n,t):null}var fS=hS,Iv;function wh(n,e,t,r){let i=cS(n,r,e),s=e[ht],o=r.parent||e[kt],c=dS(o,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)_v(s,i,t[u],c,!1);else _v(s,i,t,c,!1);Iv!==void 0&&Iv(s,r,e,t,i)}function Cs(n,e){if(e!==null){let t=e.type;if(t&3)return Gt(e,n);if(t&4)return Od(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Cs(n,r);{let i=n[e.index];return hn(i)?Od(-1,i):cn(i)}}else{if(t&128)return Cs(n,e.next);if(t&32)return _h(e,n)()||cn(n[e.index]);{let r=cI(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ur(n[zt]);return Cs(i,r)}else return Cs(n,e.next)}}}return null}function cI(n,e){if(e!==null){let r=n[zt][kt],i=e.projection;return r.projection[i]}return null}function Od(n,e){let t=It+n+1;if(t<e.length){let r=e[t],i=r[ne].firstChild;if(i!==null)return Cs(r,i)}return e[cr]}function pS(n,e,t){n.removeChild(null,e,t)}function Eh(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let c=r[t.index],u=t.type;if(o&&e===0&&(c&&dr(cn(c),r),t.flags|=2),(t.flags&32)!==32)if(u&8)Eh(n,e,t.child,r,i,s,!1),ti(e,n,i,c,s);else if(u&32){let d=_h(t,r),f;for(;f=d();)ti(e,n,i,f,s);ti(e,n,i,c,s)}else u&16?gS(n,e,r,t,i,s):ti(e,n,i,c,s);t=o?t.projectionNext:t.next}}function Cc(n,e,t,r,i,s){Eh(t,r,n.firstChild,e,i,s,!1)}function gS(n,e,t,r,i,s){let o=t[zt],u=o[kt].projection[r.projection];if(Array.isArray(u))for(let d=0;d<u.length;d++){let f=u[d];ti(e,n,i,f,s)}else{let d=u,f=o[rt];z_(r)&&(d.flags|=128),Eh(n,e,d,f,i,s,!0)}}function mS(n,e,t,r,i){let s=t[cr],o=cn(t);s!==o&&ti(e,n,r,s,i);for(let c=It;c<t.length;c++){let u=t[c];Cc(u[ne],u,n,e,r,s)}}function yS(n,e,t){n.setAttribute(e,"style",t)}function uI(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function lI(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&gd(n,e,r),i!==null&&uI(n,e,i),s!==null&&yS(n,e,s)}var mi={};function at(n=1){dI(pi(),Ve(),Dc()+n,!1)}function dI(n,e,t,r){if(!r)if((e[$]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Ba(e,s,t)}else{let s=n.preOrderHooks;s!==null&&$a(e,s,0,t)}lr(t)}function Et(n,e=J.Default){let t=Ve();if(t===null)return W(n,e);let r=Wt();return F_(r,t,vt(n),e)}function hI(n,e,t,r,i,s){let o=ye(null);try{let c=null;i&On.SignalBased&&(c=e[r][vy]),c!==null&&c.transformFn!==void 0&&(s=c.transformFn(s)),i&On.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),n.setInput!==null?n.setInput(e,c,s,t,r):c_(e,c,r,s)}finally{ye(o)}}function vS(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)lr(~i);else{let s=i,o=t[++r],c=t[++r];u0(o,s);let u=e[s];c(2,u)}}}finally{lr(-1)}}function Sc(n,e,t,r,i,s,o,c,u,d,f){let g=e.blueprint.slice();return g[dn]=i,g[$]=r|4|128|8|64,(d!==null||n&&n[$]&2048)&&(g[$]|=2048),f_(g),g[rt]=g[hi]=n,g[an]=t,g[qt]=o||n&&n[qt],g[ht]=c||n&&n[ht],g[oi]=u||n&&n[oi]||null,g[kt]=s,g[vc]=$0(),g[Qa]=f,g[i_]=d,g[zt]=e.type==2?n[zt]:g,g}function Ac(n,e,t,r,i){let s=n.data[e];if(s===null)s=_S(n,e,t,r,i),c0()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=r0();s.injectorIndex=o===null?-1:o.injectorIndex}return Bs(s,!0),s}function _S(n,e,t,r,i){let s=v_(),o=__(),c=o?s:s&&s.parent,u=n.data[e]=TS(n,c,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function fI(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function pI(n,e,t,r,i){let s=Dc(),o=r&2;try{lr(-1),o&&e.length>kn&&dI(n,e,kn,!1),Mn(o?2:0,i),t(r,i)}finally{lr(s),Mn(o?3:1,i)}}function gI(n,e,t){if(o_(e)){let r=ye(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let c=n.data[o];if(c.contentQueries){let u=t[o];c.contentQueries(1,u,o)}}}finally{ye(r)}}}function mI(n,e,t){y_()&&(xS(n,e,t,Gt(t,e)),(t.flags&64)===64&&wI(n,e,t))}function yI(n,e,t=Gt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],c=o===-1?t(e,n):n[o];n[i++]=c}}}function vI(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Dh(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Dh(n,e,t,r,i,s,o,c,u,d,f){let g=kn+r,_=g+i,E=IS(g,_),A=typeof d=="function"?d():d;return E[ne]={type:n,blueprint:E,template:t,queries:null,viewQuery:c,declTNode:e,data:E.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:A,incompleteFirstPass:!1,ssrId:f}}function IS(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:mi);return t}function wS(n,e,t,r){let s=r.get(Q0,Z_)||t===Ht.ShadowDom,o=n.selectRootElement(e,s);return ES(o),o}function ES(n){DS(n)}var DS=()=>null;function TS(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,c=0;return e0()&&(c|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function wv(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let c,u=On.None;Array.isArray(o)?(c=o[0],u=o[1]):c=o;let d=s;if(i!==null){if(!i.hasOwnProperty(s))continue;d=i[s]}n===0?Ev(r,t,d,c,u):Ev(r,t,d,c)}return r}function Ev(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],i!==void 0&&s.push(i)}function bS(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,c=[],u=null,d=null;for(let f=r;f<i;f++){let g=s[f],_=t?t.get(g):null,E=_?_.inputs:null,A=_?_.outputs:null;u=wv(0,g.inputs,f,u,E),d=wv(1,g.outputs,f,d,A);let x=u!==null&&o!==null&&!eh(e)?jS(u,f,o):null;c.push(x)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=c,e.inputs=u,e.outputs=d}function CS(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function SS(n,e,t,r,i,s,o,c){let u=Gt(e,t),d=e.inputs,f;!c&&d!=null&&(f=d[r])?(Th(n,t,f,r,i),_c(e)&&AS(t,e.index)):e.type&3?(r=CS(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)):e.type&12}function AS(n,e){let t=fi(e,n);t[$]&16||(t[$]|=64)}function _I(n,e,t,r){if(y_()){let i=r===null?null:{"":-1},s=PS(n,t),o,c;s===null?o=c=null:[o,c]=s,o!==null&&II(n,e,t,o,i,c),i&&OS(t,r,i)}t.mergedAttrs=Xd(t.mergedAttrs,t.attrs)}function II(n,e,t,r,i,s){for(let d=0;d<r.length;d++)T0(P_(t,e),n,r[d].type);LS(t,n.data.length,r.length);for(let d=0;d<r.length;d++){let f=r[d];f.providersResolver&&f.providersResolver(f)}let o=!1,c=!1,u=fI(n,e,r.length,null);for(let d=0;d<r.length;d++){let f=r[d];t.mergedAttrs=Xd(t.mergedAttrs,f.hostAttrs),FS(n,t,e,u,f),kS(u,f,i),f.contentQueries!==null&&(t.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(t.flags|=64);let g=f.type.prototype;!o&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!c&&(g.ngOnChanges||g.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),c=!0),u++}bS(n,t,s)}function RS(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let c=~e.index;NS(o)!=c&&o.push(c),o.push(t,r,s)}}function NS(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function xS(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;_c(t)&&VS(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||P_(t,e),dr(r,e);let o=t.initialInputs;for(let c=i;c<s;c++){let u=n.data[c],d=ks(e,n,c,t);if(dr(d,e),o!==null&&US(e,c-i,d,u,t,o),js(u)){let f=fi(t.index,e);f[an]=ks(e,n,c,t)}}}function wI(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=l0();try{lr(s);for(let c=r;c<i;c++){let u=n.data[c],d=e[c];Dd(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&MS(u,d)}}finally{lr(-1),Dd(o)}}function MS(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function PS(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(IC(e,o.selectors,!1))if(r||(r=[]),js(o))if(o.findHostDirectiveDefs!==null){let c=[];i=i||new Map,o.findHostDirectiveDefs(o,c,i),r.unshift(...c,o);let u=c.length;kd(n,e,u)}else r.unshift(o),kd(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function kd(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function OS(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new j(-301,!1);r.push(e[i],s)}}}function kS(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;js(e)&&(t[""]=n)}}function LS(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function FS(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=ii(i.type,!0)),o=new Os(s,js(i),Et);n.blueprint[r]=o,t[r]=o,RS(n,e,r,fI(n,t,i.hostVars,mi),i)}function VS(n,e,t){let r=Gt(e,n),i=vI(t),s=n[qt].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let c=Rc(n,Sc(n,i,null,o,r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=c}function US(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let c=0;c<o.length;){let u=o[c++],d=o[c++],f=o[c++],g=o[c++];hI(r,t,u,d,f,g)}}function jS(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let c=0;c<o.length;c+=3)if(o[c]===e){r.push(s,o[c+1],o[c+2],t[i+1]);break}}i+=2}return r}function EI(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function DI(n,e){let t=n.contentQueries;if(t!==null){let r=ye(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let c=n.data[o];E_(s),c.contentQueries(2,e[o],o)}}}finally{ye(r)}}}function Rc(n,e){return n[Ps]?n[av][Mt]=e:n[Ps]=e,n[av]=e,e}function Ld(n,e,t){E_(0);let r=ye(null);try{e(n,t)}finally{ye(r)}}function BS(n,e){let t=n[oi],r=t?t.get(un,null):null;r&&r.handleError(e)}function Th(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],c=t[s++],u=t[s++],d=e[o],f=n.data[o];hI(f,d,r,c,u,i)}}function TI(n,e,t){let r=WC(e,n);tS(n[ht],r,t)}function $S(n,e){let t=fi(e,n),r=t[ne];HS(r,t);let i=t[dn];i!==null&&t[Qa]===null&&(t[Qa]=mh(i,t[oi])),bh(r,t,t[an])}function HS(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function bh(n,e,t){ih(e);try{let r=n.viewQuery;r!==null&&Ld(1,r,t);let i=n.template;i!==null&&pI(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[ci]?.finishViewCreation(n),n.staticContentQueries&&DI(n,e),n.staticViewQueries&&Ld(2,n.viewQuery,t);let s=n.components;s!==null&&qS(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[$]&=-5,sh()}}function qS(n,e){for(let t=0;t<e.length;t++)$S(n,e[t])}function zS(n,e,t,r){let i=ye(null);try{let s=e.tView,c=n[$]&4096?4096:16,u=Sc(n,s,t,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),d=n[e.index];u[ai]=d;let f=n[ci];return f!==null&&(u[ci]=f.createEmbeddedView(s)),bh(s,u,t),u}finally{ye(i)}}function Dv(n,e){return!e||e.firstChild===null||z_(n)}function GS(n,e,t,r=!0){let i=e[ne];if(sS(i,e,n,t),r){let o=Od(t,n),c=e[ht],u=aI(c,n[cr]);u!==null&&rS(i,n[kt],c,e,u,o)}let s=e[Qa];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function oc(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(cn(s)),hn(s)&&WS(s,r);let o=t.type;if(o&8)oc(n,e,t.child,r);else if(o&32){let c=_h(t,e),u;for(;u=c();)r.push(u)}else if(o&16){let c=cI(e,t);if(Array.isArray(c))r.push(...c);else{let u=ur(e[zt]);oc(u[ne],u,c,r,!0)}}t=i?t.projectionNext:t.next}return r}function WS(n,e){for(let t=It;t<n.length;t++){let r=n[t],i=r[ne].firstChild;i!==null&&oc(r[ne],r,i,e)}n[cr]!==n[dn]&&e.push(n[cr])}var bI=[];function KS(n){return n[_t]??QS(n)}function QS(n){let e=bI.pop()??Object.create(ZS);return e.lView=n,e}function YS(n){n.lView[_t]!==n&&(n.lView=null,bI.push(n))}var ZS=Ee(L({},Ol),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Ec(n.lView)},consumerOnSignalRead(){this.lView[_t]=this}});function JS(n){let e=n[_t]??Object.create(XS);return e.lView=n,e}var XS=Ee(L({},Ol),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=ur(n.lView);for(;e&&!CI(e[ne]);)e=ur(e);e&&p_(e)},consumerOnSignalRead(){this.lView[_t]=this}});function CI(n){return n.type!==2}var eA=100;function SI(n,e=!0,t=0){let r=n[qt],i=r.rendererFactory,s=!1;s||i.begin?.();try{tA(n,t)}catch(o){throw e&&BS(n,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function tA(n,e){let t=I_();try{uv(!0),Fd(n,e);let r=0;for(;wc(n);){if(r===eA)throw new j(103,!1);r++,Fd(n,1)}}finally{uv(t)}}function nA(n,e,t,r){let i=e[$];if((i&256)===256)return;let s=!1,o=!1;!s&&e[qt].inlineEffectRunner?.flush(),ih(e);let c=!0,u=null,d=null;s||(CI(n)?(d=KS(e),u=kl(d)):_y()===null?(c=!1,d=JS(e),u=kl(d)):e[_t]&&(Fl(e[_t]),e[_t]=null));try{f_(e),o0(n.bindingStartIndex),t!==null&&pI(n,e,t,2,r);let f=(i&3)===3;if(!s)if(f){let E=n.preOrderCheckHooks;E!==null&&Ba(e,E,null)}else{let E=n.preOrderHooks;E!==null&&$a(e,E,0,null),od(e,0)}if(o||rA(e),AI(e,0),n.contentQueries!==null&&DI(n,e),!s)if(f){let E=n.contentCheckHooks;E!==null&&Ba(e,E)}else{let E=n.contentHooks;E!==null&&$a(e,E,1),od(e,1)}vS(n,e);let g=n.components;g!==null&&NI(e,g,0);let _=n.viewQuery;if(_!==null&&Ld(2,_,r),!s)if(f){let E=n.viewCheckHooks;E!==null&&Ba(e,E)}else{let E=n.viewHooks;E!==null&&$a(e,E,2),od(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[sd]){for(let E of e[sd])E();e[sd]=null}s||(e[$]&=-73)}catch(f){throw s||Ec(e),f}finally{d!==null&&(Iy(d,u),c&&YS(d)),sh()}}function AI(n,e){for(let t=W_(n);t!==null;t=K_(t))for(let r=It;r<t.length;r++){let i=t[r];RI(i,e)}}function rA(n){for(let e=W_(n);e!==null;e=K_(e)){if(!(e[$]&Ja.HasTransplantedViews))continue;let t=e[Za];for(let r=0;r<t.length;r++){let i=t[r];p_(i)}}}function iA(n,e,t){let r=fi(e,n);RI(r,t)}function RI(n,e){rh(n)&&Fd(n,e)}function Fd(n,e){let r=n[ne],i=n[$],s=n[_t],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Ll(s)),o||=!1,s&&(s.dirty=!1),n[$]&=-9217,o)nA(r,n,r.template,n[an]);else if(i&8192){AI(n,1);let c=r.components;c!==null&&NI(n,c,1)}}function NI(n,e,t){for(let r=0;r<e.length;r++)iA(n,e[r],t)}function xI(n,e){let t=I_()?64:1088;for(n[qt].changeDetectionScheduler?.notify(e);n;){n[$]|=t;let r=ur(n);if(Id(n)&&!r)return n;n=r}return null}var hr=class{get rootNodes(){let e=this._lView,t=e[ne];return oc(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[an]}set context(e){this._lView[an]=e}get destroyed(){return(this._lView[$]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[rt];if(hn(e)){let t=e[Ya],r=t?t.indexOf(this):-1;r>-1&&(Pd(e,r),Wa(t,r))}this._attachedToViewContainer=!1}sI(this._lView[ne],this._lView)}onDestroy(e){g_(this._lView,e)}markForCheck(){xI(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[$]&=-129}reattach(){Ed(this._lView),this._lView[$]|=128}detectChanges(){this._lView[$]|=1024,SI(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Id(this._lView),t=this._lView[ai];t!==null&&!e&&Ih(t,this._lView),rI(this._lView[ne],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e;let t=Id(this._lView),r=this._lView[ai];r!==null&&!t&&iI(r,this._lView),Ed(this._lView)}},Nc=(()=>{class n{static{this.__NG_ELEMENT_ID__=aA}}return n})(),sA=Nc,oA=class extends sA{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=zS(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new hr(i)}};function aA(){return cA(Wt(),Ve())}function cA(n,e){return n.type&4?new oA(e,n,Tc(n,e)):null}var k2=new RegExp(`^(\\d+)*(${W0}|${G0})*(.*)`);var uA=()=>null;function Tv(n,e){return uA(n,e)}var ui=class{},xc=new H("",{providedIn:"root",factory:()=>!1});var MI=new H(""),PI=new H(""),Vd=class{},ac=class{};function lA(n){let e=Error(`No component factory found for ${ot(n)}.`);return e[dA]=n,e}var dA="ngComponent";var Ud=class{resolveComponentFactory(e){throw lA(e)}},li=class{static{this.NULL=new Ud}},di=class{};var hA=(()=>{class n{static{this.\u0275prov=U({token:n,providedIn:"root",factory:()=>null})}}return n})();function jd(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let c=e[o];if(typeof c=="number")s=c;else if(s==1)i=Yy(i,c);else if(s==2){let u=c,d=e[++o];r=Yy(r,u+": "+d+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var cc=class extends li{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=ar(e);return new Ls(t,this.ngModule)}};function bv(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,c=s?i[1]:On.None;e?t.push({propName:o,templateName:r,isSignal:(c&On.SignalBased)!==0}):t.push({propName:o,templateName:r})}return t}function fA(n){let e=n.toLowerCase();return e==="svg"?zC:e==="math"?GC:null}var Ls=class extends ac{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=bv(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return bv(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=TC(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=ye(null);try{i=i||this.ngModule;let o=i instanceof wt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let c=o?new Td(e,o):e,u=c.get(di,null);if(u===null)throw new j(407,!1);let d=c.get(hA,null),f=c.get(ui,null),g={rendererFactory:u,sanitizer:d,inlineEffectRunner:null,changeDetectionScheduler:f},_=u.createRenderer(null,this.componentDef),E=this.componentDef.selectors[0][0]||"div",A=r?wS(_,r,this.componentDef.encapsulation,c):nI(_,E,fA(E)),x=512;this.componentDef.signals?x|=4096:this.componentDef.onPush||(x|=16);let R=null;A!==null&&(R=mh(A,c,!0));let F=Dh(0,null,null,1,0,null,null,null,null,null,null),Y=Sc(null,F,null,x,null,null,g,_,c,null,R);ih(Y);let X,ge,Re=null;try{let Z=this.componentDef,w,m=null;Z.findHostDirectiveDefs?(w=[],m=new Map,Z.findHostDirectiveDefs(Z,w,m),w.push(Z)):w=[Z];let y=pA(Y,A);Re=gA(y,A,Z,w,Y,g,_),ge=h_(F,kn),A&&vA(_,Z,A,r),t!==void 0&&_A(ge,this.ngContentSelectors,t),X=yA(Re,Z,w,m,Y,[IA]),bh(F,Y,null)}catch(Z){throw Re!==null&&xd(Re),xd(Y),Z}finally{sh()}return new Bd(this.componentType,X,Tc(ge,Y),Y,ge)}finally{ye(s)}}},Bd=class extends Vd{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new hr(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;Th(s[ne],s,i,e,t),this.previousInputValues.set(e,t);let o=fi(this._tNode.index,s);xI(o,1)}}get injector(){return new or(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function pA(n,e){let t=n[ne],r=kn;return n[r]=e,Ac(t,r,2,"#host",null)}function gA(n,e,t,r,i,s,o){let c=i[ne];mA(r,n,e,o);let u=null;e!==null&&(u=mh(e,i[oi]));let d=s.rendererFactory.createRenderer(e,t),f=16;t.signals?f=4096:t.onPush&&(f=64);let g=Sc(i,vI(t),null,f,i[n.index],n,s,d,null,null,u);return c.firstCreatePass&&kd(c,n,r.length-1),Rc(i,g),i[n.index]=g}function mA(n,e,t,r){for(let i of n)e.mergedAttrs=Xd(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(jd(e,e.mergedAttrs,!0),t!==null&&lI(r,t,e))}function yA(n,e,t,r,i,s){let o=Wt(),c=i[ne],u=Gt(o,i);II(c,i,o,t,null,r);for(let f=0;f<t.length;f++){let g=o.directiveStart+f,_=ks(i,c,g,o);dr(_,i)}wI(c,i,o),u&&dr(u,i);let d=ks(i,c,o.directiveStart+o.componentOffset,o);if(n[an]=i[an]=d,s!==null)for(let f of s)f(d,e);return gI(c,o,i),d}function vA(n,e,t,r){if(r)gd(n,t,["ng-version","18.2.14"]);else{let{attrs:i,classes:s}=bC(e.selectors[0]);i&&gd(n,t,i),s&&s.length>0&&uI(n,t,s.join(" "))}}function _A(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null?Array.from(s):null)}}function IA(){let n=Wt();ch(Ve()[ne],n)}var yi=(()=>{class n{static{this.__NG_ELEMENT_ID__=wA}}return n})();function wA(){let n=Wt();return DA(n,Ve())}var EA=yi,OI=class extends EA{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Tc(this._hostTNode,this._hostLView)}get injector(){return new or(this._hostTNode,this._hostLView)}get parentInjector(){let e=uh(this._hostTNode,this._hostLView);if(N_(e)){let t=tc(e,this._hostLView),r=ec(e),i=t[ne].data[r+8];return new or(i,t)}else return new or(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=Cv(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-It}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Tv(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(c,i,Dv(this._hostTNode,o)),c}createComponent(e,t,r,i,s){let o=e&&!BC(e),c;if(o)c=t;else{let A=t||{};c=A.index,r=A.injector,i=A.projectableNodes,s=A.environmentInjector||A.ngModuleRef}let u=o?e:new Ls(ar(e)),d=r||this.parentInjector;if(!s&&u.ngModule==null){let x=(o?d:this.parentInjector).get(wt,null);x&&(s=x)}let f=ar(u.componentType??{}),g=Tv(this._lContainer,f?.id??null),_=g?.firstChild??null,E=u.create(d,i,_,s);return this.insertImpl(E.hostView,c,Dv(this._hostTNode,g)),E}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(KC(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[rt],d=new OI(u,u[kt],u[rt]);d.detach(d.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return GS(o,i,s,r),e.attachToViewContainerRef(),qv(dd(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=Cv(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Pd(this._lContainer,t);r&&(Wa(dd(this._lContainer),t),sI(r[ne],r))}detach(e){let t=this._adjustIndex(e,-1),r=Pd(this._lContainer,t);return r&&Wa(dd(this._lContainer),t)!=null?new hr(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Cv(n){return n[Ya]}function dd(n){return n[Ya]||(n[Ya]=[])}function DA(n,e){let t,r=e[n.index];return hn(r)?t=r:(t=EI(r,e,null,n),e[n.index]=t,Rc(e,t)),bA(t,e,n,r),new OI(t,n,e)}function TA(n,e){let t=n[ht],r=t.createComment(""),i=Gt(e,n),s=aI(t,i);return sc(t,s,r,lS(t,i),!1),r}var bA=AA,CA=()=>!1;function SA(n,e,t){return CA(n,e,t)}function AA(n,e,t,r){if(n[cr])return;let i;t.type&8?i=cn(r):i=TA(e,t),n[cr]=i}var Sv=new Set;function Ch(n){Sv.has(n)||(Sv.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Ln=class{},Fs=class{};var $d=class extends Ln{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new cc(this);let s=Jv(e);this._bootstrapComponents=tI(s.bootstrap),this._r3Injector=j_(e,t,[{provide:Ln,useValue:this},{provide:li,useValue:this.componentFactoryResolver},...r],ot(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Hd=class extends Fs{constructor(e){super(),this.moduleType=e}create(e){return new $d(this.moduleType,e,[])}};var uc=class extends Ln{constructor(e){super(),this.componentFactoryResolver=new cc(this),this.instance=null;let t=new Ms([...e.providers,{provide:Ln,useValue:this},{provide:li,useValue:this.componentFactoryResolver}],e.parent||nh(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Sh(n,e,t=null){return new uc({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function kI(n){return NA(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function RA(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function NA(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function lc(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function xA(n,e,t,r){let i=lc(n,e,t);return lc(n,e+1,r)||i}function MA(n){return(n.flags&32)===32}function PA(n,e,t,r,i,s,o,c,u){let d=e.consts,f=Ac(e,n,4,o||null,c||null);_I(e,t,f,Xa(d,u)),ch(e,f);let g=f.tView=Dh(2,f,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return e.queries!==null&&(e.queries.template(e,f),g.queries=e.queries.embeddedTView(f)),f}function OA(n,e,t,r,i,s,o,c,u,d){let f=t+kn,g=e.firstCreatePass?PA(f,e,n,r,i,s,o,c,u):e.data[f];Bs(g,!1);let _=kA(e,n,g,t);oh()&&wh(e,n,_,g),dr(_,n);let E=EI(_,n,_,g);return n[f]=E,Rc(n,E),SA(E,g,n),a_(g)&&mI(e,n,g),u!=null&&yI(n,g,d),g}function vi(n,e,t,r,i,s,o,c){let u=Ve(),d=pi(),f=Xa(d.consts,s);return OA(u,d,n,e,t,r,i,f,o,c),vi}var kA=LA;function LA(n,e,t,r){return ah(!0),e[ht].createComment("")}var Ss=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Ss||{}),FA=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=U({token:n,providedIn:"root",factory:()=>new n})}}return n})(),Av=class n{constructor(){this.ngZone=O(Ie),this.scheduler=O(ui),this.errorHandler=O(un,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Ss.EarlyRead,Ss.Write,Ss.MixedReadWrite,Ss.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=U({token:n,providedIn:"root",factory:()=>new n})}};function VA(n,e,t,r){return lc(n,w_(),t)?e+Rs(t)+r:mi}function UA(n,e,t,r,i,s){let o=s0(),c=xA(n,o,t,i);return a0(2),c?e+Rs(t)+r+Rs(i)+s:mi}function pr(n,e,t){let r=Ve(),i=w_();if(lc(r,i,e)){let s=pi(),o=f0();SS(s,o,r,n,e,r[ht],t,!1)}return pr}function Rv(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";Th(n,t,s[o],o,r)}function jA(n,e,t,r,i,s){let o=e.consts,c=Xa(o,i),u=Ac(e,n,2,r,c);return _I(e,t,u,Xa(o,s)),u.attrs!==null&&jd(u,u.attrs,!1),u.mergedAttrs!==null&&jd(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function le(n,e,t,r){let i=Ve(),s=pi(),o=kn+n,c=i[ht],u=s.firstCreatePass?jA(o,s,i,e,t,r):s.data[o],d=BA(s,i,u,c,e,n);i[o]=d;let f=a_(u);return Bs(u,!0),lI(c,d,u),!MA(u)&&oh()&&wh(s,i,d,u),ZC()===0&&dr(d,i),JC(),f&&(mI(s,i,u),gI(s,u,i)),r!==null&&yI(i,u),le}function ae(){let n=Wt();__()?i0():(n=n.parent,Bs(n,!1));let e=n;t0(e)&&n0(),XC();let t=pi();return t.firstCreatePass&&(ch(t,n),o_(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&v0(e)&&Rv(t,e,Ve(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&_0(e)&&Rv(t,e,Ve(),e.stylesWithoutHost,!1),ae}function it(n,e,t,r){return le(n,e,t,r),ae(),it}var BA=(n,e,t,r,i,s)=>(ah(!0),nI(r,i,p0()));var dc="en-US";var $A=dc;function HA(n){typeof n=="string"&&($A=n.toLowerCase().replace(/_/g,"-"))}function Ah(n=1){return h0(n)}function Te(n,e=""){let t=Ve(),r=pi(),i=n+kn,s=r.firstCreatePass?Ac(r,i,1,e,null):r.data[i],o=qA(r,t,s,e,n);t[i]=o,oh()&&wh(r,t,o,s),Bs(s,!1)}var qA=(n,e,t,r,i)=>(ah(!0),eS(e[ht],r));function Mc(n){return Lt("",n,""),Mc}function Lt(n,e,t){let r=Ve(),i=VA(r,n,e,t);return i!==mi&&TI(r,Dc(),i),Lt}function Pc(n,e,t,r,i){let s=Ve(),o=UA(s,n,e,t,r,i);return o!==mi&&TI(s,Dc(),o),Pc}var zA=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=t_(!1,t.type),i=r.length>0?Sh([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=U({token:n,providedIn:"environment",factory:()=>new n(W(wt))})}}return n})();function je(n){Ch("NgStandalone"),n.getStandaloneInjector=e=>e.get(zA).getOrCreateStandaloneInjector(n)}var Fn=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},LI=new Fn("18.2.14");var Oc=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var FI=new H("");function $s(n){return!!n&&typeof n.then=="function"}function VI(n){return!!n&&typeof n.subscribe=="function"}var UI=new H(""),jI=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=O(UI,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=i();if($s(s))t.push(s);else if(VI(s)){let o=new Promise((c,u)=>{s.subscribe({complete:c,error:u})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Rh=new H("");function GA(){wy(()=>{throw new j(600,!1)})}function WA(n){return n.isBoundToModule}var KA=10;function QA(n,e,t){try{let r=t();return $s(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var gr=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=O(U0),this.afterRenderManager=O(FA),this.zonelessEnabled=O(xc),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new tt,this.afterTick=new tt,this.componentTypes=[],this.components=[],this.isStable=O(gi).hasPendingTasks.pipe(ee(t=>!t)),this._injector=O(wt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof ac;if(!this._injector.get(jI).done){let _=!i&&Zv(t),E=!1;throw new j(405,E)}let o;i?o=t:o=this._injector.get(li).resolveComponentFactory(t),this.componentTypes.push(o.componentType);let c=WA(o)?void 0:this._injector.get(Ln),u=r||o.selector,d=o.create(Pt.NULL,[],u,c),f=d.location.nativeElement,g=d.injector.get(FI,null);return g?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),Ha(this.components,d),g?.unregisterApplication(f)}),this._loadComponent(d),d}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new j(101,!1);let t=ye(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,ye(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(di,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<KA;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)YA(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>wc(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Ha(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Rh,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Ha(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new j(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Ha(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function YA(n,e,t,r){if(!t&&!wc(n))return;SI(n,e,t&&!r?0:1)}var qd=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Nh=(()=>{class n{compileModuleSync(t){return new Hd(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=Jv(t),s=tI(i.declarations).reduce((o,c)=>{let u=ar(c);return u&&o.push(new Ls(u)),o},[]);return new qd(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ZA=(()=>{class n{constructor(){this.zone=O(Ie),this.changeDetectionScheduler=O(ui),this.applicationRef=O(gr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),JA=new H("",{factory:()=>!1});function BI({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ie(Ee(L({},HI()),{scheduleInRootZone:t})),[{provide:Ie,useFactory:n},{provide:si,multi:!0,useFactory:()=>{let r=O(ZA,{optional:!0});return()=>r.initialize()}},{provide:si,multi:!0,useFactory:()=>{let r=O(XA);return()=>{r.initialize()}}},e===!0?{provide:MI,useValue:!0}:[],{provide:PI,useValue:t??B_}]}function $I(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=BI({ngZoneFactory:()=>{let i=HI(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Ch("NgZone_CoalesceEvent"),new Ie(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return Vn([{provide:JA,useValue:!0},{provide:xc,useValue:!1},r])}function HI(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var XA=(()=>{class n{constructor(){this.subscription=new Ce,this.initialized=!1,this.zone=O(Ie),this.pendingTasks=O(gi)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ie.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ie.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var eR=(()=>{class n{constructor(){this.appRef=O(gr),this.taskService=O(gi),this.ngZone=O(Ie),this.zonelessEnabled=O(xc),this.disableScheduling=O(MI,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ce,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(rc):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(O(PI,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Nd||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?gv:H_;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(rc+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,gv(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function tR(){return typeof $localize<"u"&&$localize.locale||dc}var xh=new H("",{providedIn:"root",factory:()=>O(xh,J.Optional|J.SkipSelf)||tR()});var zd=new H("");function Ua(n){return!n.moduleRef}function nR(n){let e=Ua(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ie);return t.run(()=>{Ua(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(un,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),Ua(n)){let s=()=>e.destroy(),o=n.platformInjector.get(zd);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(zd);o.add(s),n.moduleRef.onDestroy(()=>{Ha(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return QA(r,t,()=>{let s=e.get(jI);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(xh,dc);if(HA(o||dc),Ua(n)){let c=e.get(gr);return n.rootComponent!==void 0&&c.bootstrap(n.rootComponent),c}else return rR(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function rR(n,e){let t=n.injector.get(gr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new j(-403,!1);e.push(n)}var qa=null,qI=new H("");function iR(n=[],e){return Pt.create({name:e,providers:[{provide:yc,useValue:"platform"},{provide:zd,useValue:new Set([()=>qa=null])},...n]})}function sR(n=[]){if(qa)return qa;let e=iR(n);return e.get(qI,!1)||(qa=e),GA(),oR(e),e}function oR(n){n.get(ph,null)?.forEach(t=>t())}var Hs=(()=>{class n{static{this.__NG_ELEMENT_ID__=aR}}return n})();function aR(n){return cR(Wt(),Ve(),(n&16)===16)}function cR(n,e,t){if(_c(n)&&!t){let r=fi(n.index,e);return new hr(r,r)}else if(n.type&175){let r=e[zt];return new hr(r,e)}return null}var Gd=class{constructor(){}supports(e){return kI(e)}create(e){return new Wd(e)}},uR=(n,e)=>e,Wd=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||uR}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<Nv(r,i,s)?t:r,c=Nv(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let d=c-i,f=u-i;if(d!=f){for(let _=0;_<d;_++){let E=_<s.length?s[_]:s[_]=0,A=E+_;f<=A&&A<d&&(s[_]=E+1)}let g=o.previousIndex;s[g]=f-d}}c!==u&&e(o,c,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!kI(e))throw new j(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let c=0;c<this.length;c++)s=e[c],o=this._trackByFn(c,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,c),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,c)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,RA(e,c=>{o=this._trackByFn(i,c),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,c,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,c,o,i)),Object.is(t.item,c)||this._addIdentityChange(t,c)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new Kd(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new hc),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new hc),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Kd=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Qd=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},hc=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Qd,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Nv(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function xv(){return new Mh([new Gd])}var Mh=(()=>{class n{static{this.\u0275prov=U({token:n,providedIn:"root",factory:xv})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||xv()),deps:[[n,new Hv,new Ot]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new j(901,!1)}}return n})();function zI(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;try{let s=i?.injector??sR(r);if(s.get(qI,!1)===!0&&!n.platformRef)throw new j(401,!1);let o=[BI({}),{provide:ui,useExisting:eR},...t||[]],c=new uc({providers:o,parent:s,debugName:"",runEnvironmentInitializers:!1});return nR({r3Injector:c.injector,platformInjector:s,rootComponent:e})}catch(s){return Promise.reject(s)}}var ZI=null;function _i(){return ZI}function JI(n){ZI??=n}var kc=class{};var Dt=new H(""),XI=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>O(fR),providedIn:"platform"})}}return n})();var fR=(()=>{class n extends XI{constructor(){super(),this._doc=O(Dt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return _i().getBaseHref(this._doc)}onPopState(t){let r=_i().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=_i().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function ew(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function GI(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function mr(n){return n&&n[0]!=="?"?"?"+n:n}var Fc=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>O(tw),providedIn:"root"})}}return n})(),pR=new H(""),tw=(()=>{class n extends Fc{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??O(Dt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ew(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+mr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+mr(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+mr(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(W(XI),W(pR,8))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var qs=(()=>{class n{constructor(t){this._subject=new nt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=yR(GI(WI(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+mr(r))}normalize(t){return n.stripTrailingSlash(mR(this._basePath,WI(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+mr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+mr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=mr}static{this.joinWithSlash=ew}static{this.stripTrailingSlash=GI}static{this.\u0275fac=function(r){return new(r||n)(W(Fc))}}static{this.\u0275prov=U({token:n,factory:()=>gR(),providedIn:"root"})}}return n})();function gR(){return new qs(W(Fc))}function mR(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function WI(n){return n.replace(/\/index.html$/,"")}function yR(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function nw(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Ph=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},rw=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Ph(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let c=r.get(s);r.move(c,o),KI(c,i)}});for(let i=0,s=r.length;i<s;i++){let c=r.get(i).context;c.index=i,c.count=s,c.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);KI(s,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Et(yi),Et(Nc),Et(Mh))}}static{this.\u0275dir=Us({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function KI(n,e){n.context.$implicit=e.item}var iw=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Oh,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){QI("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){QI("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Et(yi),Et(Nc))}}static{this.\u0275dir=Us({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),Oh=class{constructor(){this.$implicit=null,this.ngIf=null}};function QI(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${ot(e)}'.`)}var zs=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=mc({type:n})}static{this.\u0275inj=fc({})}}return n})(),sw="browser",vR="server";function kh(n){return n===vR}var Lc=class{};var Vh=class extends kc{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Uh=class n extends Vh{static makeCurrent(){JI(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=_R();return t==null?null:IR(t)}resetBaseElement(){Gs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return nw(document.cookie,e)}},Gs=null;function _R(){return Gs=Gs||document.querySelector("base"),Gs?Gs.getAttribute("href"):null}function IR(n){return new URL(n,document.baseURI).pathname}var wR=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),jh=new H(""),lw=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new j(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(W(jh),W(Ie))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),Vc=class{constructor(e){this._doc=e}},Lh="ng-app-id",dw=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=kh(s),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Lh}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(Lh),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(Lh,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(W(Dt),W(fh),W(gh,8),W(Un))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),Fh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},$h=/%COMP%/g,hw="%COMP%",ER=`_nghost-${hw}`,DR=`_ngcontent-${hw}`,TR=!0,bR=new H("",{providedIn:"root",factory:()=>TR});function CR(n){return DR.replace($h,n)}function SR(n){return ER.replace($h,n)}function fw(n,e){return e.map(t=>t.replace($h,n))}var aw=(()=>{class n{constructor(t,r,i,s,o,c,u,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=c,this.ngZone=u,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=kh(c),this.defaultRenderer=new Ws(t,o,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Ht.ShadowDom&&(r=Ee(L({},r),{encapsulation:Ht.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Uc?i.applyToHost(t):i instanceof Ks&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,c=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case Ht.Emulated:s=new Uc(u,d,r,this.appId,f,o,c,g);break;case Ht.ShadowDom:return new Bh(u,d,t,r,o,c,this.nonce,g);default:s=new Ks(u,d,r,f,o,c,g);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(W(lw),W(dw),W(fh),W(bR),W(Dt),W(Un),W(Ie),W(gh))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),Ws=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Fh[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(cw(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(cw(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new j(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=Fh[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Fh[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(fr.DashCase|fr.Important)?e.style.setProperty(t,r,i&fr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&fr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=_i().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function cw(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Bh=class extends Ws{constructor(e,t,r,i,s,o,c,u){super(e,s,o,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=fw(i.id,i.styles);for(let f of d){let g=document.createElement("style");c&&g.setAttribute("nonce",c),g.textContent=f,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ks=class extends Ws{constructor(e,t,r,i,s,o,c,u){super(e,s,o,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?fw(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Uc=class extends Ks{constructor(e,t,r,i,s,o,c,u){let d=i+"-"+r.id;super(e,t,r,s,o,c,u,d),this.contentAttr=CR(d),this.hostAttr=SR(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},AR=(()=>{class n extends Vc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(W(Dt))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})(),uw=["alt","control","meta","shift"],RR={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},NR={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},xR=(()=>{class n extends Vc{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>_i().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),o="code."),uw.forEach(d=>{let f=r.indexOf(d);f>-1&&(r.splice(f,1),o+=d+".")}),o+=s,r.length!=0||s.length===0)return null;let u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(t,r){let i=RR[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),uw.forEach(o=>{if(o!==i){let c=NR[o];c(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(W(Dt))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac})}}return n})();function pw(n,e,t){return zI(L({rootComponent:n,platformRef:t?.platformRef},MR(e)))}function MR(n){return{appProviders:[...FR,...n?.providers??[]],platformProviders:LR}}function PR(){Uh.makeCurrent()}function OR(){return new un}function kR(){return Y_(document),document}var LR=[{provide:Un,useValue:sw},{provide:ph,useValue:PR,multi:!0},{provide:Dt,useFactory:kR,deps:[]}];var FR=[{provide:yc,useValue:"root"},{provide:un,useFactory:OR,deps:[]},{provide:jh,useClass:AR,multi:!0,deps:[Dt,Ie,Un]},{provide:jh,useClass:xR,multi:!0,deps:[Dt]},aw,dw,lw,{provide:di,useExisting:aw},{provide:Lc,useClass:wR,deps:[]},[]];var gw=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(W(Dt))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var K="primary",ho=Symbol("RouteTitle"),Wh=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function bi(n){return new Wh(n)}function UR(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],c=n[s];if(o[0]===":")i[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function jR(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Kt(n[t],e[t]))return!1;return!0}function Kt(n,e){let t=n?Kh(n):void 0,r=e?Kh(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!Dw(n[i],e[i]))return!1;return!0}function Kh(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Dw(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function Tw(n){return n.length>0?n[n.length-1]:null}function jn(n){return Xl(n)?n:$s(n)?Ne(Promise.resolve(n)):z(n)}var BR={exact:Cw,subset:Sw},bw={exact:$R,subset:HR,ignored:()=>!0};function mw(n,e,t){return BR[t.paths](n.root,e.root,t.matrixParams)&&bw[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function $R(n,e){return Kt(n,e)}function Cw(n,e,t){if(!vr(n.segments,e.segments)||!$c(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!Cw(n.children[r],e.children[r],t))return!1;return!0}function HR(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Dw(n[t],e[t]))}function Sw(n,e,t){return Aw(n,e,e.segments,t)}function Aw(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!vr(i,t)||e.hasChildren()||!$c(i,t,r))}else if(n.segments.length===t.length){if(!vr(n.segments,t)||!$c(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!Sw(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!vr(n.segments,i)||!$c(n.segments,i,r)||!n.children[K]?!1:Aw(n.children[K],e,s,r)}}function $c(n,e,t){return e.every((r,i)=>bw[t](n[i].parameters,r.parameters))}var pn=class{constructor(e=new me([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=bi(this.queryParams),this._queryParamMap}toString(){return GR.serialize(this)}},me=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Hc(this)}},yr=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=bi(this.parameters),this._parameterMap}toString(){return Nw(this)}};function qR(n,e){return vr(n,e)&&n.every((t,r)=>Kt(t.parameters,e[r].parameters))}function vr(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function zR(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===K&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==K&&(t=t.concat(e(i,r)))}),t}var wf=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>new to,providedIn:"root"})}}return n})(),to=class{parse(e){let t=new Yh(e);return new pn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Qs(e.root,!0)}`,r=QR(e.queryParams),i=typeof e.fragment=="string"?`#${WR(e.fragment)}`:"";return`${t}${r}${i}`}},GR=new to;function Hc(n){return n.segments.map(e=>Nw(e)).join("/")}function Qs(n,e){if(!n.hasChildren())return Hc(n);if(e){let t=n.children[K]?Qs(n.children[K],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==K&&r.push(`${i}:${Qs(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=zR(n,(r,i)=>i===K?[Qs(n.children[K],!1)]:[`${i}:${Qs(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[K]!=null?`${Hc(n)}/${t[0]}`:`${Hc(n)}/(${t.join("//")})`}}function Rw(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function jc(n){return Rw(n).replace(/%3B/gi,";")}function WR(n){return encodeURI(n)}function Qh(n){return Rw(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function qc(n){return decodeURIComponent(n)}function yw(n){return qc(n.replace(/\+/g,"%20"))}function Nw(n){return`${Qh(n.path)}${KR(n.parameters)}`}function KR(n){return Object.entries(n).map(([e,t])=>`;${Qh(e)}=${Qh(t)}`).join("")}function QR(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${jc(t)}=${jc(i)}`).join("&"):`${jc(t)}=${jc(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var YR=/^[^\/()?;#]+/;function Hh(n){let e=n.match(YR);return e?e[0]:""}var ZR=/^[^\/()?;=#]+/;function JR(n){let e=n.match(ZR);return e?e[0]:""}var XR=/^[^=?&#]+/;function eN(n){let e=n.match(XR);return e?e[0]:""}var tN=/^[^&#]+/;function nN(n){let e=n.match(tN);return e?e[0]:""}var Yh=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new me([],{}):new me([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[K]=new me(e,t)),r}parseSegment(){let e=Hh(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(e),new yr(qc(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=JR(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Hh(this.remaining);i&&(r=i,this.capture(r))}e[qc(t)]=qc(r)}parseQueryParam(e){let t=eN(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=nN(this.remaining);o&&(r=o,this.capture(r))}let i=yw(t),s=yw(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Hh(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new j(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=K);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[K]:new me([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new j(4011,!1)}};function xw(n){return n.segments.length>0?new me([],{[K]:n}):n}function Mw(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=Mw(i);if(r===K&&s.segments.length===0&&s.hasChildren())for(let[o,c]of Object.entries(s.children))e[o]=c;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new me(n.segments,e);return rN(t)}function rN(n){if(n.numberOfChildren===1&&n.children[K]){let e=n.children[K];return new me(n.segments.concat(e.segments),e.children)}return n}function no(n){return n instanceof pn}function iN(n,e,t=null,r=null){let i=Pw(n);return Ow(i,e,t,r)}function Pw(n){let e;function t(s){let o={};for(let u of s.children){let d=t(u);o[u.outlet]=d}let c=new me(s.url,o);return s===n&&(e=c),c}let r=t(n.root),i=xw(r);return e??i}function Ow(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return qh(i,i,i,t,r);let s=sN(e);if(s.toRoot())return qh(i,i,new me([],{}),t,r);let o=oN(s,i,n),c=o.processChildren?Js(o.segmentGroup,o.index,s.commands):Lw(o.segmentGroup,o.index,s.commands);return qh(i,o.segmentGroup,c,t,r)}function zc(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function ro(n){return typeof n=="object"&&n!=null&&n.outlets}function qh(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([u,d])=>{s[u]=Array.isArray(d)?d.map(f=>`${f}`):`${d}`});let o;n===e?o=t:o=kw(n,e,t);let c=xw(Mw(o));return new pn(c,s,i)}function kw(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=kw(s,e,t)}),new me(n.segments,r)}var Gc=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&zc(r[0]))throw new j(4003,!1);let i=r.find(ro);if(i&&i!==Tw(r))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function sN(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Gc(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([u,d])=>{c[u]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:c}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?t=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,s]},[]);return new Gc(t,e,r)}var Ei=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function oN(n,e,t){if(n.isAbsolute)return new Ei(e,!0,0);if(!t)return new Ei(e,!1,NaN);if(t.parent===null)return new Ei(t,!0,0);let r=zc(n.commands[0])?0:1,i=t.segments.length-1+r;return aN(t,i,n.numberOfDoubleDots)}function aN(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new j(4005,!1);i=r.segments.length}return new Ei(r,!1,i-s)}function cN(n){return ro(n[0])?n[0].outlets:{[K]:n}}function Lw(n,e,t){if(n??=new me([],{}),n.segments.length===0&&n.hasChildren())return Js(n,e,t);let r=uN(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new me(n.segments.slice(0,r.pathIndex),{});return s.children[K]=new me(n.segments.slice(r.pathIndex),n.children),Js(s,0,i)}else return r.match&&i.length===0?new me(n.segments,{}):r.match&&!n.hasChildren()?Zh(n,e,t):r.match?Js(n,0,i):Zh(n,e,t)}function Js(n,e,t){if(t.length===0)return new me(n.segments,{});{let r=cN(t),i={};if(Object.keys(r).some(s=>s!==K)&&n.children[K]&&n.numberOfChildren===1&&n.children[K].segments.length===0){let s=Js(n.children[K],e,t);return new me(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=Lw(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new me(n.segments,i)}}function uN(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],c=t[r];if(ro(c))break;let u=`${c}`,d=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&d&&typeof d=="object"&&d.outlets===void 0){if(!_w(u,d,o))return s;r+=2}else{if(!_w(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Zh(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(ro(s)){let u=lN(s.outlets);return new me(r,u)}if(i===0&&zc(t[0])){let u=n.segments[e];r.push(new yr(u.path,vw(t[0]))),i++;continue}let o=ro(s)?s.outlets[K]:`${s}`,c=i<t.length-1?t[i+1]:null;o&&c&&zc(c)?(r.push(new yr(o,vw(c))),i+=2):(r.push(new yr(o,{})),i++)}return new me(r,{})}function lN(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Zh(new me([],{}),0,r))}),e}function vw(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function _w(n,e,t){return n==t.path&&Kt(e,t.parameters)}var Xs="imperative",ze=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(ze||{}),Tt=class{constructor(e,t){this.id=e,this.url=t}},io=class extends Tt{constructor(e,t,r="imperative",i=null){super(e,t),this.type=ze.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},_r=class extends Tt{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=ze.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},pt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(pt||{}),Jh=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Jh||{}),fn=class extends Tt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=ze.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ir=class extends Tt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=ze.NavigationSkipped}},so=class extends Tt{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=ze.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Wc=class extends Tt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ze.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xh=class extends Tt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ze.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ef=class extends Tt{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=ze.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},tf=class extends Tt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ze.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nf=class extends Tt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ze.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rf=class{constructor(e){this.route=e,this.type=ze.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},sf=class{constructor(e){this.route=e,this.type=ze.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},of=class{constructor(e){this.snapshot=e,this.type=ze.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},af=class{constructor(e){this.snapshot=e,this.type=ze.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},cf=class{constructor(e){this.snapshot=e,this.type=ze.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},uf=class{constructor(e){this.snapshot=e,this.type=ze.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var oo=class{},Ci=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function dN(n,e){return n.providers&&!n._injector&&(n._injector=Sh(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Ft(n){return n.outlet||K}function hN(n,e){let t=n.filter(r=>Ft(r)===e);return t.push(...n.filter(r=>Ft(r)!==e)),t}function fo(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var lf=class{get injector(){return fo(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new eu(this.rootInjector),this.attachRef=null}},eu=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new lf(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(W(wt))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Kc=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=df(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=df(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=hf(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return hf(e,this._root).map(t=>t.value)}};function df(n,e){if(n===e.value)return e;for(let t of e.children){let r=df(n,t);if(r)return r}return null}function hf(n,e){if(n===e.value)return[e];for(let t of e.children){let r=hf(n,t);if(r.length)return r.unshift(e),r}return[]}var ft=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function wi(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Qc=class extends Kc{constructor(e,t){super(e),this.snapshot=t,Ef(this,e)}toString(){return this.snapshot.toString()}};function Fw(n){let e=fN(n),t=new qe([new yr("",{})]),r=new qe({}),i=new qe({}),s=new qe({}),o=new qe(""),c=new Si(t,r,s,o,i,K,n,e.root);return c.snapshot=e.root,new Qc(new ft(c,[]),e)}function fN(n){let e={},t={},r={},i="",s=new Di([],e,r,i,t,K,n,null,{});return new Zc("",new ft(s,[]))}var Si=class{constructor(e,t,r,i,s,o,c,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ee(d=>d[ho]))??z(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ee(e=>bi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ee(e=>bi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Yc(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),n.params),data:L(L({},e.data),n.data),resolve:L(L(L(L({},n.data),e.data),i?.data),n._resolvedData)}:r={params:L({},n.params),data:L({},n.data),resolve:L(L({},n.data),n._resolvedData??{})},i&&Uw(i)&&(r.resolve[ho]=i.title),r}var Di=class{get title(){return this.data?.[ho]}constructor(e,t,r,i,s,o,c,u,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=c,this.routeConfig=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=bi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=bi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Zc=class extends Kc{constructor(e,t){super(t),this.url=e,Ef(this,t)}toString(){return Vw(this._root)}};function Ef(n,e){e.value._routerState=n,e.children.forEach(t=>Ef(n,t))}function Vw(n){let e=n.children.length>0?` { ${n.children.map(Vw).join(", ")} } `:"";return`${n.value}${e}`}function zh(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Kt(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Kt(e.params,t.params)||n.paramsSubject.next(t.params),jR(e.url,t.url)||n.urlSubject.next(t.url),Kt(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function ff(n,e){let t=Kt(n.params,e.params)&&qR(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||ff(n.parent,e.parent))}function Uw(n){return typeof n.title=="string"||n.title===null}var pN=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=K,this.activateEvents=new nt,this.deactivateEvents=new nt,this.attachEvents=new nt,this.detachEvents=new nt,this.parentContexts=O(eu),this.location=O(yi),this.changeDetector=O(Hs),this.inputBinder=O(Df,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new pf(t,c,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Us({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ic]})}}return n})(),pf=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Si?this.route:e===eu?this.childContexts:this.parent.get(e,t)}},Df=new H("");function gN(n,e,t){let r=ao(n,e._root,t?t._root:void 0);return new Qc(r,e)}function ao(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=mN(n,e,t);return new ft(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(c=>ao(n,c)),o}}let r=yN(e.value),i=e.children.map(s=>ao(n,s));return new ft(r,i)}}function mN(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ao(n,r,i);return ao(n,r)})}function yN(n){return new Si(new qe(n.url),new qe(n.params),new qe(n.queryParams),new qe(n.fragment),new qe(n.data),n.outlet,n.component,n)}var co=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},jw="ngNavigationCancelingError";function Jc(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=no(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Bw(!1,pt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function Bw(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[jw]=!0,t.cancellationCode=e,t}function vN(n){return $w(n)&&no(n.url)}function $w(n){return!!n&&n[jw]}var _N=(n,e,t,r)=>ee(i=>(new gf(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),gf=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),zh(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=wi(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=wi(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=wi(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=wi(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new uf(s.value.snapshot))}),e.children.length&&this.forwardEvent(new af(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(zh(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),zh(c.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Xc=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ti=class{constructor(e,t){this.component=e,this.route=t}};function IN(n,e,t){let r=n._root,i=e?e._root:null;return Ys(r,i,t,[r.value])}function wN(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ri(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Lv(n)?n:e.get(n):r}function Ys(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=wi(e);return n.children.forEach(o=>{EN(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,c])=>eo(c,t.getContext(o),i)),i}function EN(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=DN(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Xc(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Ys(n,e,c?c.children:null,r,i):Ys(n,e,t,r,i),u&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new Ti(c.outlet.component,o))}else o&&eo(e,c,i),i.canActivateChecks.push(new Xc(r)),s.component?Ys(n,null,c?c.children:null,r,i):Ys(n,null,t,r,i);return i}function DN(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!vr(n.url,e.url);case"pathParamsOrQueryParamsChange":return!vr(n.url,e.url)||!Kt(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ff(n,e)||!Kt(n.queryParams,e.queryParams);case"paramsChange":default:return!ff(n,e)}}function eo(n,e,t){let r=wi(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?eo(o,e.children.getContext(s),t):eo(o,null,t):eo(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ti(e.outlet.component,i)):t.canDeactivateChecks.push(new Ti(null,i)):t.canDeactivateChecks.push(new Ti(null,i))}function po(n){return typeof n=="function"}function TN(n){return typeof n=="boolean"}function bN(n){return n&&po(n.canLoad)}function CN(n){return n&&po(n.canActivate)}function SN(n){return n&&po(n.canActivateChild)}function AN(n){return n&&po(n.canDeactivate)}function RN(n){return n&&po(n.canMatch)}function Hw(n){return n instanceof sn||n?.name==="EmptyError"}var Bc=Symbol("INITIAL_VALUE");function Ai(){return Nt(n=>Pa(n.map(e=>e.pipe(on(1),Fa(Bc)))).pipe(ee(e=>{for(let t of e)if(t!==!0){if(t===Bc)return Bc;if(t===!1||NN(t))return t}return!0}),mt(e=>e!==Bc),on(1)))}function NN(n){return no(n)||n instanceof co}function xN(n,e){return Oe(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?z(Ee(L({},t),{guardsResult:!0})):MN(o,r,i,n).pipe(Oe(c=>c&&TN(c)?PN(r,s,n,e):z(c)),ee(c=>Ee(L({},t),{guardsResult:c})))})}function MN(n,e,t,r){return Ne(n).pipe(Oe(i=>VN(i.component,i.route,t,e,r)),jt(i=>i!==!0,!0))}function PN(n,e,t,r){return Ne(e).pipe(Zr(i=>Yr(kN(i.route.parent,r),ON(i.route,r),FN(n,i.path,t),LN(n,i.route,t))),jt(i=>i!==!0,!0))}function ON(n,e){return n!==null&&e&&e(new cf(n)),z(!0)}function kN(n,e){return n!==null&&e&&e(new of(n)),z(!0)}function LN(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return z(!0);let i=r.map(s=>Oa(()=>{let o=fo(e)??t,c=Ri(s,o),u=CN(c)?c.canActivate(e,n):ln(o,()=>c(e,n));return jn(u).pipe(jt())}));return z(i).pipe(Ai())}function FN(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>wN(o)).filter(o=>o!==null).map(o=>Oa(()=>{let c=o.guards.map(u=>{let d=fo(o.node)??t,f=Ri(u,d),g=SN(f)?f.canActivateChild(r,n):ln(d,()=>f(r,n));return jn(g).pipe(jt())});return z(c).pipe(Ai())}));return z(s).pipe(Ai())}function VN(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return z(!0);let o=s.map(c=>{let u=fo(e)??i,d=Ri(c,u),f=AN(d)?d.canDeactivate(n,e,t,r):ln(u,()=>d(n,e,t,r));return jn(f).pipe(jt())});return z(o).pipe(Ai())}function UN(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return z(!0);let s=i.map(o=>{let c=Ri(o,n),u=bN(c)?c.canLoad(e,t):ln(n,()=>c(e,t));return jn(u)});return z(s).pipe(Ai(),qw(r))}function qw(n){return va(ke(e=>{if(typeof e!="boolean")throw Jc(n,e)}),ee(e=>e===!0))}function jN(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return z(!0);let s=i.map(o=>{let c=Ri(o,n),u=RN(c)?c.canMatch(e,t):ln(n,()=>c(e,t));return jn(u)});return z(s).pipe(Ai(),qw(r))}var uo=class{constructor(e){this.segmentGroup=e||null}},lo=class extends Error{constructor(e){super(),this.urlTree=e}};function Ii(n){return Qr(new uo(n))}function BN(n){return Qr(new j(4e3,!1))}function $N(n){return Qr(Bw(!1,pt.GuardRejected))}var mf=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return z(r);if(i.numberOfChildren>1||!i.children[K])return BN(`${e.redirectTo}`);i=i.children[K]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let c=t,{queryParams:u,fragment:d,routeConfig:f,url:g,outlet:_,params:E,data:A,title:x}=i,R=ln(s,()=>c({params:E,data:A,queryParams:u,fragment:d,routeConfig:f,url:g,outlet:_,title:x}));if(R instanceof pn)throw new lo(R);t=R}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new lo(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new pn(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let c=s.substring(1);r[i]=t[c]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([c,u])=>{o[c]=this.createSegmentGroup(e,u,r,i)}),new me(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new j(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},yf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function HN(n,e,t,r,i){let s=zw(n,e,t);return s.matched?(r=dN(e,r),jN(r,e,t,i).pipe(ee(o=>o===!0?s:L({},yf)))):z(s)}function zw(n,e,t){if(e.path==="**")return qN(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?L({},yf):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||UR)(t,n,e);if(!i)return L({},yf);let s={};Object.entries(i.posParams??{}).forEach(([c,u])=>{s[c]=u.path});let o=i.consumed.length>0?L(L({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function qN(n){return{matched:!0,parameters:n.length>0?Tw(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Iw(n,e,t,r){return t.length>0&&WN(n,t,r)?{segmentGroup:new me(e,GN(r,new me(t,n.children))),slicedSegments:[]}:t.length===0&&KN(n,t,r)?{segmentGroup:new me(n.segments,zN(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new me(n.segments,n.children),slicedSegments:t}}function zN(n,e,t,r){let i={};for(let s of t)if(tu(n,e,s)&&!r[Ft(s)]){let o=new me([],{});i[Ft(s)]=o}return L(L({},r),i)}function GN(n,e){let t={};t[K]=e;for(let r of n)if(r.path===""&&Ft(r)!==K){let i=new me([],{});t[Ft(r)]=i}return t}function WN(n,e,t){return t.some(r=>tu(n,e,r)&&Ft(r)!==K)}function KN(n,e,t){return t.some(r=>tu(n,e,r))}function tu(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function QN(n,e,t){return e.length===0&&!n.children[t]}var vf=class{};function YN(n,e,t,r,i,s,o="emptyOnly"){return new _f(n,e,t,r,i,o,s).recognize()}var ZN=31,_f=class{constructor(e,t,r,i,s,o,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=c,this.applyRedirects=new mf(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new j(4002,`'${e.segmentGroup}'`)}recognize(){let e=Iw(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ee(({children:t,rootSnapshot:r})=>{let i=new ft(r,t),s=new Zc("",i),o=iN(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Di([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),K,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,K,t).pipe(ee(r=>({children:r,rootSnapshot:t})),Rn(r=>{if(r instanceof lo)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof uo?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(ee(o=>o instanceof ft?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Ne(s).pipe(Zr(o=>{let c=r.children[o],u=hN(t,o);return this.processSegmentGroup(e,u,c,o,i)}),La((o,c)=>(o.push(...c),o)),Nn(null),nd(),Oe(o=>{if(o===null)return Ii(r);let c=Gw(o);return JN(c),z(c)}))}processSegment(e,t,r,i,s,o,c){return Ne(t).pipe(Zr(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,s,o,c).pipe(Rn(d=>{if(d instanceof uo)return z(null);throw d}))),jt(u=>!!u),Rn(u=>{if(Hw(u))return QN(r,i,s)?z(new vf):Ii(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,s,o,c,u){return Ft(r)!==o&&(o===K||!tu(i,s,r))?Ii(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,u):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,u):Ii(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,c){let{matched:u,parameters:d,consumedSegments:f,positionalParamSegments:g,remainingSegments:_}=zw(t,i,s);if(!u)return Ii(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>ZN&&(this.allowRedirects=!1));let E=new Di(s,d,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,ww(i),Ft(i),i.component??i._loadedComponent??null,i,Ew(i)),A=Yc(E,c,this.paramsInheritanceStrategy);E.params=Object.freeze(A.params),E.data=Object.freeze(A.data);let x=this.applyRedirects.applyRedirectCommands(f,i.redirectTo,g,E,e);return this.applyRedirects.lineralizeSegments(i,x).pipe(Oe(R=>this.processSegment(e,r,t,R.concat(_),o,!1,c)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let c=HN(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),c.pipe(Nt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Nt(({routes:d})=>{let f=r._loadedInjector??e,{parameters:g,consumedSegments:_,remainingSegments:E}=u,A=new Di(_,g,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,ww(r),Ft(r),r.component??r._loadedComponent??null,r,Ew(r)),x=Yc(A,o,this.paramsInheritanceStrategy);A.params=Object.freeze(x.params),A.data=Object.freeze(x.data);let{segmentGroup:R,slicedSegments:F}=Iw(t,_,E,d);if(F.length===0&&R.hasChildren())return this.processChildren(f,d,R,A).pipe(ee(X=>new ft(A,X)));if(d.length===0&&F.length===0)return z(new ft(A,[]));let Y=Ft(r)===s;return this.processSegment(f,d,R,F,Y?K:s,!0,A).pipe(ee(X=>new ft(A,X instanceof ft?[X]:[])))}))):Ii(t)))}getChildConfig(e,t,r){return t.children?z({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?z({routes:t._loadedRoutes,injector:t._loadedInjector}):UN(e,t,r,this.urlSerializer).pipe(Oe(i=>i?this.configLoader.loadChildren(e,t).pipe(ke(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):$N(t))):z({routes:[],injector:e})}};function JN(n){n.sort((e,t)=>e.value.outlet===K?-1:t.value.outlet===K?1:e.value.outlet.localeCompare(t.value.outlet))}function XN(n){let e=n.value.routeConfig;return e&&e.path===""}function Gw(n){let e=[],t=new Set;for(let r of n){if(!XN(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=Gw(r.children);e.push(new ft(r.value,i))}return e.filter(r=>!t.has(r))}function ww(n){return n.data||{}}function Ew(n){return n.resolve||{}}function ex(n,e,t,r,i,s){return Oe(o=>YN(n,e,t,r,o.extractedUrl,i,s).pipe(ee(({state:c,tree:u})=>Ee(L({},o),{targetSnapshot:c,urlAfterRedirects:u}))))}function tx(n,e){return Oe(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return z(t);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let d of Ww(u))o.add(d);let c=0;return Ne(o).pipe(Zr(u=>s.has(u)?nx(u,r,n,e):(u.data=Yc(u,u.parent,n).resolve,z(void 0))),ke(()=>c++),Jr(1),Oe(u=>c===o.size?z(t):dt))})}function Ww(n){let e=n.children.map(t=>Ww(t)).flat();return[n,...e]}function nx(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!Uw(i)&&(s[ho]=i.title),rx(s,n,e,r).pipe(ee(o=>(n._resolvedData=o,n.data=Yc(n,n.parent,t).resolve,null)))}function rx(n,e,t,r){let i=Kh(n);if(i.length===0)return z({});let s={};return Ne(i).pipe(Oe(o=>ix(n[o],e,t,r).pipe(jt(),ke(c=>{if(c instanceof co)throw Jc(new to,c);s[o]=c}))),Jr(1),td(s),Rn(o=>Hw(o)?dt:Qr(o)))}function ix(n,e,t,r){let i=fo(e)??r,s=Ri(n,i),o=s.resolve?s.resolve(e,t):ln(i,()=>s(e,t));return jn(o)}function Gh(n){return Nt(e=>{let t=n(e);return t?Ne(t).pipe(ee(()=>e)):z(e)})}var Kw=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===K);return r}getResolvedTitleForRoute(t){return t.data[ho]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>O(sx),providedIn:"root"})}}return n})(),sx=(()=>{class n extends Kw{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(W(gw))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Tf=new H("",{providedIn:"root",factory:()=>({})}),ox=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ue({type:n,selectors:[["ng-component"]],standalone:!0,features:[je],decls:1,vars:0,template:function(r,i){r&1&&it(0,"router-outlet")},dependencies:[pN],encapsulation:2})}}return n})();function bf(n){let e=n.children&&n.children.map(bf),t=e?Ee(L({},n),{children:e}):L({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==K&&(t.component=ox),t}var Cf=new H(""),ax=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=O(Nh)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return z(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=jn(t.loadComponent()).pipe(ee(Qw),ke(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),bs(()=>{this.componentLoaders.delete(t)})),i=new zr(r,()=>new tt).pipe(qr());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=cx(r,this.compiler,t,this.onLoadEndListener).pipe(bs(()=>{this.childrenLoaders.delete(r)})),o=new zr(s,()=>new tt).pipe(qr());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function cx(n,e,t,r){return jn(n.loadChildren()).pipe(ee(Qw),Oe(i=>i instanceof Fs||Array.isArray(i)?z(i):Ne(e.compileModuleAsync(i))),ee(i=>{r&&r(n);let s,o,c=!1;return Array.isArray(i)?(o=i,c=!0):(s=i.create(t).injector,o=s.get(Cf,[],{optional:!0,self:!0}).flat()),{routes:o.map(bf),injector:s}}))}function ux(n){return n&&typeof n=="object"&&"default"in n}function Qw(n){return ux(n)?n.default:n}var Sf=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>O(lx),providedIn:"root"})}}return n})(),lx=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),dx=new H("");var hx=new H(""),fx=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new tt,this.transitionAbortSubject=new tt,this.configLoader=O(ax),this.environmentInjector=O(wt),this.urlSerializer=O(wf),this.rootContexts=O(eu),this.location=O(qs),this.inputBindingEnabled=O(Df,{optional:!0})!==null,this.titleStrategy=O(Kw),this.options=O(Tf,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=O(Sf),this.createViewTransition=O(dx,{optional:!0}),this.navigationErrorHandler=O(hx,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>z(void 0),this.rootComponentType=null;let t=i=>this.events.next(new rf(i)),r=i=>this.events.next(new sf(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(Ee(L(L({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new qe({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Xs,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(mt(s=>s.id!==0),ee(s=>Ee(L({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Nt(s=>{let o=!1,c=!1;return z(s).pipe(Nt(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",pt.SupersededByNewNavigation),dt;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?Ee(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!d&&f!=="reload"){let g="";return this.events.next(new Ir(u.id,this.urlSerializer.serialize(u.rawUrl),g,Jh.IgnoredSameUrlNavigation)),u.resolve(!1),dt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return z(u).pipe(Nt(g=>{let _=this.transitions?.getValue();return this.events.next(new io(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),_!==this.transitions?.getValue()?dt:Promise.resolve(g)}),ex(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),ke(g=>{s.targetSnapshot=g.targetSnapshot,s.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation=Ee(L({},this.currentNavigation),{finalUrl:g.urlAfterRedirects});let _=new Wc(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(_)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:g,extractedUrl:_,source:E,restoredState:A,extras:x}=u,R=new io(g,this.urlSerializer.serialize(_),E,A);this.events.next(R);let F=Fw(this.rootComponentType).snapshot;return this.currentTransition=s=Ee(L({},u),{targetSnapshot:F,urlAfterRedirects:_,extras:Ee(L({},x),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=_,z(s)}else{let g="";return this.events.next(new Ir(u.id,this.urlSerializer.serialize(u.extractedUrl),g,Jh.IgnoredByUrlHandlingStrategy)),u.resolve(!1),dt}}),ke(u=>{let d=new Xh(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),ee(u=>(this.currentTransition=s=Ee(L({},u),{guards:IN(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),xN(this.environmentInjector,u=>this.events.next(u)),ke(u=>{if(s.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw Jc(this.urlSerializer,u.guardsResult);let d=new ef(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(d)}),mt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",pt.GuardRejected),!1)),Gh(u=>{if(u.guards.canActivateChecks.length)return z(u).pipe(ke(d=>{let f=new tf(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),Nt(d=>{let f=!1;return z(d).pipe(tx(this.paramsInheritanceStrategy,this.environmentInjector),ke({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",pt.NoDataFromResolver)}}))}),ke(d=>{let f=new nf(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),Gh(u=>{let d=f=>{let g=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(f.routeConfig).pipe(ke(_=>{f.component=_}),ee(()=>{})));for(let _ of f.children)g.push(...d(_));return g};return Pa(d(u.targetSnapshot.root)).pipe(Nn(null),on(1))}),Gh(()=>this.afterPreactivation()),Nt(()=>{let{currentSnapshot:u,targetSnapshot:d}=s,f=this.createViewTransition?.(this.environmentInjector,u.root,d.root);return f?Ne(f).pipe(ee(()=>s)):z(s)}),ee(u=>{let d=gN(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=Ee(L({},u),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,s}),ke(()=>{this.events.next(new oo)}),_N(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),on(1),ke({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new _r(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),rd(this.transitionAbortSubject.pipe(ke(u=>{throw u}))),bs(()=>{!o&&!c&&this.cancelNavigationTransition(s,"",pt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Rn(u=>{if(c=!0,$w(u))this.events.next(new fn(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),vN(u)?this.events.next(new Ci(u.url,u.navigationBehaviorOptions)):s.resolve(!1);else{let d=new so(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0);try{let f=ln(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(f instanceof co){let{message:g,cancellationCode:_}=Jc(this.urlSerializer,f);this.events.next(new fn(s.id,this.urlSerializer.serialize(s.extractedUrl),g,_)),this.events.next(new Ci(f.redirectTo,f.navigationBehaviorOptions))}else{this.events.next(d);let g=t.errorHandler(u);s.resolve(!!g)}}catch(f){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(f)}}return dt}))}))}cancelNavigationTransition(t,r,i){let s=new fn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function px(n){return n!==Xs}var gx=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>O(mx),providedIn:"root"})}}return n})(),If=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},mx=(()=>{class n extends If{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=lh(n)))(i||n)}})()}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Yw=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:()=>O(yx),providedIn:"root"})}}return n})(),yx=(()=>{class n extends Yw{constructor(){super(...arguments),this.location=O(qs),this.urlSerializer=O(wf),this.options=O(Tf,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=O(Sf),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new pn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Fw(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof io)this.stateMemento=this.createStateMemento();else if(t instanceof Ir)this.rawUrlTree=r.initialUrl;else if(t instanceof Wc){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof oo?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof fn&&(t.code===pt.GuardRejected||t.code===pt.NoDataFromResolver)?this.restoreHistory(r):t instanceof so?this.restoreHistory(r,!0):t instanceof _r&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof pn?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=L(L({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=L(L({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=lh(n)))(i||n)}})()}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Zs=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Zs||{});function vx(n,e){n.events.pipe(mt(t=>t instanceof _r||t instanceof fn||t instanceof so||t instanceof Ir),ee(t=>t instanceof _r||t instanceof Ir?Zs.COMPLETE:(t instanceof fn?t.code===pt.Redirect||t.code===pt.SupersededByNewNavigation:!1)?Zs.REDIRECTING:Zs.FAILED),mt(t=>t!==Zs.REDIRECTING),on(1)).subscribe(()=>{e()})}function _x(n){throw n}var Ix={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},wx={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Zw=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=O(Oc),this.stateManager=O(Yw),this.options=O(Tf,{optional:!0})||{},this.pendingTasks=O(gi),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=O(fx),this.urlSerializer=O(wf),this.location=O(qs),this.urlHandlingStrategy=O(Sf),this._events=new tt,this.errorHandler=this.options.errorHandler||_x,this.navigated=!1,this.routeReuseStrategy=O(gx),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=O(Cf,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!O(Df,{optional:!0}),this.eventsSubscription=new Ce,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof fn&&r.code!==pt.Redirect&&r.code!==pt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof _r)this.navigated=!0;else if(r instanceof Ci){let o=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=L({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||px(i.source)},o);this.scheduleNavigation(c,Xs,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Dx(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Xs,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let u=L({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let c=this.parseUrl(t);this.scheduleNavigation(c,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(bf),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:c,preserveFragment:u}=r,d=u?this.currentUrlTree.fragment:o,f=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":f=L(L({},this.currentUrlTree.queryParams),s);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}f!==null&&(f=this.removeEmptyProps(f));let g;try{let _=i?i.snapshot:this.routerState.snapshot.root;g=Pw(_)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),g=this.currentUrlTree.root}return Ow(g,t,f,d??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=no(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Xs,null,r)}navigate(t,r={skipLocationChange:!1}){return Ex(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=L({},Ix):r===!1?i=L({},wx):i=r,no(t))return mw(this.currentUrlTree,t,i);let s=this.parseUrl(t);return mw(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let c,u,d;o?(c=o.resolve,u=o.reject,d=o.promise):d=new Promise((g,_)=>{c=g,u=_});let f=this.pendingTasks.add();return vx(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:c,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Ex(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new j(4008,!1)}function Dx(n){return!(n instanceof oo)&&!(n instanceof Ci)}var Tx=new H("");function Jw(n,...e){return Vn([{provide:Cf,multi:!0,useValue:n},[],{provide:Si,useFactory:bx,deps:[Zw]},{provide:Rh,multi:!0,useFactory:Cx},e.map(t=>t.\u0275providers)])}function bx(n){return n.routerState.root}function Cx(){let n=O(Pt);return e=>{let t=n.get(gr);if(e!==t.components[0])return;let r=n.get(Zw),i=n.get(Sx);n.get(Ax)===1&&r.initialNavigation(),n.get(Rx,null,J.Optional)?.setUpPreloading(),n.get(Tx,null,J.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Sx=new H("",{factory:()=>new tt}),Ax=new H("",{providedIn:"root",factory:()=>1});var Rx=new H("");var eE=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Nx=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],c=n[t++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},tE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,c=o?n[i+1]:0,u=i+2<n.length,d=u?n[i+2]:0,f=s>>2,g=(s&3)<<4|c>>4,_=(c&15)<<2|d>>6,E=d&63;u||(E=64,o||(_=64)),r.push(t[f],t[g],t[_],t[E])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(eE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Nx(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||c==null||d==null||g==null)throw new Rf;let _=s<<2|c>>4;if(r.push(_),d!==64){let E=c<<4&240|d>>2;if(r.push(E),g!==64){let A=d<<6&192|g;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Rf=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},xx=function(n){let e=eE(n);return tE.encodeByteArray(e,!0)},go=function(n){return xx(n).replace(/\./g,"")},xf=function(n){try{return tE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Mx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Px=()=>Mx().__FIREBASE_DEFAULTS__,Ox=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},kx=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&xf(n[1]);return e&&JSON.parse(e)},ru=()=>{try{return Px()||Ox()||kx()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},nE=n=>{var e,t;return(t=(e=ru())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},rE=n=>{let e=nE(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Mf=()=>{var n;return(n=ru())===null||n===void 0?void 0:n.config},iE=n=>{var e;return(e=ru())===null||e===void 0?void 0:e[`_${n}`]};var nu=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function sE(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[go(JSON.stringify(t)),go(JSON.stringify(o)),""].join(".")}function gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gt())}function Lx(){var n;let e=(n=ru())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function aE(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function cE(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function uE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lE(){return!Lx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Pf(){try{return typeof indexedDB=="object"}catch{return!1}}function dE(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var Fx="FirebaseError",bt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Fx,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gn.prototype.create)}},gn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Vx(s,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new bt(i,c,r)}};function Vx(n,e){return n.replace(Ux,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Ux=/\{\$([^}]+)}/g;function Ni(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(Xw(s)&&Xw(o)){if(!Ni(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function Xw(n){return n!==null&&typeof n=="object"}function Of(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function hE(n,e){let t=new Nf(n,e);return t.subscribe.bind(t)}var Nf=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");jx(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Af),i.error===void 0&&(i.error=Af),i.complete===void 0&&(i.complete=Af);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function jx(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Af(){}var h$=4*60*60*1e3;function Bn(n){return n&&n._delegate?n._delegate:n}var Ct=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var wr="[DEFAULT]";var kf=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new nu;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($x(e))try{this.getOrInitializeService({instanceIdentifier:wr})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=wr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return S(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=wr){return this.instances.has(e)}getOptions(e=wr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);r===c&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Bx(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=wr){return this.component?this.component.multipleInstances?e:wr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Bx(n){return n===wr?void 0:n}function $x(n){return n.instantiationMode==="EAGER"}var iu=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new kf(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var Hx=[],te=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(te||{}),qx={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},zx=te.INFO,Gx={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},Wx=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Gx[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},$n=class{constructor(e){this.name=e,this._logLevel=zx,this._logHandler=Wx,this._userLogHandler=null,Hx.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...e),this._logHandler(this,te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...e),this._logHandler(this,te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,te.INFO,...e),this._logHandler(this,te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,te.WARN,...e),this._logHandler(this,te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...e),this._logHandler(this,te.ERROR,...e)}};var Kx=(n,e)=>e.some(t=>n instanceof t),fE,pE;function Qx(){return fE||(fE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Yx(){return pE||(pE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var gE=new WeakMap,Ff=new WeakMap,mE=new WeakMap,Lf=new WeakMap,Uf=new WeakMap;function Zx(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Qt(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&gE.set(t,n)}).catch(()=>{}),Uf.set(e,n),e}function Jx(n){if(Ff.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Ff.set(n,e)}var Vf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ff.get(n);if(e==="objectStoreNames")return n.objectStoreNames||mE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Qt(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function yE(n){Vf=n(Vf)}function Xx(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(su(this),e,...t);return mE.set(r,e.sort?e.sort():[e]),Qt(r)}:Yx().includes(n)?function(...e){return n.apply(su(this),e),Qt(gE.get(this))}:function(...e){return Qt(n.apply(su(this),e))}}function eM(n){return typeof n=="function"?Xx(n):(n instanceof IDBTransaction&&Jx(n),Kx(n,Qx())?new Proxy(n,Vf):n)}function Qt(n){if(n instanceof IDBRequest)return Zx(n);if(Lf.has(n))return Lf.get(n);let e=eM(n);return e!==n&&(Lf.set(n,e),Uf.set(e,n)),e}var su=n=>Uf.get(n);function _E(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),c=Qt(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Qt(o.result),u.oldVersion,u.newVersion,Qt(o.transaction),u)}),t&&o.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}var tM=["get","getKey","getAll","getAllKeys","count"],nM=["put","add","delete","clear"],jf=new Map;function vE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(jf.get(e))return jf.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=nM.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||tM.includes(t)))return;let s=function(o,...c){return S(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),d=u.store;return r&&(d=d.index(c.shift())),(yield Promise.all([d[t](...c),i&&u.done]))[0]})};return jf.set(e,s),s}yE(n=>Ee(L({},n),{get:(e,t,r)=>vE(e,t)||n.get(e,t,r),has:(e,t)=>!!vE(e,t)||n.has(e,t)}));var $f=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(rM(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function rM(n){let e=n.getComponent();return e?.type==="VERSION"}var Hf="@firebase/app",IE="0.10.13";var mn=new $n("@firebase/app"),iM="@firebase/app-compat",sM="@firebase/analytics-compat",oM="@firebase/analytics",aM="@firebase/app-check-compat",cM="@firebase/app-check",uM="@firebase/auth",lM="@firebase/auth-compat",dM="@firebase/database",hM="@firebase/data-connect",fM="@firebase/database-compat",pM="@firebase/functions",gM="@firebase/functions-compat",mM="@firebase/installations",yM="@firebase/installations-compat",vM="@firebase/messaging",_M="@firebase/messaging-compat",IM="@firebase/performance",wM="@firebase/performance-compat",EM="@firebase/remote-config",DM="@firebase/remote-config-compat",TM="@firebase/storage",bM="@firebase/storage-compat",CM="@firebase/firestore",SM="@firebase/vertexai-preview",AM="@firebase/firestore-compat",RM="firebase",NM="10.14.1";var qf="[DEFAULT]",xM={[Hf]:"fire-core",[iM]:"fire-core-compat",[oM]:"fire-analytics",[sM]:"fire-analytics-compat",[cM]:"fire-app-check",[aM]:"fire-app-check-compat",[uM]:"fire-auth",[lM]:"fire-auth-compat",[dM]:"fire-rtdb",[hM]:"fire-data-connect",[fM]:"fire-rtdb-compat",[pM]:"fire-fn",[gM]:"fire-fn-compat",[mM]:"fire-iid",[yM]:"fire-iid-compat",[vM]:"fire-fcm",[_M]:"fire-fcm-compat",[IM]:"fire-perf",[wM]:"fire-perf-compat",[EM]:"fire-rc",[DM]:"fire-rc-compat",[TM]:"fire-gcs",[bM]:"fire-gcs-compat",[CM]:"fire-fst",[AM]:"fire-fst-compat",[SM]:"fire-vertex","fire-js":"fire-js",[RM]:"fire-js-all"};var mo=new Map,MM=new Map,zf=new Map;function wE(n,e){try{n.container.addComponent(e)}catch(t){mn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function qn(n){let e=n.name;if(zf.has(e))return mn.debug(`There were multiple attempts to register component ${e}.`),!1;zf.set(e,n);for(let t of mo.values())wE(t,n);for(let t of MM.values())wE(t,n);return!0}function Qf(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function xi(n){return n.settings!==void 0}var PM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hn=new gn("app","Firebase",PM);var Gf=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ct("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Hn.create("app-deleted",{appName:this._name})}};var Mi=NM;function Yf(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:qf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Hn.create("bad-app-name",{appName:String(i)});if(t||(t=Mf()),!t)throw Hn.create("no-options");let s=mo.get(i);if(s){if(Ni(t,s.options)&&Ni(r,s.config))return s;throw Hn.create("duplicate-app",{appName:i})}let o=new iu(i);for(let u of zf.values())o.addComponent(u);let c=new Gf(t,r,o);return mo.set(i,c),c}function vo(n=qf){let e=mo.get(n);if(!e&&n===qf&&Mf())return Yf();if(!e)throw Hn.create("no-app",{appName:n});return e}function ou(){return Array.from(mo.values())}function Be(n,e,t){var r;let i=(r=xM[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mn.warn(c.join(" "));return}qn(new Ct(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var OM="firebase-heartbeat-database",kM=1,yo="firebase-heartbeat-store",Bf=null;function bE(){return Bf||(Bf=_E(OM,kM,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(yo)}catch(t){console.warn(t)}}}}).catch(n=>{throw Hn.create("idb-open",{originalErrorMessage:n.message})})),Bf}function LM(n){return S(this,null,function*(){try{let t=(yield bE()).transaction(yo),r=yield t.objectStore(yo).get(CE(n));return yield t.done,r}catch(e){if(e instanceof bt)mn.warn(e.message);else{let t=Hn.create("idb-get",{originalErrorMessage:e?.message});mn.warn(t.message)}}})}function EE(n,e){return S(this,null,function*(){try{let r=(yield bE()).transaction(yo,"readwrite");yield r.objectStore(yo).put(e,CE(n)),yield r.done}catch(t){if(t instanceof bt)mn.warn(t.message);else{let r=Hn.create("idb-set",{originalErrorMessage:t?.message});mn.warn(r.message)}}})}function CE(n){return`${n.name}!${n.options.appId}`}var FM=1024,VM=30*24*60*60*1e3,Wf=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Kf(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return S(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=DE();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let c=new Date(o.date).valueOf();return Date.now()-c<=VM}),this._storage.overwrite(this._heartbeatsCache))}catch(r){mn.warn(r)}})}getHeartbeatsHeader(){return S(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=DE(),{heartbeatsToSend:r,unsentEntries:i}=UM(this._heartbeatsCache.heartbeats),s=go(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return mn.warn(t),""}})}};function DE(){return new Date().toISOString().substring(0,10)}function UM(n,e=FM){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),TE(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),TE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Kf=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return S(this,null,function*(){return Pf()?dE().then(()=>!0).catch(()=>!1):!1})}read(){return S(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield LM(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return S(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return EE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return S(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return EE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function TE(n){return go(JSON.stringify({version:2,heartbeats:n})).length}function jM(n){qn(new Ct("platform-logger",e=>new $f(e),"PRIVATE")),qn(new Ct("heartbeat",e=>new Wf(e),"PRIVATE")),Be(Hf,IE,n),Be(Hf,IE,"esm2017"),Be("fire-js","")}jM("");var BM="firebase",$M="10.14.1";Be(BM,$M,"app");var Oi=new Fn("ANGULARFIRE2_VERSION");function Jf(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Io=(n,e)=>{let t=e?[e]:ou(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},_o=class{constructor(){return Io(HM)}},HM="app-check";function Pi(){}var au=class{zone;delegate;constructor(e,t=Zl){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},Zf=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Pi,{},Pi,Pi)),t.pipe(ke({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},wo=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new au(Zone.current)),this.insideAngular=t.run(()=>new au(Zone.current,Yl)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(W(Ie))};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function cu(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function qM(n){return cu().ngZone.runOutsideAngular(()=>n())}function Er(n){return cu().ngZone.run(()=>n())}function zM(n){return GM(cu())(n)}function GM(n){return function(t){return t=t.lift(new Zf(n.ngZone)),t.pipe(An(n.outsideAngular),Sn(n.insideAngular))}}var WM=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Er(()=>n.apply(void 0,r))},Dr=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=Er(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Pi,{},Pi,Pi))),r[s]=WM(r[s],t));let i=qM(()=>n.apply(this,r));if(!e)if(i instanceof re){let s=cu();return i.pipe(An(s.outsideAngular),Sn(s.insideAngular))}else return Er(()=>i);return i instanceof re?i.pipe(zM):i instanceof Promise?Er(()=>new Promise((s,o)=>i.then(c=>Er(()=>s(c)),c=>Er(()=>o(c))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:Er(()=>i)};var Tr=class{constructor(e){return e}},Eo=class{constructor(){return ou()}};function KM(n){return n&&n.length===1?n[0]:new Tr(vo())}var Xf=new H("angularfire2._apps"),QM={provide:Tr,useFactory:KM,deps:[[new Ot,Xf]]},YM={provide:Eo,deps:[[new Ot,Xf]]};function ZM(n){return(e,t)=>{let r=t.get(Un);Be("angularfire",Oi.full,"core"),Be("angularfire",Oi.full,"app"),Be("angular",LI.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Tr(i)}}function SE(n,...e){return Vn([QM,YM,{provide:Xf,useFactory:ZM(n),multi:!0,deps:[Ie,Pt,wo,...e]}])}var AE=Dr(Yf,!0);function LE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var FE=LE,VE=new gn("auth","Firebase",LE());var hu=new $n("@firebase/auth");function XM(n,...e){hu.logLevel<=te.WARN&&hu.warn(`Auth (${Mi}): ${n}`,...e)}function lu(n,...e){hu.logLevel<=te.ERROR&&hu.error(`Auth (${Mi}): ${n}`,...e)}function RE(n,...e){throw dp(n,...e)}function lp(n,...e){return dp(n,...e)}function UE(n,e,t){let r=Object.assign(Object.assign({},FE()),{[e]:t});return new gn("auth","Firebase",r).create(e,{appName:n.name})}function du(n){return UE(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dp(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return VE.create(n,...e)}function fe(n,e,...t){if(!n)throw dp(e,...t)}function Do(n){let e="INTERNAL ASSERTION FAILED: "+n;throw lu(e),new Error(e)}function fu(n,e){n||Do(e)}function eP(){return NE()==="http:"||NE()==="https:"}function NE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function tP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eP()||cE()||"connection"in navigator)?navigator.onLine:!0}function nP(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Cr=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,fu(t>e,"Short delay should be less than long delay!"),this.isMobile=oE()||uE()}get(){return tP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function rP(n,e){fu(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var pu=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Do("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Do("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Do("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var iP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var sP=new Cr(3e4,6e4);function jE(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function vu(s,o,c,u){return S(this,arguments,function*(n,e,t,r,i={}){return BE(n,i,()=>S(this,null,function*(){let d={},f={};r&&(e==="GET"?f=r:d={body:JSON.stringify(r)});let g=Of(Object.assign({key:n.config.apiKey},f)).slice(1),_=yield n._getAdditionalHeaders();_["Content-Type"]="application/json",n.languageCode&&(_["X-Firebase-Locale"]=n.languageCode);let E=Object.assign({method:e,headers:_},d);return aE()||(E.referrerPolicy="no-referrer"),pu.fetch()($E(n,n.config.apiHost,t,g),E)}))})}function BE(n,e,t){return S(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},iP),e);try{let i=new np(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw uu(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw uu(n,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw uu(n,"email-already-in-use",o);if(u==="USER_DISABLED")throw uu(n,"user-disabled",o);let f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw UE(n,f,d);RE(n,f)}}catch(i){if(i instanceof bt)throw i;RE(n,"network-request-failed",{message:String(i)})}})}function $E(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?rP(n.config,i):`${n.config.apiScheme}://${i}`}var np=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(lp(this.auth,"network-request-failed")),sP.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function uu(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=lp(n,e,r);return i.customData._tokenResponse=t,i}function oP(n,e){return S(this,null,function*(){return vu(n,"POST","/v1/accounts:delete",e)})}function HE(n,e){return S(this,null,function*(){return vu(n,"POST","/v1/accounts:lookup",e)})}function To(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function hp(n,e=!1){return S(this,null,function*(){let t=Bn(n),r=yield t.getIdToken(e),i=qE(r);fe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:To(ep(i.auth_time)),issuedAtTime:To(ep(i.iat)),expirationTime:To(ep(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function ep(n){return Number(n)*1e3}function qE(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return lu("JWT malformed, contained fewer than 3 sections"),null;try{let i=xf(t);return i?JSON.parse(i):(lu("Failed to decode base64 JWT payload"),null)}catch(i){return lu("Caught error parsing JWT payload as JSON",i?.toString()),null}}function xE(n){let e=qE(n);return fe(e,"internal-error"),fe(typeof e.exp<"u","internal-error"),fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function rp(n,e,t=!1){return S(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof bt&&aP(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function aP({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var ip=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>S(this,null,function*(){yield this.iteration()}),t)}iteration(){return S(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Co=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=To(this.lastLoginAt),this.creationTime=To(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function gu(n){return S(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield rp(n,HE(t,{idToken:r}));fe(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?zE(s.providerUserInfo):[],c=cP(n.providerData,o),u=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!c?.length,f=u?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Co(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,g)})}function fp(n){return S(this,null,function*(){let e=Bn(n);yield gu(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function cP(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function zE(n){return n.map(e=>{var{providerId:t}=e,r=Jl(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function uP(n,e){return S(this,null,function*(){let t=yield BE(n,{},()=>S(this,null,function*(){let r=Of({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=$E(n,i,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",pu.fetch()(o,{method:"POST",headers:c,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function lP(n,e){return S(this,null,function*(){return vu(n,"POST","/v2/accounts:revokeToken",jE(n,e))})}var bo=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){fe(e.idToken,"internal-error"),fe(typeof e.idToken<"u","internal-error"),fe(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):xE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){fe(e.length!==0,"internal-error");let t=xE(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return S(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return S(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield uP(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(fe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(fe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(fe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Do("not implemented")}};function zn(n,e){fe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var So=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Jl(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ip(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Co(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return S(this,null,function*(){let t=yield rp(this,this.stsTokenManager.getToken(this.auth,e));return fe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return hp(this,e)}reload(){return fp(this)}_assign(e){this!==e&&(fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return S(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield gu(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return S(this,null,function*(){if(xi(this.auth.app))return Promise.reject(du(this.auth));let e=yield this.getIdToken();return yield rp(this,oP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,c,u,d,f;let g=(r=t.displayName)!==null&&r!==void 0?r:void 0,_=(i=t.email)!==null&&i!==void 0?i:void 0,E=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,A=(o=t.photoURL)!==null&&o!==void 0?o:void 0,x=(c=t.tenantId)!==null&&c!==void 0?c:void 0,R=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,F=(d=t.createdAt)!==null&&d!==void 0?d:void 0,Y=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:X,emailVerified:ge,isAnonymous:Re,providerData:Z,stsTokenManager:w}=t;fe(X&&w,e,"internal-error");let m=bo.fromJSON(this.name,w);fe(typeof X=="string",e,"internal-error"),zn(g,e.name),zn(_,e.name),fe(typeof ge=="boolean",e,"internal-error"),fe(typeof Re=="boolean",e,"internal-error"),zn(E,e.name),zn(A,e.name),zn(x,e.name),zn(R,e.name),zn(F,e.name),zn(Y,e.name);let y=new n({uid:X,auth:e,email:_,emailVerified:ge,displayName:g,isAnonymous:Re,photoURL:A,phoneNumber:E,tenantId:x,stsTokenManager:m,createdAt:F,lastLoginAt:Y});return Z&&Array.isArray(Z)&&(y.providerData=Z.map(I=>Object.assign({},I))),R&&(y._redirectEventId=R),y}static _fromIdTokenResponse(e,t,r=!1){return S(this,null,function*(){let i=new bo;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield gu(s),s})}static _fromGetAccountInfoResponse(e,t,r){return S(this,null,function*(){let i=t.users[0];fe(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?zE(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,c=new bo;c.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Co(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,d),u})}};var ME=new Map;function br(n){fu(n instanceof Function,"Expected a class definition");let e=ME.get(n);return e?(fu(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,ME.set(n,e),e)}var dP=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return S(this,null,function*(){return!0})}_set(t,r){return S(this,null,function*(){this.storage[t]=r})}_get(t){return S(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return S(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),sp=dP;function tp(n,e,t){return`firebase:${n}:${e}:${t}`}var mu=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=tp(this.userKey,i.apiKey,s),this.fullPersistenceKey=tp("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return S(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?So._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return S(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return S(this,null,function*(){if(!t.length)return new n(br(sp),e,r);let i=(yield Promise.all(t.map(d=>S(this,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),s=i[0]||br(sp),o=tp(r,e.config.apiKey,e.name),c=null;for(let d of t)try{let f=yield d._get(o);if(f){let g=So._fromJSON(e,f);d!==s&&(c=g),s=d;break}}catch{}let u=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new n(s,e,r):(s=u[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(t.map(d=>S(this,null,function*(){if(d!==s)try{yield d._remove(o)}catch{}}))),new n(s,e,r))})}};function PE(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(gP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(yP(e))return"Blackberry";if(vP(e))return"Webos";if(fP(e))return"Safari";if((e.includes("chrome/")||pP(e))&&!e.includes("edge/"))return"Chrome";if(mP(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function hP(n=gt()){return/firefox\//i.test(n)}function fP(n=gt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pP(n=gt()){return/crios\//i.test(n)}function gP(n=gt()){return/iemobile/i.test(n)}function mP(n=gt()){return/android/i.test(n)}function yP(n=gt()){return/blackberry/i.test(n)}function vP(n=gt()){return/webos/i.test(n)}function GE(n,e=[]){let t;switch(n){case"Browser":t=PE(gt());break;case"Worker":t=`${PE(gt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Mi}/${r}`}var op=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,c)=>{try{let u=e(s);o(u)}catch(u){c(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return S(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function _P(t){return S(this,arguments,function*(n,e={}){return vu(n,"GET","/v2/passwordPolicy",jE(n,e))})}var IP=6,ap=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:IP,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var cp=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yu(this),this.idTokenSubscription=new yu(this),this.beforeStateQueue=new op(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=VE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=br(t)),this._initializationPromise=this.queue(()=>S(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield mu.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return S(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return S(this,null,function*(){try{let t=yield HE(this,{idToken:e}),r=yield So._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return S(this,null,function*(){var t;if(xi(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===c)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return fe(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return S(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return S(this,null,function*(){try{yield gu(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=nP()}_delete(){return S(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return S(this,null,function*(){if(xi(this.app))return Promise.reject(du(this));let t=e?Bn(e):null;return t&&fe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return S(this,null,function*(){if(!this._deleted)return e&&fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>S(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return S(this,null,function*(){return xi(this.app)?Promise.reject(du(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return xi(this.app)?Promise.reject(du(this)):this.queue(()=>S(this,null,function*(){yield this.assertedPersistence.setPersistence(br(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return S(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return S(this,null,function*(){let e=yield _P(this),t=new ap(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new gn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return S(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield lP(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return S(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return S(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&br(e)||this._popupRedirectResolver;fe(t,this,"argument-error"),this.redirectPersistenceManager=yield mu.create(this,[br(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return S(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>S(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return S(this,null,function*(){if(e===this.currentUser)return this.queue(()=>S(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(t);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return S(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=GE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return S(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return S(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&XM(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function wP(n){return Bn(n)}var yu=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=hE(t=>this.observer=t)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var EP={loadJS(){return S(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function DP(n){EP=n}function TP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function bP(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(br);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}var uH=TP("rcb"),lH=new Cr(3e4,6e4);var dH=new Cr(2e3,1e4);var hH=10*60*1e3;var fH=new Cr(3e4,6e4);var pH=new Cr(5e3,15e3);var gH=encodeURIComponent("fac");var OE="@firebase/auth",kE="1.7.9";var up=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return S(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function CP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function SP(n){qn(new Ct("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;fe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:GE(n)},d=new cp(r,i,s,u);return bP(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),qn(new Ct("auth-internal",e=>{let t=wP(e.getProvider("auth").getImmediate());return(r=>new up(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Be(OE,kE,CP(n)),Be(OE,kE,"esm2017")}var AP=5*60,mH=iE("authIdTokenMaxAge")||AP;function RP(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}DP({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=lp("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",RP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});SP("Browser");var AO="auth";var _u=class{constructor(){return Io(AO)}};var WE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},KE={};var Gn,pp;(function(){var n;function e(w,m){function y(){}y.prototype=m.prototype,w.D=m.prototype,w.prototype=new y,w.prototype.constructor=w,w.C=function(I,D,b){for(var v=Array(arguments.length-2),tn=2;tn<arguments.length;tn++)v[tn-2]=arguments[tn];return m.prototype[D].apply(I,v)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,m,y){y||(y=0);var I=Array(16);if(typeof m=="string")for(var D=0;16>D;++D)I[D]=m.charCodeAt(y++)|m.charCodeAt(y++)<<8|m.charCodeAt(y++)<<16|m.charCodeAt(y++)<<24;else for(D=0;16>D;++D)I[D]=m[y++]|m[y++]<<8|m[y++]<<16|m[y++]<<24;m=w.g[0],y=w.g[1],D=w.g[2];var b=w.g[3],v=m+(b^y&(D^b))+I[0]+3614090360&4294967295;m=y+(v<<7&4294967295|v>>>25),v=b+(D^m&(y^D))+I[1]+3905402710&4294967295,b=m+(v<<12&4294967295|v>>>20),v=D+(y^b&(m^y))+I[2]+606105819&4294967295,D=b+(v<<17&4294967295|v>>>15),v=y+(m^D&(b^m))+I[3]+3250441966&4294967295,y=D+(v<<22&4294967295|v>>>10),v=m+(b^y&(D^b))+I[4]+4118548399&4294967295,m=y+(v<<7&4294967295|v>>>25),v=b+(D^m&(y^D))+I[5]+1200080426&4294967295,b=m+(v<<12&4294967295|v>>>20),v=D+(y^b&(m^y))+I[6]+2821735955&4294967295,D=b+(v<<17&4294967295|v>>>15),v=y+(m^D&(b^m))+I[7]+4249261313&4294967295,y=D+(v<<22&4294967295|v>>>10),v=m+(b^y&(D^b))+I[8]+1770035416&4294967295,m=y+(v<<7&4294967295|v>>>25),v=b+(D^m&(y^D))+I[9]+2336552879&4294967295,b=m+(v<<12&4294967295|v>>>20),v=D+(y^b&(m^y))+I[10]+4294925233&4294967295,D=b+(v<<17&4294967295|v>>>15),v=y+(m^D&(b^m))+I[11]+2304563134&4294967295,y=D+(v<<22&4294967295|v>>>10),v=m+(b^y&(D^b))+I[12]+1804603682&4294967295,m=y+(v<<7&4294967295|v>>>25),v=b+(D^m&(y^D))+I[13]+4254626195&4294967295,b=m+(v<<12&4294967295|v>>>20),v=D+(y^b&(m^y))+I[14]+2792965006&4294967295,D=b+(v<<17&4294967295|v>>>15),v=y+(m^D&(b^m))+I[15]+1236535329&4294967295,y=D+(v<<22&4294967295|v>>>10),v=m+(D^b&(y^D))+I[1]+4129170786&4294967295,m=y+(v<<5&4294967295|v>>>27),v=b+(y^D&(m^y))+I[6]+3225465664&4294967295,b=m+(v<<9&4294967295|v>>>23),v=D+(m^y&(b^m))+I[11]+643717713&4294967295,D=b+(v<<14&4294967295|v>>>18),v=y+(b^m&(D^b))+I[0]+3921069994&4294967295,y=D+(v<<20&4294967295|v>>>12),v=m+(D^b&(y^D))+I[5]+3593408605&4294967295,m=y+(v<<5&4294967295|v>>>27),v=b+(y^D&(m^y))+I[10]+38016083&4294967295,b=m+(v<<9&4294967295|v>>>23),v=D+(m^y&(b^m))+I[15]+3634488961&4294967295,D=b+(v<<14&4294967295|v>>>18),v=y+(b^m&(D^b))+I[4]+3889429448&4294967295,y=D+(v<<20&4294967295|v>>>12),v=m+(D^b&(y^D))+I[9]+568446438&4294967295,m=y+(v<<5&4294967295|v>>>27),v=b+(y^D&(m^y))+I[14]+3275163606&4294967295,b=m+(v<<9&4294967295|v>>>23),v=D+(m^y&(b^m))+I[3]+4107603335&4294967295,D=b+(v<<14&4294967295|v>>>18),v=y+(b^m&(D^b))+I[8]+1163531501&4294967295,y=D+(v<<20&4294967295|v>>>12),v=m+(D^b&(y^D))+I[13]+2850285829&4294967295,m=y+(v<<5&4294967295|v>>>27),v=b+(y^D&(m^y))+I[2]+4243563512&4294967295,b=m+(v<<9&4294967295|v>>>23),v=D+(m^y&(b^m))+I[7]+1735328473&4294967295,D=b+(v<<14&4294967295|v>>>18),v=y+(b^m&(D^b))+I[12]+2368359562&4294967295,y=D+(v<<20&4294967295|v>>>12),v=m+(y^D^b)+I[5]+4294588738&4294967295,m=y+(v<<4&4294967295|v>>>28),v=b+(m^y^D)+I[8]+2272392833&4294967295,b=m+(v<<11&4294967295|v>>>21),v=D+(b^m^y)+I[11]+1839030562&4294967295,D=b+(v<<16&4294967295|v>>>16),v=y+(D^b^m)+I[14]+4259657740&4294967295,y=D+(v<<23&4294967295|v>>>9),v=m+(y^D^b)+I[1]+2763975236&4294967295,m=y+(v<<4&4294967295|v>>>28),v=b+(m^y^D)+I[4]+1272893353&4294967295,b=m+(v<<11&4294967295|v>>>21),v=D+(b^m^y)+I[7]+4139469664&4294967295,D=b+(v<<16&4294967295|v>>>16),v=y+(D^b^m)+I[10]+3200236656&4294967295,y=D+(v<<23&4294967295|v>>>9),v=m+(y^D^b)+I[13]+681279174&4294967295,m=y+(v<<4&4294967295|v>>>28),v=b+(m^y^D)+I[0]+3936430074&4294967295,b=m+(v<<11&4294967295|v>>>21),v=D+(b^m^y)+I[3]+3572445317&4294967295,D=b+(v<<16&4294967295|v>>>16),v=y+(D^b^m)+I[6]+76029189&4294967295,y=D+(v<<23&4294967295|v>>>9),v=m+(y^D^b)+I[9]+3654602809&4294967295,m=y+(v<<4&4294967295|v>>>28),v=b+(m^y^D)+I[12]+3873151461&4294967295,b=m+(v<<11&4294967295|v>>>21),v=D+(b^m^y)+I[15]+530742520&4294967295,D=b+(v<<16&4294967295|v>>>16),v=y+(D^b^m)+I[2]+3299628645&4294967295,y=D+(v<<23&4294967295|v>>>9),v=m+(D^(y|~b))+I[0]+4096336452&4294967295,m=y+(v<<6&4294967295|v>>>26),v=b+(y^(m|~D))+I[7]+1126891415&4294967295,b=m+(v<<10&4294967295|v>>>22),v=D+(m^(b|~y))+I[14]+2878612391&4294967295,D=b+(v<<15&4294967295|v>>>17),v=y+(b^(D|~m))+I[5]+4237533241&4294967295,y=D+(v<<21&4294967295|v>>>11),v=m+(D^(y|~b))+I[12]+1700485571&4294967295,m=y+(v<<6&4294967295|v>>>26),v=b+(y^(m|~D))+I[3]+2399980690&4294967295,b=m+(v<<10&4294967295|v>>>22),v=D+(m^(b|~y))+I[10]+4293915773&4294967295,D=b+(v<<15&4294967295|v>>>17),v=y+(b^(D|~m))+I[1]+2240044497&4294967295,y=D+(v<<21&4294967295|v>>>11),v=m+(D^(y|~b))+I[8]+1873313359&4294967295,m=y+(v<<6&4294967295|v>>>26),v=b+(y^(m|~D))+I[15]+4264355552&4294967295,b=m+(v<<10&4294967295|v>>>22),v=D+(m^(b|~y))+I[6]+2734768916&4294967295,D=b+(v<<15&4294967295|v>>>17),v=y+(b^(D|~m))+I[13]+1309151649&4294967295,y=D+(v<<21&4294967295|v>>>11),v=m+(D^(y|~b))+I[4]+4149444226&4294967295,m=y+(v<<6&4294967295|v>>>26),v=b+(y^(m|~D))+I[11]+3174756917&4294967295,b=m+(v<<10&4294967295|v>>>22),v=D+(m^(b|~y))+I[2]+718787259&4294967295,D=b+(v<<15&4294967295|v>>>17),v=y+(b^(D|~m))+I[9]+3951481745&4294967295,w.g[0]=w.g[0]+m&4294967295,w.g[1]=w.g[1]+(D+(v<<21&4294967295|v>>>11))&4294967295,w.g[2]=w.g[2]+D&4294967295,w.g[3]=w.g[3]+b&4294967295}r.prototype.u=function(w,m){m===void 0&&(m=w.length);for(var y=m-this.blockSize,I=this.B,D=this.h,b=0;b<m;){if(D==0)for(;b<=y;)i(this,w,b),b+=this.blockSize;if(typeof w=="string"){for(;b<m;)if(I[D++]=w.charCodeAt(b++),D==this.blockSize){i(this,I),D=0;break}}else for(;b<m;)if(I[D++]=w[b++],D==this.blockSize){i(this,I),D=0;break}}this.h=D,this.o+=m},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var m=1;m<w.length-8;++m)w[m]=0;var y=8*this.o;for(m=w.length-8;m<w.length;++m)w[m]=y&255,y/=256;for(this.u(w),w=Array(16),m=y=0;4>m;++m)for(var I=0;32>I;I+=8)w[y++]=this.g[m]>>>I&255;return w};function s(w,m){var y=c;return Object.prototype.hasOwnProperty.call(y,w)?y[w]:y[w]=m(w)}function o(w,m){this.h=m;for(var y=[],I=!0,D=w.length-1;0<=D;D--){var b=w[D]|0;I&&b==m||(y[D]=b,I=!1)}this.g=y}var c={};function u(w){return-128<=w&&128>w?s(w,function(m){return new o([m|0],0>m?-1:0)}):new o([w|0],0>w?-1:0)}function d(w){if(isNaN(w)||!isFinite(w))return g;if(0>w)return R(d(-w));for(var m=[],y=1,I=0;w>=y;I++)m[I]=w/y|0,y*=4294967296;return new o(m,0)}function f(w,m){if(w.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(w.charAt(0)=="-")return R(f(w.substring(1),m));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=d(Math.pow(m,8)),I=g,D=0;D<w.length;D+=8){var b=Math.min(8,w.length-D),v=parseInt(w.substring(D,D+b),m);8>b?(b=d(Math.pow(m,b)),I=I.j(b).add(d(v))):(I=I.j(y),I=I.add(d(v)))}return I}var g=u(0),_=u(1),E=u(16777216);n=o.prototype,n.m=function(){if(x(this))return-R(this).m();for(var w=0,m=1,y=0;y<this.g.length;y++){var I=this.i(y);w+=(0<=I?I:4294967296+I)*m,m*=4294967296}return w},n.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(A(this))return"0";if(x(this))return"-"+R(this).toString(w);for(var m=d(Math.pow(w,6)),y=this,I="";;){var D=ge(y,m).g;y=F(y,D.j(m));var b=((0<y.g.length?y.g[0]:y.h)>>>0).toString(w);if(y=D,A(y))return b+I;for(;6>b.length;)b="0"+b;I=b+I}},n.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function A(w){if(w.h!=0)return!1;for(var m=0;m<w.g.length;m++)if(w.g[m]!=0)return!1;return!0}function x(w){return w.h==-1}n.l=function(w){return w=F(this,w),x(w)?-1:A(w)?0:1};function R(w){for(var m=w.g.length,y=[],I=0;I<m;I++)y[I]=~w.g[I];return new o(y,~w.h).add(_)}n.abs=function(){return x(this)?R(this):this},n.add=function(w){for(var m=Math.max(this.g.length,w.g.length),y=[],I=0,D=0;D<=m;D++){var b=I+(this.i(D)&65535)+(w.i(D)&65535),v=(b>>>16)+(this.i(D)>>>16)+(w.i(D)>>>16);I=v>>>16,b&=65535,v&=65535,y[D]=v<<16|b}return new o(y,y[y.length-1]&-2147483648?-1:0)};function F(w,m){return w.add(R(m))}n.j=function(w){if(A(this)||A(w))return g;if(x(this))return x(w)?R(this).j(R(w)):R(R(this).j(w));if(x(w))return R(this.j(R(w)));if(0>this.l(E)&&0>w.l(E))return d(this.m()*w.m());for(var m=this.g.length+w.g.length,y=[],I=0;I<2*m;I++)y[I]=0;for(I=0;I<this.g.length;I++)for(var D=0;D<w.g.length;D++){var b=this.i(I)>>>16,v=this.i(I)&65535,tn=w.i(D)>>>16,is=w.i(D)&65535;y[2*I+2*D]+=v*is,Y(y,2*I+2*D),y[2*I+2*D+1]+=b*is,Y(y,2*I+2*D+1),y[2*I+2*D+1]+=v*tn,Y(y,2*I+2*D+1),y[2*I+2*D+2]+=b*tn,Y(y,2*I+2*D+2)}for(I=0;I<m;I++)y[I]=y[2*I+1]<<16|y[2*I];for(I=m;I<2*m;I++)y[I]=0;return new o(y,0)};function Y(w,m){for(;(w[m]&65535)!=w[m];)w[m+1]+=w[m]>>>16,w[m]&=65535,m++}function X(w,m){this.g=w,this.h=m}function ge(w,m){if(A(m))throw Error("division by zero");if(A(w))return new X(g,g);if(x(w))return m=ge(R(w),m),new X(R(m.g),R(m.h));if(x(m))return m=ge(w,R(m)),new X(R(m.g),m.h);if(30<w.g.length){if(x(w)||x(m))throw Error("slowDivide_ only works with positive integers.");for(var y=_,I=m;0>=I.l(w);)y=Re(y),I=Re(I);var D=Z(y,1),b=Z(I,1);for(I=Z(I,2),y=Z(y,2);!A(I);){var v=b.add(I);0>=v.l(w)&&(D=D.add(y),b=v),I=Z(I,1),y=Z(y,1)}return m=F(w,D.j(m)),new X(D,m)}for(D=g;0<=w.l(m);){for(y=Math.max(1,Math.floor(w.m()/m.m())),I=Math.ceil(Math.log(y)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),b=d(y),v=b.j(m);x(v)||0<v.l(w);)y-=I,b=d(y),v=b.j(m);A(b)&&(b=_),D=D.add(b),w=F(w,v)}return new X(D,w)}n.A=function(w){return ge(this,w).h},n.and=function(w){for(var m=Math.max(this.g.length,w.g.length),y=[],I=0;I<m;I++)y[I]=this.i(I)&w.i(I);return new o(y,this.h&w.h)},n.or=function(w){for(var m=Math.max(this.g.length,w.g.length),y=[],I=0;I<m;I++)y[I]=this.i(I)|w.i(I);return new o(y,this.h|w.h)},n.xor=function(w){for(var m=Math.max(this.g.length,w.g.length),y=[],I=0;I<m;I++)y[I]=this.i(I)^w.i(I);return new o(y,this.h^w.h)};function Re(w){for(var m=w.g.length+1,y=[],I=0;I<m;I++)y[I]=w.i(I)<<1|w.i(I-1)>>>31;return new o(y,w.h)}function Z(w,m){var y=m>>5;m%=32;for(var I=w.g.length-y,D=[],b=0;b<I;b++)D[b]=0<m?w.i(b+y)>>>m|w.i(b+y+1)<<32-m:w.i(b+y);return new o(D,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,pp=KE.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Gn=KE.Integer=o}).apply(typeof WE<"u"?WE:typeof self<"u"?self:typeof window<"u"?window:{});var Iu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},yn={};var gp,RO,ki,mp,Ao,wu,yp,vp,_p;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,l,h){return a==Array.prototype||a==Object.prototype||(a[l]=h.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Iu=="object"&&Iu];for(var l=0;l<a.length;++l){var h=a[l];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=t(this);function i(a,l){if(l)e:{var h=r;a=a.split(".");for(var p=0;p<a.length-1;p++){var T=a[p];if(!(T in h))break e;h=h[T]}a=a[a.length-1],p=h[a],l=l(p),l!=p&&l!=null&&e(h,a,{configurable:!0,writable:!0,value:l})}}function s(a,l){a instanceof String&&(a+="");var h=0,p=!1,T={next:function(){if(!p&&h<a.length){var C=h++;return{value:l(C,a[C]),done:!1}}return p=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(a){return a||function(){return s(this,function(l,h){return h})}});var o=o||{},c=this||self;function u(a){var l=typeof a;return l=l!="object"?l:a?Array.isArray(a)?"array":l:"null",l=="array"||l=="object"&&typeof a.length=="number"}function d(a){var l=typeof a;return l=="object"&&a!=null||l=="function"}function f(a,l,h){return a.call.apply(a.bind,arguments)}function g(a,l,h){if(!a)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,p),a.apply(l,T)}}return function(){return a.apply(l,arguments)}}function _(a,l,h){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:g,_.apply(null,arguments)}function E(a,l){var h=Array.prototype.slice.call(arguments,1);return function(){var p=h.slice();return p.push.apply(p,arguments),a.apply(this,p)}}function A(a,l){function h(){}h.prototype=l.prototype,a.aa=l.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(p,T,C){for(var M=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)M[ve-2]=arguments[ve];return l.prototype[T].apply(p,M)}}function x(a){let l=a.length;if(0<l){let h=Array(l);for(let p=0;p<l;p++)h[p]=a[p];return h}return[]}function R(a,l){for(let h=1;h<arguments.length;h++){let p=arguments[h];if(u(p)){let T=a.length||0,C=p.length||0;a.length=T+C;for(let M=0;M<C;M++)a[T+M]=p[M]}else a.push(p)}}class F{constructor(l,h){this.i=l,this.j=h,this.h=0,this.g=null}get(){let l;return 0<this.h?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}function Y(a){return/^[\s\xa0]*$/.test(a)}function X(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function ge(a){return ge[" "](a),a}ge[" "]=function(){};var Re=X().indexOf("Gecko")!=-1&&!(X().toLowerCase().indexOf("webkit")!=-1&&X().indexOf("Edge")==-1)&&!(X().indexOf("Trident")!=-1||X().indexOf("MSIE")!=-1)&&X().indexOf("Edge")==-1;function Z(a,l,h){for(let p in a)l.call(h,a[p],p,a)}function w(a,l){for(let h in a)l.call(void 0,a[h],h,a)}function m(a){let l={};for(let h in a)l[h]=a[h];return l}let y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(a,l){let h,p;for(let T=1;T<arguments.length;T++){p=arguments[T];for(h in p)a[h]=p[h];for(let C=0;C<y.length;C++)h=y[C],Object.prototype.hasOwnProperty.call(p,h)&&(a[h]=p[h])}}function D(a){var l=1;a=a.split(":");let h=[];for(;0<l&&a.length;)h.push(a.shift()),l--;return a.length&&h.push(a.join(":")),h}function b(a){c.setTimeout(()=>{throw a},0)}function v(){var a=al;let l=null;return a.g&&(l=a.g,a.g=a.g.next,a.g||(a.h=null),l.next=null),l}class tn{constructor(){this.h=this.g=null}add(l,h){let p=is.get();p.set(l,h),this.h?this.h.next=p:this.g=p,this.h=p}}var is=new F(()=>new FT,a=>a.reset());class FT{constructor(){this.next=this.g=this.h=null}set(l,h){this.h=l,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let ss,os=!1,al=new tn,gm=()=>{let a=c.Promise.resolve(void 0);ss=()=>{a.then(VT)}};var VT=()=>{for(var a;a=v();){try{a.h.call(a.g)}catch(h){b(h)}var l=is;l.j(a),100>l.h&&(l.h++,a.next=l.g,l.g=a)}os=!1};function En(){this.s=this.s,this.C=this.C}En.prototype.s=!1,En.prototype.ma=function(){this.s||(this.s=!0,this.N())},En.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ge(a,l){this.type=a,this.g=this.target=l,this.defaultPrevented=!1}Ge.prototype.h=function(){this.defaultPrevented=!0};var UT=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,l=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};c.addEventListener("test",h,l),c.removeEventListener("test",h,l)}catch{}return a}();function as(a,l){if(Ge.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,p=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=l,l=a.relatedTarget){if(Re){e:{try{ge(l.nodeName);var T=!0;break e}catch{}T=!1}T||(l=null)}}else h=="mouseover"?l=a.fromElement:h=="mouseout"&&(l=a.toElement);this.relatedTarget=l,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:jT[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&as.aa.h.call(this)}}A(as,Ge);var jT={2:"touch",3:"pen",4:"mouse"};as.prototype.h=function(){as.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var cs="closure_listenable_"+(1e6*Math.random()|0),BT=0;function $T(a,l,h,p,T){this.listener=a,this.proxy=null,this.src=l,this.type=h,this.capture=!!p,this.ha=T,this.key=++BT,this.da=this.fa=!1}function Zo(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Jo(a){this.src=a,this.g={},this.h=0}Jo.prototype.add=function(a,l,h,p,T){var C=a.toString();a=this.g[C],a||(a=this.g[C]=[],this.h++);var M=ul(a,l,p,T);return-1<M?(l=a[M],h||(l.fa=!1)):(l=new $T(l,this.src,C,!!p,T),l.fa=h,a.push(l)),l};function cl(a,l){var h=l.type;if(h in a.g){var p=a.g[h],T=Array.prototype.indexOf.call(p,l,void 0),C;(C=0<=T)&&Array.prototype.splice.call(p,T,1),C&&(Zo(l),a.g[h].length==0&&(delete a.g[h],a.h--))}}function ul(a,l,h,p){for(var T=0;T<a.length;++T){var C=a[T];if(!C.da&&C.listener==l&&C.capture==!!h&&C.ha==p)return T}return-1}var ll="closure_lm_"+(1e6*Math.random()|0),dl={};function mm(a,l,h,p,T){if(p&&p.once)return vm(a,l,h,p,T);if(Array.isArray(l)){for(var C=0;C<l.length;C++)mm(a,l[C],h,p,T);return null}return h=gl(h),a&&a[cs]?a.K(l,h,d(p)?!!p.capture:!!p,T):ym(a,l,h,!1,p,T)}function ym(a,l,h,p,T,C){if(!l)throw Error("Invalid event type");var M=d(T)?!!T.capture:!!T,ve=fl(a);if(ve||(a[ll]=ve=new Jo(a)),h=ve.add(l,h,p,M,C),h.proxy)return h;if(p=HT(),h.proxy=p,p.src=a,p.listener=h,a.addEventListener)UT||(T=M),T===void 0&&(T=!1),a.addEventListener(l.toString(),p,T);else if(a.attachEvent)a.attachEvent(Im(l.toString()),p);else if(a.addListener&&a.removeListener)a.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return h}function HT(){function a(h){return l.call(a.src,a.listener,h)}let l=qT;return a}function vm(a,l,h,p,T){if(Array.isArray(l)){for(var C=0;C<l.length;C++)vm(a,l[C],h,p,T);return null}return h=gl(h),a&&a[cs]?a.L(l,h,d(p)?!!p.capture:!!p,T):ym(a,l,h,!0,p,T)}function _m(a,l,h,p,T){if(Array.isArray(l))for(var C=0;C<l.length;C++)_m(a,l[C],h,p,T);else p=d(p)?!!p.capture:!!p,h=gl(h),a&&a[cs]?(a=a.i,l=String(l).toString(),l in a.g&&(C=a.g[l],h=ul(C,h,p,T),-1<h&&(Zo(C[h]),Array.prototype.splice.call(C,h,1),C.length==0&&(delete a.g[l],a.h--)))):a&&(a=fl(a))&&(l=a.g[l.toString()],a=-1,l&&(a=ul(l,h,p,T)),(h=-1<a?l[a]:null)&&hl(h))}function hl(a){if(typeof a!="number"&&a&&!a.da){var l=a.src;if(l&&l[cs])cl(l.i,a);else{var h=a.type,p=a.proxy;l.removeEventListener?l.removeEventListener(h,p,a.capture):l.detachEvent?l.detachEvent(Im(h),p):l.addListener&&l.removeListener&&l.removeListener(p),(h=fl(l))?(cl(h,a),h.h==0&&(h.src=null,l[ll]=null)):Zo(a)}}}function Im(a){return a in dl?dl[a]:dl[a]="on"+a}function qT(a,l){if(a.da)a=!0;else{l=new as(l,this);var h=a.listener,p=a.ha||a.src;a.fa&&hl(a),a=h.call(p,l)}return a}function fl(a){return a=a[ll],a instanceof Jo?a:null}var pl="__closure_events_fn_"+(1e9*Math.random()>>>0);function gl(a){return typeof a=="function"?a:(a[pl]||(a[pl]=function(l){return a.handleEvent(l)}),a[pl])}function We(){En.call(this),this.i=new Jo(this),this.M=this,this.F=null}A(We,En),We.prototype[cs]=!0,We.prototype.removeEventListener=function(a,l,h,p){_m(this,a,l,h,p)};function Xe(a,l){var h,p=a.F;if(p)for(h=[];p;p=p.F)h.push(p);if(a=a.M,p=l.type||l,typeof l=="string")l=new Ge(l,a);else if(l instanceof Ge)l.target=l.target||a;else{var T=l;l=new Ge(p,a),I(l,T)}if(T=!0,h)for(var C=h.length-1;0<=C;C--){var M=l.g=h[C];T=Xo(M,p,!0,l)&&T}if(M=l.g=a,T=Xo(M,p,!0,l)&&T,T=Xo(M,p,!1,l)&&T,h)for(C=0;C<h.length;C++)M=l.g=h[C],T=Xo(M,p,!1,l)&&T}We.prototype.N=function(){if(We.aa.N.call(this),this.i){var a=this.i,l;for(l in a.g){for(var h=a.g[l],p=0;p<h.length;p++)Zo(h[p]);delete a.g[l],a.h--}}this.F=null},We.prototype.K=function(a,l,h,p){return this.i.add(String(a),l,!1,h,p)},We.prototype.L=function(a,l,h,p){return this.i.add(String(a),l,!0,h,p)};function Xo(a,l,h,p){if(l=a.i.g[String(l)],!l)return!0;l=l.concat();for(var T=!0,C=0;C<l.length;++C){var M=l[C];if(M&&!M.da&&M.capture==h){var ve=M.listener,He=M.ha||M.src;M.fa&&cl(a.i,M),T=ve.call(He,p)!==!1&&T}}return T&&!p.defaultPrevented}function wm(a,l,h){if(typeof a=="function")h&&(a=_(a,h));else if(a&&typeof a.handleEvent=="function")a=_(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(l)?-1:c.setTimeout(a,l||0)}function Em(a){a.g=wm(()=>{a.g=null,a.i&&(a.i=!1,Em(a))},a.l);let l=a.h;a.h=null,a.m.apply(null,l)}class zT extends En{constructor(l,h){super(),this.m=l,this.l=h,this.h=null,this.i=!1,this.g=null}j(l){this.h=arguments,this.g?this.i=!0:Em(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function us(a){En.call(this),this.h=a,this.g={}}A(us,En);var Dm=[];function Tm(a){Z(a.g,function(l,h){this.g.hasOwnProperty(h)&&hl(l)},a),a.g={}}us.prototype.N=function(){us.aa.N.call(this),Tm(this)},us.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ml=c.JSON.stringify,GT=c.JSON.parse,WT=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function yl(){}yl.prototype.h=null;function bm(a){return a.h||(a.h=a.i())}function Cm(){}var ls={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vl(){Ge.call(this,"d")}A(vl,Ge);function _l(){Ge.call(this,"c")}A(_l,Ge);var Zn={},Sm=null;function ea(){return Sm=Sm||new We}Zn.La="serverreachability";function Am(a){Ge.call(this,Zn.La,a)}A(Am,Ge);function ds(a){let l=ea();Xe(l,new Am(l))}Zn.STAT_EVENT="statevent";function Rm(a,l){Ge.call(this,Zn.STAT_EVENT,a),this.stat=l}A(Rm,Ge);function et(a){let l=ea();Xe(l,new Rm(l,a))}Zn.Ma="timingevent";function Nm(a,l){Ge.call(this,Zn.Ma,a),this.size=l}A(Nm,Ge);function hs(a,l){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},l)}function fs(){this.g=!0}fs.prototype.xa=function(){this.g=!1};function KT(a,l,h,p,T,C){a.info(function(){if(a.g)if(C)for(var M="",ve=C.split("&"),He=0;He<ve.length;He++){var he=ve[He].split("=");if(1<he.length){var Ke=he[0];he=he[1];var Qe=Ke.split("_");M=2<=Qe.length&&Qe[1]=="type"?M+(Ke+"="+he+"&"):M+(Ke+"=redacted&")}}else M=null;else M=C;return"XMLHTTP REQ ("+p+") [attempt "+T+"]: "+l+`
`+h+`
`+M})}function QT(a,l,h,p,T,C,M){a.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+T+"]: "+l+`
`+h+`
`+C+" "+M})}function kr(a,l,h,p){a.info(function(){return"XMLHTTP TEXT ("+l+"): "+ZT(a,h)+(p?" "+p:"")})}function YT(a,l){a.info(function(){return"TIMEOUT: "+l})}fs.prototype.info=function(){};function ZT(a,l){if(!a.g)return l;if(!l)return null;try{var h=JSON.parse(l);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var p=h[a];if(!(2>p.length)){var T=p[1];if(Array.isArray(T)&&!(1>T.length)){var C=T[0];if(C!="noop"&&C!="stop"&&C!="close")for(var M=1;M<T.length;M++)T[M]=""}}}}return ml(h)}catch{return l}}var ta={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Il;function na(){}A(na,yl),na.prototype.g=function(){return new XMLHttpRequest},na.prototype.i=function(){return{}},Il=new na;function Dn(a,l,h,p){this.j=a,this.i=l,this.l=h,this.R=p||1,this.U=new us(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Mm}function Mm(){this.i=null,this.g="",this.h=!1}var Pm={},wl={};function El(a,l,h){a.L=1,a.v=oa(nn(l)),a.m=h,a.P=!0,Om(a,null)}function Om(a,l){a.F=Date.now(),ra(a),a.A=nn(a.v);var h=a.A,p=a.R;Array.isArray(p)||(p=[String(p)]),Km(h.i,"t",p),a.C=0,h=a.j.J,a.h=new Mm,a.g=hy(a.j,h?l:null,!a.m),0<a.O&&(a.M=new zT(_(a.Y,a,a.g),a.O)),l=a.U,h=a.g,p=a.ca;var T="readystatechange";Array.isArray(T)||(T&&(Dm[0]=T.toString()),T=Dm);for(var C=0;C<T.length;C++){var M=mm(h,T[C],p||l.handleEvent,!1,l.h||l);if(!M)break;l.g[M.key]=M}l=a.H?m(a.H):{},a.m?(a.u||(a.u="POST"),l["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,l)):(a.u="GET",a.g.ea(a.A,a.u,null,l)),ds(),KT(a.i,a.u,a.A,a.l,a.R,a.m)}Dn.prototype.ca=function(a){a=a.target;let l=this.M;l&&rn(a)==3?l.j():this.Y(a)},Dn.prototype.Y=function(a){try{if(a==this.g)e:{let Qe=rn(this.g);var l=this.g.Ba();let Vr=this.g.Z();if(!(3>Qe)&&(Qe!=3||this.g&&(this.h.h||this.g.oa()||ty(this.g)))){this.J||Qe!=4||l==7||(l==8||0>=Vr?ds(3):ds(2)),Dl(this);var h=this.g.Z();this.X=h;t:if(km(this)){var p=ty(this.g);a="";var T=p.length,C=rn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Jn(this),ps(this);var M="";break t}this.h.i=new c.TextDecoder}for(l=0;l<T;l++)this.h.h=!0,a+=this.h.i.decode(p[l],{stream:!(C&&l==T-1)});p.length=0,this.h.g+=a,this.C=0,M=this.h.g}else M=this.g.oa();if(this.o=h==200,QT(this.i,this.u,this.A,this.l,this.R,Qe,h),this.o){if(this.T&&!this.K){t:{if(this.g){var ve,He=this.g;if((ve=He.g?He.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(ve)){var he=ve;break t}}he=null}if(h=he)kr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Tl(this,h);else{this.o=!1,this.s=3,et(12),Jn(this),ps(this);break e}}if(this.P){h=!0;let At;for(;!this.J&&this.C<M.length;)if(At=JT(this,M),At==wl){Qe==4&&(this.s=4,et(14),h=!1),kr(this.i,this.l,null,"[Incomplete Response]");break}else if(At==Pm){this.s=4,et(15),kr(this.i,this.l,M,"[Invalid Chunk]"),h=!1;break}else kr(this.i,this.l,At,null),Tl(this,At);if(km(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qe!=4||M.length!=0||this.h.h||(this.s=1,et(16),h=!1),this.o=this.o&&h,!h)kr(this.i,this.l,M,"[Invalid Chunked Response]"),Jn(this),ps(this);else if(0<M.length&&!this.W){this.W=!0;var Ke=this.j;Ke.g==this&&Ke.ba&&!Ke.M&&(Ke.j.info("Great, no buffering proxy detected. Bytes received: "+M.length),Nl(Ke),Ke.M=!0,et(11))}}else kr(this.i,this.l,M,null),Tl(this,M);Qe==4&&Jn(this),this.o&&!this.J&&(Qe==4?cy(this.j,this):(this.o=!1,ra(this)))}else gb(this.g),h==400&&0<M.indexOf("Unknown SID")?(this.s=3,et(12)):(this.s=0,et(13)),Jn(this),ps(this)}}}catch{}finally{}};function km(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function JT(a,l){var h=a.C,p=l.indexOf(`
`,h);return p==-1?wl:(h=Number(l.substring(h,p)),isNaN(h)?Pm:(p+=1,p+h>l.length?wl:(l=l.slice(p,p+h),a.C=p+h,l)))}Dn.prototype.cancel=function(){this.J=!0,Jn(this)};function ra(a){a.S=Date.now()+a.I,Lm(a,a.I)}function Lm(a,l){if(a.B!=null)throw Error("WatchDog timer not null");a.B=hs(_(a.ba,a),l)}function Dl(a){a.B&&(c.clearTimeout(a.B),a.B=null)}Dn.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(YT(this.i,this.A),this.L!=2&&(ds(),et(17)),Jn(this),this.s=2,ps(this)):Lm(this,this.S-a)};function ps(a){a.j.G==0||a.J||cy(a.j,a)}function Jn(a){Dl(a);var l=a.M;l&&typeof l.ma=="function"&&l.ma(),a.M=null,Tm(a.U),a.g&&(l=a.g,a.g=null,l.abort(),l.ma())}function Tl(a,l){try{var h=a.j;if(h.G!=0&&(h.g==a||bl(h.h,a))){if(!a.K&&bl(h.h,a)&&h.G==3){try{var p=h.Da.g.parse(l)}catch{p=null}if(Array.isArray(p)&&p.length==3){var T=p;if(T[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)da(h),ua(h);else break e;Rl(h),et(18)}}else h.za=T[1],0<h.za-h.T&&37500>T[2]&&h.F&&h.v==0&&!h.C&&(h.C=hs(_(h.Za,h),6e3));if(1>=Um(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else er(h,11)}else if((a.K||h.g==a)&&da(h),!Y(l))for(T=h.Da.g.parse(l),l=0;l<T.length;l++){let he=T[l];if(h.T=he[0],he=he[1],h.G==2)if(he[0]=="c"){h.K=he[1],h.ia=he[2];let Ke=he[3];Ke!=null&&(h.la=Ke,h.j.info("VER="+h.la));let Qe=he[4];Qe!=null&&(h.Aa=Qe,h.j.info("SVER="+h.Aa));let Vr=he[5];Vr!=null&&typeof Vr=="number"&&0<Vr&&(p=1.5*Vr,h.L=p,h.j.info("backChannelRequestTimeoutMs_="+p)),p=h;let At=a.g;if(At){let fa=At.g?At.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fa){var C=p.h;C.g||fa.indexOf("spdy")==-1&&fa.indexOf("quic")==-1&&fa.indexOf("h2")==-1||(C.j=C.l,C.g=new Set,C.h&&(Cl(C,C.h),C.h=null))}if(p.D){let xl=At.g?At.g.getResponseHeader("X-HTTP-Session-Id"):null;xl&&(p.ya=xl,we(p.I,p.D,xl))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),p=h;var M=a;if(p.qa=dy(p,p.J?p.ia:null,p.W),M.K){jm(p.h,M);var ve=M,He=p.L;He&&(ve.I=He),ve.B&&(Dl(ve),ra(ve)),p.g=M}else oy(p);0<h.i.length&&la(h)}else he[0]!="stop"&&he[0]!="close"||er(h,7);else h.G==3&&(he[0]=="stop"||he[0]=="close"?he[0]=="stop"?er(h,7):Al(h):he[0]!="noop"&&h.l&&h.l.ta(he),h.v=0)}}ds(4)}catch{}}var XT=class{constructor(a,l){this.g=a,this.map=l}};function Fm(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Vm(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Um(a){return a.h?1:a.g?a.g.size:0}function bl(a,l){return a.h?a.h==l:a.g?a.g.has(l):!1}function Cl(a,l){a.g?a.g.add(l):a.h=l}function jm(a,l){a.h&&a.h==l?a.h=null:a.g&&a.g.has(l)&&a.g.delete(l)}Fm.prototype.cancel=function(){if(this.i=Bm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function Bm(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let l=a.i;for(let h of a.g.values())l=l.concat(h.D);return l}return x(a.i)}function eb(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var l=[],h=a.length,p=0;p<h;p++)l.push(a[p]);return l}l=[],h=0;for(p in a)l[h++]=a[p];return l}function tb(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var l=[];a=a.length;for(var h=0;h<a;h++)l.push(h);return l}l=[],h=0;for(let p in a)l[h++]=p;return l}}}function $m(a,l){if(a.forEach&&typeof a.forEach=="function")a.forEach(l,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,l,void 0);else for(var h=tb(a),p=eb(a),T=p.length,C=0;C<T;C++)l.call(void 0,p[C],h&&h[C],a)}var Hm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nb(a,l){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var p=a[h].indexOf("="),T=null;if(0<=p){var C=a[h].substring(0,p);T=a[h].substring(p+1)}else C=a[h];l(C,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function Xn(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Xn){this.h=a.h,ia(this,a.j),this.o=a.o,this.g=a.g,sa(this,a.s),this.l=a.l;var l=a.i,h=new ys;h.i=l.i,l.g&&(h.g=new Map(l.g),h.h=l.h),qm(this,h),this.m=a.m}else a&&(l=String(a).match(Hm))?(this.h=!1,ia(this,l[1]||"",!0),this.o=gs(l[2]||""),this.g=gs(l[3]||"",!0),sa(this,l[4]),this.l=gs(l[5]||"",!0),qm(this,l[6]||"",!0),this.m=gs(l[7]||"")):(this.h=!1,this.i=new ys(null,this.h))}Xn.prototype.toString=function(){var a=[],l=this.j;l&&a.push(ms(l,zm,!0),":");var h=this.g;return(h||l=="file")&&(a.push("//"),(l=this.o)&&a.push(ms(l,zm,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(ms(h,h.charAt(0)=="/"?sb:ib,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",ms(h,ab)),a.join("")};function nn(a){return new Xn(a)}function ia(a,l,h){a.j=h?gs(l,!0):l,a.j&&(a.j=a.j.replace(/:$/,""))}function sa(a,l){if(l){if(l=Number(l),isNaN(l)||0>l)throw Error("Bad port number "+l);a.s=l}else a.s=null}function qm(a,l,h){l instanceof ys?(a.i=l,cb(a.i,a.h)):(h||(l=ms(l,ob)),a.i=new ys(l,a.h))}function we(a,l,h){a.i.set(l,h)}function oa(a){return we(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function gs(a,l){return a?l?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ms(a,l,h){return typeof a=="string"?(a=encodeURI(a).replace(l,rb),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function rb(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var zm=/[#\/\?@]/g,ib=/[#\?:]/g,sb=/[#\?]/g,ob=/[#\?@]/g,ab=/#/g;function ys(a,l){this.h=this.g=null,this.i=a||null,this.j=!!l}function Tn(a){a.g||(a.g=new Map,a.h=0,a.i&&nb(a.i,function(l,h){a.add(decodeURIComponent(l.replace(/\+/g," ")),h)}))}n=ys.prototype,n.add=function(a,l){Tn(this),this.i=null,a=Lr(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(l),this.h+=1,this};function Gm(a,l){Tn(a),l=Lr(a,l),a.g.has(l)&&(a.i=null,a.h-=a.g.get(l).length,a.g.delete(l))}function Wm(a,l){return Tn(a),l=Lr(a,l),a.g.has(l)}n.forEach=function(a,l){Tn(this),this.g.forEach(function(h,p){h.forEach(function(T){a.call(l,T,p,this)},this)},this)},n.na=function(){Tn(this);let a=Array.from(this.g.values()),l=Array.from(this.g.keys()),h=[];for(let p=0;p<l.length;p++){let T=a[p];for(let C=0;C<T.length;C++)h.push(l[p])}return h},n.V=function(a){Tn(this);let l=[];if(typeof a=="string")Wm(this,a)&&(l=l.concat(this.g.get(Lr(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)l=l.concat(a[h])}return l},n.set=function(a,l){return Tn(this),this.i=null,a=Lr(this,a),Wm(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[l]),this.h+=1,this},n.get=function(a,l){return a?(a=this.V(a),0<a.length?String(a[0]):l):l};function Km(a,l,h){Gm(a,l),0<h.length&&(a.i=null,a.g.set(Lr(a,l),x(h)),a.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],l=Array.from(this.g.keys());for(var h=0;h<l.length;h++){var p=l[h];let C=encodeURIComponent(String(p)),M=this.V(p);for(p=0;p<M.length;p++){var T=C;M[p]!==""&&(T+="="+encodeURIComponent(String(M[p]))),a.push(T)}}return this.i=a.join("&")};function Lr(a,l){return l=String(l),a.j&&(l=l.toLowerCase()),l}function cb(a,l){l&&!a.j&&(Tn(a),a.i=null,a.g.forEach(function(h,p){var T=p.toLowerCase();p!=T&&(Gm(this,p),Km(this,T,h))},a)),a.j=l}function ub(a,l){let h=new fs;if(c.Image){let p=new Image;p.onload=E(bn,h,"TestLoadImage: loaded",!0,l,p),p.onerror=E(bn,h,"TestLoadImage: error",!1,l,p),p.onabort=E(bn,h,"TestLoadImage: abort",!1,l,p),p.ontimeout=E(bn,h,"TestLoadImage: timeout",!1,l,p),c.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=a}else l(!1)}function lb(a,l){let h=new fs,p=new AbortController,T=setTimeout(()=>{p.abort(),bn(h,"TestPingServer: timeout",!1,l)},1e4);fetch(a,{signal:p.signal}).then(C=>{clearTimeout(T),C.ok?bn(h,"TestPingServer: ok",!0,l):bn(h,"TestPingServer: server error",!1,l)}).catch(()=>{clearTimeout(T),bn(h,"TestPingServer: error",!1,l)})}function bn(a,l,h,p,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),p(h)}catch{}}function db(){this.g=new WT}function hb(a,l,h){let p=h||"";try{$m(a,function(T,C){let M=T;d(T)&&(M=ml(T)),l.push(p+C+"="+encodeURIComponent(M))})}catch(T){throw l.push(p+"type="+encodeURIComponent("_badmap")),T}}function vs(a){this.l=a.Ub||null,this.j=a.eb||!1}A(vs,yl),vs.prototype.g=function(){return new aa(this.l,this.j)},vs.prototype.i=function(a){return function(){return a}}({});function aa(a,l){We.call(this),this.D=a,this.o=l,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(aa,We),n=aa.prototype,n.open=function(a,l){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=l,this.readyState=1,Is(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let l={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(l.body=a),(this.D||c).fetch(new Request(this.A,l)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_s(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Is(this)),this.g&&(this.readyState=3,Is(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Qm(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Qm(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var l=a.value?a.value:new Uint8Array(0);(l=this.v.decode(l,{stream:!a.done}))&&(this.response=this.responseText+=l)}a.done?_s(this):Is(this),this.readyState==3&&Qm(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,_s(this))},n.Qa=function(a){this.g&&(this.response=a,_s(this))},n.ga=function(){this.g&&_s(this)};function _s(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Is(a)}n.setRequestHeader=function(a,l){this.u.append(a,l)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],l=this.h.entries();for(var h=l.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=l.next();return a.join(`\r
`)};function Is(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(aa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Ym(a){let l="";return Z(a,function(h,p){l+=p,l+=":",l+=h,l+=`\r
`}),l}function Sl(a,l,h){e:{for(p in h){var p=!1;break e}p=!0}p||(h=Ym(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):we(a,l,h))}function be(a){We.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(be,We);var fb=/^https?$/i,pb=["POST","PUT"];n=be.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,l,h,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);l=l?l.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Il.g(),this.v=this.o?bm(this.o):bm(Il),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(l,String(a),!0),this.B=!1}catch(C){Zm(this,C);return}if(a=h||"",h=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var T in p)h.set(T,p[T]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(let C of p.keys())h.set(C,p.get(C));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(h.keys()).find(C=>C.toLowerCase()=="content-type"),T=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(pb,l,void 0))||p||T||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[C,M]of h)this.g.setRequestHeader(C,M);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ey(this),this.u=!0,this.g.send(a),this.u=!1}catch(C){Zm(this,C)}};function Zm(a,l){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=l,a.m=5,Jm(a),ca(a)}function Jm(a){a.A||(a.A=!0,Xe(a,"complete"),Xe(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Xe(this,"complete"),Xe(this,"abort"),ca(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ca(this,!0)),be.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Xm(this):this.bb())},n.bb=function(){Xm(this)};function Xm(a){if(a.h&&typeof o<"u"&&(!a.v[1]||rn(a)!=4||a.Z()!=2)){if(a.u&&rn(a)==4)wm(a.Ea,0,a);else if(Xe(a,"readystatechange"),rn(a)==4){a.h=!1;try{let M=a.Z();e:switch(M){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var l=!0;break e;default:l=!1}var h;if(!(h=l)){var p;if(p=M===0){var T=String(a.D).match(Hm)[1]||null;!T&&c.self&&c.self.location&&(T=c.self.location.protocol.slice(0,-1)),p=!fb.test(T?T.toLowerCase():"")}h=p}if(h)Xe(a,"complete"),Xe(a,"success");else{a.m=6;try{var C=2<rn(a)?a.g.statusText:""}catch{C=""}a.l=C+" ["+a.Z()+"]",Jm(a)}}finally{ca(a)}}}}function ca(a,l){if(a.g){ey(a);let h=a.g,p=a.v[0]?()=>{}:null;a.g=null,a.v=null,l||Xe(a,"ready");try{h.onreadystatechange=p}catch{}}}function ey(a){a.I&&(c.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function rn(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<rn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var l=this.g.responseText;return a&&l.indexOf(a)==0&&(l=l.substring(a.length)),GT(l)}};function ty(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function gb(a){let l={};a=(a.g&&2<=rn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<a.length;p++){if(Y(a[p]))continue;var h=D(a[p]);let T=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let C=l[T]||[];l[T]=C,C.push(h)}w(l,function(p){return p.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ws(a,l,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||l}function ny(a){this.Aa=0,this.i=[],this.j=new fs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ws("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ws("baseRetryDelayMs",5e3,a),this.cb=ws("retryDelaySeedMs",1e4,a),this.Wa=ws("forwardChannelMaxRetries",2,a),this.wa=ws("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Fm(a&&a.concurrentRequestLimit),this.Da=new db,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ny.prototype,n.la=8,n.G=1,n.connect=function(a,l,h,p){et(0),this.W=a,this.H=l||{},h&&p!==void 0&&(this.H.OSID=h,this.H.OAID=p),this.F=this.X,this.I=dy(this,null,this.W),la(this)};function Al(a){if(ry(a),a.G==3){var l=a.U++,h=nn(a.I);if(we(h,"SID",a.K),we(h,"RID",l),we(h,"TYPE","terminate"),Es(a,h),l=new Dn(a,a.j,l),l.L=2,l.v=oa(nn(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(l.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=l.v,h=!0),h||(l.g=hy(l.j,null),l.g.ea(l.v)),l.F=Date.now(),ra(l)}ly(a)}function ua(a){a.g&&(Nl(a),a.g.cancel(),a.g=null)}function ry(a){ua(a),a.u&&(c.clearTimeout(a.u),a.u=null),da(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function la(a){if(!Vm(a.h)&&!a.s){a.s=!0;var l=a.Ga;ss||gm(),os||(ss(),os=!0),al.add(l,a),a.B=0}}function mb(a,l){return Um(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=l.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=hs(_(a.Ga,a,l),uy(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let T=new Dn(this,this.j,a),C=this.o;if(this.S&&(C?(C=m(C),I(C,this.S)):C=this.S),this.m!==null||this.O||(T.H=C,C=null),this.P)e:{for(var l=0,h=0;h<this.i.length;h++){t:{var p=this.i[h];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(l+=p,4096<l){l=h;break e}if(l===4096||h===this.i.length-1){l=h+1;break e}}l=1e3}else l=1e3;l=sy(this,T,l),h=nn(this.I),we(h,"RID",a),we(h,"CVER",22),this.D&&we(h,"X-HTTP-Session-Id",this.D),Es(this,h),C&&(this.O?l="headers="+encodeURIComponent(String(Ym(C)))+"&"+l:this.m&&Sl(h,this.m,C)),Cl(this.h,T),this.Ua&&we(h,"TYPE","init"),this.P?(we(h,"$req",l),we(h,"SID","null"),T.T=!0,El(T,h,null)):El(T,h,l),this.G=2}}else this.G==3&&(a?iy(this,a):this.i.length==0||Vm(this.h)||iy(this))};function iy(a,l){var h;l?h=l.l:h=a.U++;let p=nn(a.I);we(p,"SID",a.K),we(p,"RID",h),we(p,"AID",a.T),Es(a,p),a.m&&a.o&&Sl(p,a.m,a.o),h=new Dn(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),l&&(a.i=l.D.concat(a.i)),l=sy(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Cl(a.h,h),El(h,p,l)}function Es(a,l){a.H&&Z(a.H,function(h,p){we(l,p,h)}),a.l&&$m({},function(h,p){we(l,p,h)})}function sy(a,l,h){h=Math.min(a.i.length,h);var p=a.l?_(a.l.Na,a.l,a):null;e:{var T=a.i;let C=-1;for(;;){let M=["count="+h];C==-1?0<h?(C=T[0].g,M.push("ofs="+C)):C=0:M.push("ofs="+C);let ve=!0;for(let He=0;He<h;He++){let he=T[He].g,Ke=T[He].map;if(he-=C,0>he)C=Math.max(0,T[He].g-100),ve=!1;else try{hb(Ke,M,"req"+he+"_")}catch{p&&p(Ke)}}if(ve){p=M.join("&");break e}}}return a=a.i.splice(0,h),l.D=a,p}function oy(a){if(!a.g&&!a.u){a.Y=1;var l=a.Fa;ss||gm(),os||(ss(),os=!0),al.add(l,a),a.v=0}}function Rl(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=hs(_(a.Fa,a),uy(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,ay(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=hs(_(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,et(10),ua(this),ay(this))};function Nl(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function ay(a){a.g=new Dn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var l=nn(a.qa);we(l,"RID","rpc"),we(l,"SID",a.K),we(l,"AID",a.T),we(l,"CI",a.F?"0":"1"),!a.F&&a.ja&&we(l,"TO",a.ja),we(l,"TYPE","xmlhttp"),Es(a,l),a.m&&a.o&&Sl(l,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=oa(nn(l)),h.m=null,h.P=!0,Om(h,a)}n.Za=function(){this.C!=null&&(this.C=null,ua(this),Rl(this),et(19))};function da(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function cy(a,l){var h=null;if(a.g==l){da(a),Nl(a),a.g=null;var p=2}else if(bl(a.h,l))h=l.D,jm(a.h,l),p=1;else return;if(a.G!=0){if(l.o)if(p==1){h=l.m?l.m.length:0,l=Date.now()-l.F;var T=a.B;p=ea(),Xe(p,new Nm(p,h)),la(a)}else oy(a);else if(T=l.s,T==3||T==0&&0<l.X||!(p==1&&mb(a,l)||p==2&&Rl(a)))switch(h&&0<h.length&&(l=a.h,l.i=l.i.concat(h)),T){case 1:er(a,5);break;case 4:er(a,10);break;case 3:er(a,6);break;default:er(a,2)}}}function uy(a,l){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*l}function er(a,l){if(a.j.info("Error code "+l),l==2){var h=_(a.fb,a),p=a.Xa;let T=!p;p=new Xn(p||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ia(p,"https"),oa(p),T?ub(p.toString(),h):lb(p.toString(),h)}else et(2);a.G=0,a.l&&a.l.sa(l),ly(a),ry(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),et(2)):(this.j.info("Failed to ping google.com"),et(1))};function ly(a){if(a.G=0,a.ka=[],a.l){let l=Bm(a.h);(l.length!=0||a.i.length!=0)&&(R(a.ka,l),R(a.ka,a.i),a.h.i.length=0,x(a.i),a.i.length=0),a.l.ra()}}function dy(a,l,h){var p=h instanceof Xn?nn(h):new Xn(h);if(p.g!="")l&&(p.g=l+"."+p.g),sa(p,p.s);else{var T=c.location;p=T.protocol,l=l?l+"."+T.hostname:T.hostname,T=+T.port;var C=new Xn(null);p&&ia(C,p),l&&(C.g=l),T&&sa(C,T),h&&(C.l=h),p=C}return h=a.D,l=a.ya,h&&l&&we(p,h,l),we(p,"VER",a.la),Es(a,p),p}function hy(a,l,h){if(l&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return l=a.Ca&&!a.pa?new be(new vs({eb:h})):new be(a.pa),l.Ha(a.J),l}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function fy(){}n=fy.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ha(){}ha.prototype.g=function(a,l){return new ut(a,l)};function ut(a,l){We.call(this),this.g=new ny(l),this.l=a,this.h=l&&l.messageUrlParams||null,a=l&&l.messageHeaders||null,l&&l.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=l&&l.initMessageHeaders||null,l&&l.messageContentType&&(a?a["X-WebChannel-Content-Type"]=l.messageContentType:a={"X-WebChannel-Content-Type":l.messageContentType}),l&&l.va&&(a?a["X-WebChannel-Client-Profile"]=l.va:a={"X-WebChannel-Client-Profile":l.va}),this.g.S=a,(a=l&&l.Sb)&&!Y(a)&&(this.g.m=a),this.v=l&&l.supportsCrossDomainXhr||!1,this.u=l&&l.sendRawJson||!1,(l=l&&l.httpSessionIdParam)&&!Y(l)&&(this.g.D=l,a=this.h,a!==null&&l in a&&(a=this.h,l in a&&delete a[l])),this.j=new Fr(this)}A(ut,We),ut.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ut.prototype.close=function(){Al(this.g)},ut.prototype.o=function(a){var l=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=ml(a),a=h);l.i.push(new XT(l.Ya++,a)),l.G==3&&la(l)},ut.prototype.N=function(){this.g.l=null,delete this.j,Al(this.g),delete this.g,ut.aa.N.call(this)};function py(a){vl.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var l=a.__sm__;if(l){e:{for(let h in l){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,l=l!==null&&a in l?l[a]:void 0),this.data=l}else this.data=a}A(py,vl);function gy(){_l.call(this),this.status=1}A(gy,_l);function Fr(a){this.g=a}A(Fr,fy),Fr.prototype.ua=function(){Xe(this.g,"a")},Fr.prototype.ta=function(a){Xe(this.g,new py(a))},Fr.prototype.sa=function(a){Xe(this.g,new gy)},Fr.prototype.ra=function(){Xe(this.g,"b")},ha.prototype.createWebChannel=ha.prototype.g,ut.prototype.send=ut.prototype.o,ut.prototype.open=ut.prototype.m,ut.prototype.close=ut.prototype.close,_p=yn.createWebChannelTransport=function(){return new ha},vp=yn.getStatEventTarget=function(){return ea()},yp=yn.Event=Zn,wu=yn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ta.NO_ERROR=0,ta.TIMEOUT=8,ta.HTTP_ERROR=6,Ao=yn.ErrorCode=ta,xm.COMPLETE="complete",mp=yn.EventType=xm,Cm.EventType=ls,ls.OPEN="a",ls.CLOSE="b",ls.ERROR="c",ls.MESSAGE="d",We.prototype.listen=We.prototype.K,ki=yn.WebChannel=Cm,RO=yn.FetchXmlHttpFactory=vs,be.prototype.listenOnce=be.prototype.L,be.prototype.getLastError=be.prototype.Ka,be.prototype.getLastErrorCode=be.prototype.Ba,be.prototype.getStatus=be.prototype.Z,be.prototype.getResponseJson=be.prototype.Oa,be.prototype.getResponseText=be.prototype.oa,be.prototype.send=be.prototype.ea,be.prototype.setWithCredentials=be.prototype.Ha,gp=yn.XhrIo=be}).apply(typeof Iu<"u"?Iu:typeof self<"u"?self:typeof window<"u"?window:{});var QE="@firebase/firestore";var $e=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};$e.UNAUTHENTICATED=new $e(null),$e.GOOGLE_CREDENTIALS=new $e("google-credentials-uid"),$e.FIRST_PARTY=new $e("first-party-uid"),$e.MOCK_USER=new $e("mock-user");var ns="10.14.0";var xr=new $n("@firebase/firestore");function Ro(){return xr.logLevel}function k(n,...e){if(xr.logLevel<=te.DEBUG){let t=e.map(Jg);xr.debug(`Firestore (${ns}): ${n}`,...t)}}function _n(n,...e){if(xr.logLevel<=te.ERROR){let t=e.map(Jg);xr.error(`Firestore (${ns}): ${n}`,...t)}}function qi(n,...e){if(xr.logLevel<=te.WARN){let t=e.map(Jg);xr.warn(`Firestore (${ns}): ${n}`,...t)}}function Jg(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function G(n="Unexpected state"){let e=`FIRESTORE (${ns}) INTERNAL ASSERTION FAILED: `+n;throw _n(e),new Error(e)}function Se(n,e){n||G()}function ue(n,e){return n}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},V=class extends bt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Wn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Cu=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},bp=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t($e.UNAUTHENTICATED))}shutdown(){}},Cp=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Sp=class{constructor(e){this.t=e,this.currentUser=$e.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Se(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),s=new Wn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Wn,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>S(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},c=u=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Wn)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Se(typeof r.accessToken=="string"),new Cu(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Se(e===null||typeof e=="string"),new $e(e)}},Ap=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=$e.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Rp=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Ap(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t($e.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Np=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},xp=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Se(this.o===void 0);let r=s=>{s.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,k("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Se(typeof t.token=="string"),this.R=t.token,new Np(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function NO(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Mp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=NO(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function pe(n,e){return n<e?-1:n>e?1:0}function zi(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var St=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new V(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new V(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new V(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new V(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Q=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new St(0,0))}static max(){return new n(new St(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Su=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&G(),r===void 0?r=e.length-t:r>e.length-t&&G(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Pe=class n extends Su{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new V(P.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},xO=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Vt=class n extends Su{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return xO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new V(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new V(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new V(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(s(),i++)}if(s(),o)throw new V(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var B=class n{constructor(e){this.path=e}static fromPath(e){return new n(Pe.fromString(e))}static fromName(e){return new n(Pe.fromString(e).popFirst(5))}static empty(){return new n(Pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Pe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Pe(e.slice()))}};var Pp=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Pp.UNKNOWN_ID=-1;function MO(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Q.fromTimestamp(r===1e9?new St(t+1,0):new St(t,r));return new Mr(i,B.empty(),e)}function PO(n){return new Mr(n.readTime,n.key,-1)}var Mr=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Q.min(),B.empty(),-1)}static max(){return new n(Q.max(),B.empty(),-1)}};function OO(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=B.comparator(n.documentKey,e.documentKey),t!==0?t:pe(n.largestBatchId,e.largestBatchId))}var kO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Op=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Xg(n){return S(this,null,function*(){if(n.code!==P.FAILED_PRECONDITION||n.message!==kO)throw n;k("LocalStore","Unexpectedly lost primary lease")})}var N=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&G(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++s,o&&s===i&&t()},u=>r(u))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),c=0;for(let u=0;u<s;u++){let d=u;t(e[d]).next(f=>{o[d]=f,++c,c===s&&r(o)},f=>i(f))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function LO(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ko(n){return n.name==="IndexedDbTransactionError"}var RD=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Ju(n){return n==null}function Au(n){return n===0&&1/n==-1/0}var FO=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],yq=[...FO,"documentOverlays"],VO=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],UO=VO,jO=[...UO,"indexConfiguration","indexState","indexEntries"];var vq=[...jO,"globals"];function YE(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Xu(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function BO(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ae=class n{constructor(e,t){this.comparator=e,this.root=t||Zt.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zt.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ui(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ui(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ui(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ui(this.root,e,this.comparator,!0)}},Ui=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Zt=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw G();let e=this.left.check();if(e!==this.right.check())throw G();return e+(this.isRed()?0:1)}};Zt.EMPTY=null,Zt.RED=!0,Zt.BLACK=!1;Zt.EMPTY=new class{constructor(){this.size=0}get key(){throw G()}get value(){throw G()}get color(){throw G()}get left(){throw G()}get right(){throw G()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Zt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ze=class n{constructor(e){this.comparator=e,this.data=new Ae(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ru(this.data.getIterator())}getIteratorFrom(e){return new Ru(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Ru=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Sr=class n{constructor(e){this.fields=e,e.sort(Vt.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ze(Vt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return zi(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Nu=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Je=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Nu("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Je.EMPTY_BYTE_STRING=new Je("");var $O=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function In(n){if(Se(!!n),typeof n=="string"){let e=0,t=$O.exec(n);if(Se(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:De(n.seconds),nanos:De(n.nanos)}}function De(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Kn(n){return typeof n=="string"?Je.fromBase64String(n):Je.fromUint8Array(n)}function em(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function tm(n){let e=n.mapValue.fields.__previous_value__;return em(e)?tm(e):e}function Lo(n){let e=In(n.mapValue.fields.__local_write_time__.timestampValue);return new St(e.seconds,e.nanos)}var kp=class{constructor(e,t,r,i,s,o,c,u,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}},xu=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Eu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Pr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?em(n)?4:xD(n)?9007199254740991:ND(n)?10:11:G()}function Xt(n,e){if(n===e)return!0;let t=Pr(n);if(t!==Pr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Lo(n).isEqual(Lo(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=In(i.timestampValue),c=In(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Kn(i.bytesValue).isEqual(Kn(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return De(i.geoPointValue.latitude)===De(s.geoPointValue.latitude)&&De(i.geoPointValue.longitude)===De(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return De(i.integerValue)===De(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=De(i.doubleValue),c=De(s.doubleValue);return o===c?Au(o)===Au(c):isNaN(o)&&isNaN(c)}return!1}(n,e);case 9:return zi(n.arrayValue.values||[],e.arrayValue.values||[],Xt);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},c=s.mapValue.fields||{};if(YE(o)!==YE(c))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!Xt(o[u],c[u])))return!1;return!0}(n,e);default:return G()}}function Fo(n,e){return(n.values||[]).find(t=>Xt(t,e))!==void 0}function Gi(n,e){if(n===e)return 0;let t=Pr(n),r=Pr(e);if(t!==r)return pe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return pe(n.booleanValue,e.booleanValue);case 2:return function(s,o){let c=De(s.integerValue||s.doubleValue),u=De(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(n,e);case 3:return ZE(n.timestampValue,e.timestampValue);case 4:return ZE(Lo(n),Lo(e));case 5:return pe(n.stringValue,e.stringValue);case 6:return function(s,o){let c=Kn(s),u=Kn(o);return c.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let c=s.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){let f=pe(c[d],u[d]);if(f!==0)return f}return pe(c.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let c=pe(De(s.latitude),De(o.latitude));return c!==0?c:pe(De(s.longitude),De(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return JE(n.arrayValue,e.arrayValue);case 10:return function(s,o){var c,u,d,f;let g=s.fields||{},_=o.fields||{},E=(c=g.value)===null||c===void 0?void 0:c.arrayValue,A=(u=_.value)===null||u===void 0?void 0:u.arrayValue,x=pe(((d=E?.values)===null||d===void 0?void 0:d.length)||0,((f=A?.values)===null||f===void 0?void 0:f.length)||0);return x!==0?x:JE(E,A)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Eu.mapValue&&o===Eu.mapValue)return 0;if(s===Eu.mapValue)return 1;if(o===Eu.mapValue)return-1;let c=s.fields||{},u=Object.keys(c),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let g=0;g<u.length&&g<f.length;++g){let _=pe(u[g],f[g]);if(_!==0)return _;let E=Gi(c[u[g]],d[f[g]]);if(E!==0)return E}return pe(u.length,f.length)}(n.mapValue,e.mapValue);default:throw G()}}function ZE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return pe(n,e);let t=In(n),r=In(e),i=pe(t.seconds,r.seconds);return i!==0?i:pe(t.nanos,r.nanos)}function JE(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Gi(t[i],r[i]);if(s)return s}return pe(t.length,r.length)}function Wi(n){return Lp(n)}function Lp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=In(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Kn(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return B.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=Lp(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Lp(t.fields[o])}`;return i+"}"}(n.mapValue):G()}function Fp(n){return!!n&&"integerValue"in n}function nm(n){return!!n&&"arrayValue"in n}function XE(n){return!!n&&"nullValue"in n}function eD(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ip(n){return!!n&&"mapValue"in n}function ND(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function xo(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Xu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=xo(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=xo(n.arrayValue.values[t]);return e}return Object.assign({},n)}function xD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var vn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ip(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=xo(t)}setAll(e){let t=Vt.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!t.isImmediateParentOf(c)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=c.popLast()}o?r[c.lastSegment()]=xo(o):i.push(c.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());Ip(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Xt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ip(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Xu(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(xo(this.value))}};var Ut=class n{constructor(e,t,r,i,s,o,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new n(e,0,Q.min(),Q.min(),Q.min(),vn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Q.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Q.min(),Q.min(),vn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Q.min(),Q.min(),vn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ki=class{constructor(e,t){this.position=e,this.inclusive=t}};function tD(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=B.comparator(B.fromName(o.referenceValue),t.key):r=Gi(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function nD(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Xt(n.position[t],e.position[t]))return!1;return!0}var Qi=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function HO(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Mu=class{},Le=class n extends Mu{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Up(e,t,r):t==="array-contains"?new $p(e,r):t==="in"?new Hp(e,r):t==="not-in"?new qp(e,r):t==="array-contains-any"?new zp(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new jp(e,r):new Bp(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Gi(t,this.value)):t!==null&&Pr(this.value)===Pr(t)&&this.matchesComparison(Gi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return G()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},en=class n extends Mu{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return MD(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function MD(n){return n.op==="and"}function PD(n){return qO(n)&&MD(n)}function qO(n){for(let e of n.filters)if(e instanceof en)return!1;return!0}function Vp(n){if(n instanceof Le)return n.field.canonicalString()+n.op.toString()+Wi(n.value);if(PD(n))return n.filters.map(e=>Vp(e)).join(",");{let e=n.filters.map(t=>Vp(t)).join(",");return`${n.op}(${e})`}}function OD(n,e){return n instanceof Le?function(r,i){return i instanceof Le&&r.op===i.op&&r.field.isEqual(i.field)&&Xt(r.value,i.value)}(n,e):n instanceof en?function(r,i){return i instanceof en&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,c)=>s&&OD(o,i.filters[c]),!0):!1}(n,e):void G()}function kD(n){return n instanceof Le?function(t){return`${t.field.canonicalString()} ${t.op} ${Wi(t.value)}`}(n):n instanceof en?function(t){return t.op.toString()+" {"+t.getFilters().map(kD).join(" ,")+"}"}(n):"Filter"}var Up=class extends Le{constructor(e,t,r){super(e,t,r),this.key=B.fromName(r.referenceValue)}matches(e){let t=B.comparator(e.key,this.key);return this.matchesComparison(t)}},jp=class extends Le{constructor(e,t){super(e,"in",t),this.keys=LD("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Bp=class extends Le{constructor(e,t){super(e,"not-in",t),this.keys=LD("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function LD(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>B.fromName(r.referenceValue))}var $p=class extends Le{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return nm(t)&&Fo(t.arrayValue,this.value)}},Hp=class extends Le{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Fo(this.value.arrayValue,t)}},qp=class extends Le{constructor(e,t){super(e,"not-in",t)}matches(e){if(Fo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Fo(this.value.arrayValue,t)}},zp=class extends Le{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!nm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Fo(this.value.arrayValue,r))}};var Gp=class{constructor(e,t=null,r=[],i=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}};function rD(n,e=null,t=[],r=[],i=null,s=null,o=null){return new Gp(n,e,t,r,i,s,o)}function rm(n){let e=ue(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Vp(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ju(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Wi(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Wi(r)).join(",")),e.ue=t}return e.ue}function im(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!HO(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!OD(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!nD(n.startAt,e.startAt)&&nD(n.endAt,e.endAt)}function Wp(n){return B.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Yi=class{constructor(e,t=null,r=[],i=[],s=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function zO(n,e,t,r,i,s,o,c){return new Yi(n,e,t,r,i,s,o,c)}function sm(n){return new Yi(n)}function iD(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function GO(n){return n.collectionGroup!==null}function Mo(n){let e=ue(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Ze(Vt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Qi(s,r))}),t.has(Vt.keyField().canonicalString())||e.ce.push(new Qi(Vt.keyField(),r))}return e.ce}function Jt(n){let e=ue(n);return e.le||(e.le=WO(e,Mo(n))),e.le}function WO(n,e){if(n.limitType==="F")return rD(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Qi(i.field,s)});let t=n.endAt?new Ki(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ki(n.startAt.position,n.startAt.inclusive):null;return rD(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Kp(n,e,t){return new Yi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function el(n,e){return im(Jt(n),Jt(e))&&n.limitType===e.limitType}function FD(n){return`${rm(Jt(n))}|lt:${n.limitType}`}function Li(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>kD(i)).join(", ")}]`),Ju(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Wi(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Wi(i)).join(",")),`Target(${r})`}(Jt(n))}; limitType=${n.limitType})`}function tl(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):B.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of Mo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,c,u){let d=tD(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,Mo(r),i)||r.endAt&&!function(o,c,u){let d=tD(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,Mo(r),i))}(n,e)}function KO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function VD(n){return(e,t)=>{let r=!1;for(let i of Mo(n)){let s=QO(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function QO(n,e,t){let r=n.field.isKeyField()?B.comparator(e.key,t.key):function(s,o,c){let u=o.data.field(s),d=c.data.field(s);return u!==null&&d!==null?Gi(u,d):G()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return G()}}var Qn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Xu(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return BO(this.inner)}size(){return this.innerSize}};var YO=new Ae(B.comparator);function Yn(){return YO}var UD=new Ae(B.comparator);function No(...n){let e=UD;for(let t of n)e=e.insert(t.key,t);return e}function ZO(n){let e=UD;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ar(){return Po()}function jD(){return Po()}function Po(){return new Qn(n=>n.toString(),(n,e)=>n.isEqual(e))}var Iq=new Ae(B.comparator),JO=new Ze(B.comparator);function de(...n){let e=JO;for(let t of n)e=e.add(t);return e}var XO=new Ze(pe);function ek(){return XO}function tk(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Au(e)?"-0":e}}function nk(n){return{integerValue:""+n}}var Zi=class{constructor(){this._=void 0}};function rk(n,e,t){return n instanceof Vo?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&em(s)&&(s=tm(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Ji?BD(n,e):n instanceof Xi?$D(n,e):function(i,s){let o=sk(i,s),c=sD(o)+sD(i.Pe);return Fp(o)&&Fp(i.Pe)?nk(c):tk(i.serializer,c)}(n,e)}function ik(n,e,t){return n instanceof Ji?BD(n,e):n instanceof Xi?$D(n,e):t}function sk(n,e){return n instanceof Uo?function(r){return Fp(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Vo=class extends Zi{},Ji=class extends Zi{constructor(e){super(),this.elements=e}};function BD(n,e){let t=HD(e);for(let r of n.elements)t.some(i=>Xt(i,r))||t.push(r);return{arrayValue:{values:t}}}var Xi=class extends Zi{constructor(e){super(),this.elements=e}};function $D(n,e){let t=HD(e);for(let r of n.elements)t=t.filter(i=>!Xt(i,r));return{arrayValue:{values:t}}}var Uo=class extends Zi{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function sD(n){return De(n.integerValue||n.doubleValue)}function HD(n){return nm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function ok(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Ji&&i instanceof Ji||r instanceof Xi&&i instanceof Xi?zi(r.elements,i.elements,Xt):r instanceof Uo&&i instanceof Uo?Xt(r.Pe,i.Pe):r instanceof Vo&&i instanceof Vo}(n.transform,e.transform)}var Oo=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Tu(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var jo=class{};function qD(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Qp(n.key,Oo.none()):new Bo(n.key,n.data,Oo.none());{let t=n.data,r=vn.empty(),i=new Ze(Vt.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new es(n.key,r,new Sr(i.toArray()),Oo.none())}}function ak(n,e,t){n instanceof Bo?function(i,s,o){let c=i.value.clone(),u=aD(i.fieldTransforms,s,o.transformResults);c.setAll(u),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):n instanceof es?function(i,s,o){if(!Tu(i.precondition,s))return void s.convertToUnknownDocument(o.version);let c=aD(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(zD(i)),u.setAll(c),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function ko(n,e,t,r){return n instanceof Bo?function(s,o,c,u){if(!Tu(s.precondition,o))return c;let d=s.value.clone(),f=cD(s.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof es?function(s,o,c,u){if(!Tu(s.precondition,o))return c;let d=cD(s.fieldTransforms,u,o),f=o.data;return f.setAll(zD(s)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(s,o,c){return Tu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(n,e,t)}function oD(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&zi(r,i,(s,o)=>ok(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Bo=class extends jo{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},es=class extends jo{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function zD(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function aD(n,e,t){let r=new Map;Se(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,c=e.data.field(s.field);r.set(s.field,ik(o,c,t[i]))}return r}function cD(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,rk(s,o,e))}return r}var Qp=class extends jo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};var Yp=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&ak(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=ko(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=ko(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=jD();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,c=this.applyToLocalView(o,s.mutatedFields);c=t.has(i.key)?null:c;let u=qD(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Q.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),de())}isEqual(e){return this.batchId===e.batchId&&zi(this.mutations,e.mutations,(t,r)=>oD(t,r))&&zi(this.baseMutations,e.baseMutations,(t,r)=>oD(t,r))}};var Zp=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Jp=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var xe,ce;function GD(n){if(n===void 0)return _n("GRPC error has no .code"),P.UNKNOWN;switch(n){case xe.OK:return P.OK;case xe.CANCELLED:return P.CANCELLED;case xe.UNKNOWN:return P.UNKNOWN;case xe.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case xe.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case xe.INTERNAL:return P.INTERNAL;case xe.UNAVAILABLE:return P.UNAVAILABLE;case xe.UNAUTHENTICATED:return P.UNAUTHENTICATED;case xe.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case xe.NOT_FOUND:return P.NOT_FOUND;case xe.ALREADY_EXISTS:return P.ALREADY_EXISTS;case xe.PERMISSION_DENIED:return P.PERMISSION_DENIED;case xe.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case xe.ABORTED:return P.ABORTED;case xe.OUT_OF_RANGE:return P.OUT_OF_RANGE;case xe.UNIMPLEMENTED:return P.UNIMPLEMENTED;case xe.DATA_LOSS:return P.DATA_LOSS;default:return G()}}(ce=xe||(xe={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";var uD=null;function ck(){return new TextEncoder}var uk=new Gn([4294967295,4294967295],0);function lD(n){let e=ck().encode(n),t=new pp;return t.update(e),new Uint8Array(t.digest())}function dD(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Gn([t,r],0),new Gn([i,s],0)]}var Xp=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Rr(`Invalid padding: ${t}`);if(r<0)throw new Rr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Rr(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Rr(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Gn.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Gn.fromNumber(r)));return i.compare(uk)===1&&(i=new Gn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=lD(e),[r,i]=dD(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;let t=lD(e),[r,i]=dD(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Rr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Pu=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,$o.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Q.min(),i,new Ae(pe),Yn(),de())}},$o=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,de(),de(),de())}};var ji=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Ou=class{constructor(e,t){this.targetId=e,this.me=t}},ku=class{constructor(e,t,r=Je.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Lu=class{constructor(){this.fe=0,this.ge=fD(),this.pe=Je.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=de(),t=de(),r=de();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:G()}}),new $o(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=fD()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Se(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},eg=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Yn(),this.qe=hD(),this.Qe=new Ae(pe)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:G()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(Wp(s))if(r===0){let o=new B(s.path);this.Ue(t,o,Ut.newNoDocument(o,Q.min()))}else Se(r===1);else{let o=this.Ye(t);if(o!==r){let c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(t);let d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,d)}uD?.et(function(f,g,_,E,A){var x,R,F,Y,X,ge;let Re={localCacheCount:f,existenceFilterCount:g.count,databaseId:_.database,projectId:_.projectId},Z=g.unchangedNames;return Z&&(Re.bloomFilter={applied:A===0,hashCount:(x=Z?.hashCount)!==null&&x!==void 0?x:0,bitmapLength:(Y=(F=(R=Z?.bits)===null||R===void 0?void 0:R.bitmap)===null||F===void 0?void 0:F.length)!==null&&Y!==void 0?Y:0,padding:(ge=(X=Z?.bits)===null||X===void 0?void 0:X.padding)!==null&&ge!==void 0?ge:0,mightContain:w=>{var m;return(m=E?.mightContain(w))!==null&&m!==void 0&&m}}),Re}(o,e.me,this.Le.tt(),c,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,c;try{o=Kn(r).toUint8Array()}catch(u){if(u instanceof Nu)return qi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Xp(o,i,s)}catch(u){return qi(u instanceof Rr?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let c=this.Je(o);if(c){if(s.current&&Wp(c.target)){let u=new B(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Ut.newNoDocument(u,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=de();this.qe.forEach((s,o)=>{let c=!0;o.forEachWhile(u=>{let d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new Pu(e,t,this.Qe,this.ke,r);return this.ke=Yn(),this.qe=hD(),this.Qe=new Ae(pe),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Lu,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ze(pe),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||k("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Lu),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function hD(){return new Ae(B.comparator)}function fD(){return new Ae(B.comparator)}var lk={asc:"ASCENDING",desc:"DESCENDING"},dk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hk={and:"AND",or:"OR"},tg=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function ng(n,e){return n.useProto3Json||Ju(e)?e:{value:e}}function fk(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pk(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Bi(n){return Se(!!n),Q.fromTimestamp(function(t){let r=In(t);return new St(r.seconds,r.nanos)}(n))}function gk(n,e){return rg(n,e).canonicalString()}function rg(n,e){let t=function(i){return new Pe(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function WD(n){let e=Pe.fromString(n);return Se(JD(e)),e}function wp(n,e){let t=WD(e);if(t.get(1)!==n.databaseId.projectId)throw new V(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new V(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new B(QD(t))}function KD(n,e){return gk(n.databaseId,e)}function mk(n){let e=WD(n);return e.length===4?Pe.emptyPath():QD(e)}function pD(n){return new Pe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function QD(n){return Se(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function yk(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:G()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,f){return d.useProto3Json?(Se(f===void 0||typeof f=="string"),Je.fromBase64String(f||"")):(Se(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Je.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){let f=d.code===void 0?P.UNKNOWN:GD(d.code);return new V(f,d.message||"")}(o);t=new ku(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=wp(n,r.document.name),s=Bi(r.document.updateTime),o=r.document.createTime?Bi(r.document.createTime):Q.min(),c=new vn({mapValue:{fields:r.document.fields}}),u=Ut.newFoundDocument(i,s,o,c),d=r.targetIds||[],f=r.removedTargetIds||[];t=new ji(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=wp(n,r.document),s=r.readTime?Bi(r.readTime):Q.min(),o=Ut.newNoDocument(i,s),c=r.removedTargetIds||[];t=new ji([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=wp(n,r.document),s=r.removedTargetIds||[];t=new ji([],s,i,null)}else{if(!("filter"in e))return G();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new Jp(i,s),c=r.targetId;t=new Ou(c,o)}}return t}function vk(n,e){return{documents:[KD(n,e.path)]}}function _k(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=KD(n,i);let s=function(d){if(d.length!==0)return ZD(en.create(d,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(d){if(d.length!==0)return d.map(f=>function(_){return{field:Fi(_.field),direction:Ek(_.dir)}}(f))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let c=ng(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:t,parent:i}}function Ik(n){let e=mk(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Se(r===1);let f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=function(g){let _=YD(g);return _ instanceof en&&PD(_)?_.getFilters():[_]}(t.where));let o=[];t.orderBy&&(o=function(g){return g.map(_=>function(A){return new Qi(Vi(A.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(_))}(t.orderBy));let c=null;t.limit&&(c=function(g){let _;return _=typeof g=="object"?g.value:g,Ju(_)?null:_}(t.limit));let u=null;t.startAt&&(u=function(g){let _=!!g.before,E=g.values||[];return new Ki(E,_)}(t.startAt));let d=null;return t.endAt&&(d=function(g){let _=!g.before,E=g.values||[];return new Ki(E,_)}(t.endAt)),zO(e,i,o,s,c,"F",u,d)}function wk(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function YD(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Vi(t.unaryFilter.field);return Le.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Vi(t.unaryFilter.field);return Le.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Vi(t.unaryFilter.field);return Le.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Vi(t.unaryFilter.field);return Le.create(o,"!=",{nullValue:"NULL_VALUE"});default:return G()}}(n):n.fieldFilter!==void 0?function(t){return Le.create(Vi(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return G()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return en.create(t.compositeFilter.filters.map(r=>YD(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return G()}}(t.compositeFilter.op))}(n):G()}function Ek(n){return lk[n]}function Dk(n){return dk[n]}function Tk(n){return hk[n]}function Fi(n){return{fieldPath:n.canonicalString()}}function Vi(n){return Vt.fromServerFormat(n.fieldPath)}function ZD(n){return n instanceof Le?function(t){if(t.op==="=="){if(eD(t.value))return{unaryFilter:{field:Fi(t.field),op:"IS_NAN"}};if(XE(t.value))return{unaryFilter:{field:Fi(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(eD(t.value))return{unaryFilter:{field:Fi(t.field),op:"IS_NOT_NAN"}};if(XE(t.value))return{unaryFilter:{field:Fi(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fi(t.field),op:Dk(t.op),value:t.value}}}(n):n instanceof en?function(t){let r=t.getFilters().map(i=>ZD(i));return r.length===1?r[0]:{compositeFilter:{op:Tk(t.op),filters:r}}}(n):G()}function JD(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Ho=class n{constructor(e,t,r,i,s=Q.min(),o=Q.min(),c=Je.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var ig=class{constructor(e){this.ct=e}};function bk(n){let e=Ik({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Kp(e,e.limit,"L"):e}var Fu=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(De(e.integerValue));else if("doubleValue"in e){let r=De(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Au(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=In(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Kn(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?xD(e)?this.dt(t,Number.MAX_SAFE_INTEGER):ND(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):G()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let o="value",c=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(De(c)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),B.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Fu.vt=new Fu;var sg=class{constructor(){this.un=new og}addToCollectionParentIndex(e,t){return this.un.add(t),N.resolve()}getCollectionParents(e,t){return N.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return N.resolve()}deleteFieldIndex(e,t){return N.resolve()}deleteAllFieldIndexes(e){return N.resolve()}createTargetIndexes(e,t){return N.resolve()}getDocumentsMatchingTarget(e,t){return N.resolve(null)}getIndexType(e,t){return N.resolve(0)}getFieldIndexes(e,t){return N.resolve([])}getNextCollectionGroupToUpdate(e){return N.resolve(null)}getMinOffset(e,t){return N.resolve(Mr.min())}getMinOffsetFromCollectionGroup(e,t){return N.resolve(Mr.min())}updateCollectionGroup(e,t,r){return N.resolve()}updateIndexEntries(e,t){return N.resolve()}},og=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ze(Pe.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ze(Pe.comparator)).toArray()}};var wq=new Uint8Array(0);var Yt=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Yt.DEFAULT_COLLECTION_PERCENTILE=10,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yt.DEFAULT=new Yt(41943040,Yt.DEFAULT_COLLECTION_PERCENTILE,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yt.DISABLED=new Yt(-1,0,0);var qo=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var ag=class{constructor(){this.changes=new Qn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?N.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var cg=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var ug=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&ko(r.mutation,i,Sr.empty(),St.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,de()).next(()=>r))}getLocalViewOfDocuments(e,t,r=de()){let i=Ar();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=No();return s.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Ar();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,de()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,c)=>{t.set(o,c)})})}computeViews(e,t,r,i){let s=Yn(),o=Po(),c=function(){return Po()}();return t.forEach((u,d)=>{let f=r.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof es)?s=s.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),ko(f.mutation,d,f.mutation.getFieldMask(),St.now())):o.set(d.key,Sr.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,f)=>o.set(d,f)),t.forEach((d,f)=>{var g;return c.set(d,new cg(f,(g=o.get(d))!==null&&g!==void 0?g:null))}),c))}recalculateAndSaveOverlays(e,t){let r=Po(),i=new Ae((o,c)=>o-c),s=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let c of o)c.keys().forEach(u=>{let d=t.get(u);if(d===null)return;let f=r.get(u)||Sr.empty();f=c.applyToLocalView(d,f),r.set(u,f);let g=(i.get(c.batchId)||de()).add(u);i=i.insert(c.batchId,g)})}).next(()=>{let o=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),d=u.key,f=u.value,g=jD();f.forEach(_=>{if(!s.has(_)){let E=qD(t.get(_),r.get(_));E!==null&&g.set(_,E),s=s.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return N.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return B.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):GO(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):N.resolve(Ar()),c=-1,u=s;return o.next(d=>N.forEach(d,(f,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),s.get(f)?N.resolve():this.remoteDocumentCache.getEntry(e,f).next(_=>{u=u.insert(f,_)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,de())).next(f=>({batchId:c,changes:ZO(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new B(t)).next(r=>{let i=No();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=No();return this.indexManager.getCollectionParents(e,s).next(c=>N.forEach(c,u=>{let d=function(g,_){return new Yi(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((g,_)=>{o=o.insert(g,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((u,d)=>{let f=d.getKey();o.get(f)===null&&(o=o.insert(f,Ut.newInvalidDocument(f)))});let c=No();return o.forEach((u,d)=>{let f=s.get(u);f!==void 0&&ko(f.mutation,d,Sr.empty(),St.now()),tl(t,d)&&(c=c.insert(u,d))}),c})}};var lg=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return N.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Bi(i.createTime)}}(t)),N.resolve()}getNamedQuery(e,t){return N.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:bk(i.bundledQuery),readTime:Bi(i.readTime)}}(t)),N.resolve()}};var dg=class{constructor(){this.overlays=new Ae(B.comparator),this.Ir=new Map}getOverlay(e,t){return N.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Ar();return N.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),N.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),N.resolve()}getOverlaysForCollection(e,t,r){let i=Ar(),s=t.length+1,o=new B(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){let u=c.getNext().value,d=u.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return N.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Ae((d,f)=>d-f),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let f=s.get(d.largestBatchId);f===null&&(f=Ar(),s=s.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}let c=Ar(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=i)););return N.resolve(c)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Zp(t,r));let s=this.Ir.get(t);s===void 0&&(s=de(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var hg=class{constructor(){this.sessionToken=Je.EMPTY_BYTE_STRING}getSessionToken(e){return N.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,N.resolve()}};var zo=class{constructor(){this.Tr=new Ze(Me.Er),this.dr=new Ze(Me.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Me(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Me(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new B(new Pe([])),r=new Me(t,e),i=new Me(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new B(new Pe([])),r=new Me(t,e),i=new Me(t,e+1),s=de();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Me(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Me=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return B.comparator(e.key,t.key)||pe(e.wr,t.wr)}static Ar(e,t){return pe(e.wr,t.wr)||B.comparator(e.key,t.key)}};var fg=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ze(Me.Er)}checkEmpty(e){return N.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Yp(s,t,r,i);this.mutationQueue.push(o);for(let c of i)this.br=this.br.add(new Me(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return N.resolve(o)}lookupMutationBatch(e,t){return N.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return N.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Me(t,0),i=new Me(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let c=this.Dr(o.wr);s.push(c)}),N.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ze(pe);return t.forEach(i=>{let s=new Me(i,0),o=new Me(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],c=>{r=r.add(c.wr)})}),N.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;B.isDocumentKey(s)||(s=s.child(""));let o=new Me(new B(s),0),c=new Ze(pe);return this.br.forEachWhile(u=>{let d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.wr)),!0)},o),N.resolve(this.Cr(c))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Se(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return N.forEach(t.mutations,i=>{let s=new Me(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Me(t,0),i=this.br.firstAfterOrEqual(r);return N.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,N.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var pg=class{constructor(e){this.Mr=e,this.docs=function(){return new Ae(B.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return N.resolve(r?r.document.mutableCopy():Ut.newInvalidDocument(t))}getEntries(e,t){let r=Yn();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ut.newInvalidDocument(i))}),N.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Yn(),o=t.path,c=new B(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||OO(PO(f),r)<=0||(i.has(f.key)||tl(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return N.resolve(s)}getAllFromCollectionGroup(e,t,r,i){G()}Or(e,t){return N.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new gg(this)}getSize(e){return N.resolve(this.size)}},gg=class extends ag{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),N.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var mg=class{constructor(e){this.persistence=e,this.Nr=new Qn(t=>rm(t),im),this.lastRemoteSnapshotVersion=Q.min(),this.highestTargetId=0,this.Lr=0,this.Br=new zo,this.targetCount=0,this.kr=qo.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),N.resolve()}getLastRemoteSnapshotVersion(e){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return N.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),N.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new qo(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,N.resolve()}updateTargetData(e,t){return this.Kn(t),N.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,N.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),N.waitFor(s).next(()=>i)}getTargetCount(e){return N.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return N.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),N.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),N.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),N.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return N.resolve(r)}containsKey(e,t){return N.resolve(this.Br.containsKey(t))}};var yg=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new RD(0),this.Kr=!1,this.Kr=!0,this.$r=new hg,this.referenceDelegate=e(this),this.Ur=new mg(this),this.indexManager=new sg,this.remoteDocumentCache=function(i){return new pg(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new ig(t),this.Gr=new lg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new dg,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new fg(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("MemoryPersistence","Starting transaction:",e);let i=new vg(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return N.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},vg=class extends Op{constructor(e){super(),this.currentSequenceNumber=e}},_g=class n{constructor(e){this.persistence=e,this.Jr=new zo,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw G()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),N.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),N.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),N.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.Xr,r=>{let i=B.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,Q.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return N.or([()=>N.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var Ig=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=de(),i=de();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var wg=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Eg=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return lE()?8:LO(gt())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new wg;return this.Xi(e,t,o).next(c=>{if(s.result=c,this.zi)return this.es(e,t,o,c.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Ro()<=te.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",Li(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),N.resolve()):(Ro()<=te.DEBUG&&k("QueryEngine","Query:",Li(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ro()<=te.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",Li(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jt(t))):N.resolve())}Yi(e,t){if(iD(t))return N.resolve(null);let r=Jt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Kp(t,null,"F"),r=Jt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=de(...s);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let d=this.ts(t,c);return this.ns(t,d,o,u.readTime)?this.Yi(e,Kp(t,null,"F")):this.rs(e,d,t,u)}))})))}Zi(e,t,r,i){return iD(t)||i.isEqual(Q.min())?N.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(t,s);return this.ns(t,o,r,i)?N.resolve(null):(Ro()<=te.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Li(t)),this.rs(e,o,t,MO(i,-1)).next(c=>c))})}ts(e,t){let r=new Ze(VD(e));return t.forEach((i,s)=>{tl(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return Ro()<=te.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",Li(t)),this.Ji.getDocumentsMatchingQuery(e,t,Mr.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Dg=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Ae(pe),this._s=new Qn(s=>rm(s),im),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ug(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function Ck(n,e,t,r){return new Dg(n,e,t,r)}function XD(n,e){return S(this,null,function*(){let t=ue(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],c=[],u=de();for(let d of i){o.push(d.batchId);for(let f of d.mutations)u=u.add(f.key)}for(let d of s){c.push(d.batchId);for(let f of d.mutations)u=u.add(f.key)}return t.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:c}))})})})}function eT(n){let e=ue(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function Sk(n,e){let t=ue(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let c=[];e.targetChanges.forEach((f,g)=>{let _=i.get(g);if(!_)return;c.push(t.Ur.removeMatchingKeys(s,f.removedDocuments,g).next(()=>t.Ur.addMatchingKeys(s,f.addedDocuments,g)));let E=_.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?E=E.withResumeToken(Je.EMPTY_BYTE_STRING,Q.min()).withLastLimboFreeSnapshotVersion(Q.min()):f.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(f.resumeToken,r)),i=i.insert(g,E),function(x,R,F){return x.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(_,E,f)&&c.push(t.Ur.updateTargetData(s,E))});let u=Yn(),d=de();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))}),c.push(Ak(s,o,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!r.isEqual(Q.min())){let f=t.Ur.getLastRemoteSnapshotVersion(s).next(g=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(f)}return N.waitFor(c).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(t.os=i,s))}function Ak(n,e,t){let r=de(),i=de();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Yn();return t.forEach((c,u)=>{let d=s.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(Q.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):k("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function Rk(n,e){let t=ue(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,N.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Ho(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Tg(n,e,t){return S(this,null,function*(){let r=ue(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Ko(o))throw o;k("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function gD(n,e,t){let r=ue(n),i=Q.min(),s=de();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){let g=ue(u),_=g._s.get(f);return _!==void 0?N.resolve(g.os.get(_)):g.Ur.getTargetData(d,f)}(r,o,Jt(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,c.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:Q.min(),t?s:de())).next(c=>(Nk(r,KO(e),c),{documents:c,Ts:s})))}function Nk(n,e,t){let r=n.us.get(e)||Q.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}var Vu=class{constructor(){this.activeTargetIds=ek()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var bg=class{constructor(){this.so=new Vu,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Vu,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Cg=class{_o(e){}shutdown(){}};var Uu=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){k("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){k("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Du=null;function Ep(){return Du===null?Du=function(){return 268435456+Math.round(2147483648*Math.random())}():Du++,"0x"+Du.toString(16)}var xk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Sg=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Ye="WebChannelConnection",Ag=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){let c=Ep(),u=this.xo(t,r.toUriEncodedString());k("RestConnection",`Sending RPC '${t}' ${c}:`,u,i);let d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,o),this.No(t,u,d,i).then(f=>(k("RestConnection",`Received RPC '${t}' ${c}: `,f),f),f=>{throw qi("RestConnection",`RPC '${t}' ${c} failed with error: `,f,"url: ",u,"request:",i),f})}Lo(t,r,i,s,o,c){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ns}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){let i=xk[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=Ep();return new Promise((o,c)=>{let u=new gp;u.setWithCredentials(!0),u.listenOnce(mp.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ao.NO_ERROR:let f=u.getResponseJson();k(Ye,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case Ao.TIMEOUT:k(Ye,`RPC '${e}' ${s} timed out`),c(new V(P.DEADLINE_EXCEEDED,"Request time out"));break;case Ao.HTTP_ERROR:let g=u.getStatus();if(k(Ye,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);let E=_?.error;if(E&&E.status&&E.message){let A=function(R){let F=R.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(F)>=0?F:P.UNKNOWN}(E.status);c(new V(A,E.message))}else c(new V(P.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new V(P.UNAVAILABLE,"Connection failed."));break;default:G()}}finally{k(Ye,`RPC '${e}' ${s} completed.`)}});let d=JSON.stringify(i);k(Ye,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",d,r,15)})}Bo(e,t,r){let i=Ep(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=_p(),c=vp(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let f=s.join("");k(Ye,`Creating RPC '${e}' stream ${i}: ${f}`,u);let g=o.createWebChannel(f,u),_=!1,E=!1,A=new Sg({Io:R=>{E?k(Ye,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(_||(k(Ye,`Opening RPC '${e}' stream ${i} transport.`),g.open(),_=!0),k(Ye,`RPC '${e}' stream ${i} sending:`,R),g.send(R))},To:()=>g.close()}),x=(R,F,Y)=>{R.listen(F,X=>{try{Y(X)}catch(ge){setTimeout(()=>{throw ge},0)}})};return x(g,ki.EventType.OPEN,()=>{E||(k(Ye,`RPC '${e}' stream ${i} transport opened.`),A.yo())}),x(g,ki.EventType.CLOSE,()=>{E||(E=!0,k(Ye,`RPC '${e}' stream ${i} transport closed`),A.So())}),x(g,ki.EventType.ERROR,R=>{E||(E=!0,qi(Ye,`RPC '${e}' stream ${i} transport errored:`,R),A.So(new V(P.UNAVAILABLE,"The operation could not be completed")))}),x(g,ki.EventType.MESSAGE,R=>{var F;if(!E){let Y=R.data[0];Se(!!Y);let X=Y,ge=X.error||((F=X[0])===null||F===void 0?void 0:F.error);if(ge){k(Ye,`RPC '${e}' stream ${i} received error:`,ge);let Re=ge.status,Z=function(y){let I=xe[y];if(I!==void 0)return GD(I)}(Re),w=ge.message;Z===void 0&&(Z=P.INTERNAL,w="Unknown error status: "+Re+" with message "+ge.message),E=!0,A.So(new V(Z,w)),g.close()}else k(Ye,`RPC '${e}' stream ${i} received:`,Y),A.bo(Y)}}),x(c,yp.STAT_EVENT,R=>{R.stat===wu.PROXY?k(Ye,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===wu.NOPROXY&&k(Ye,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.wo()},0),A}};function Dp(){return typeof document<"u"?document:null}function tT(n){return new tg(n,!0)}var ju=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&k("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Rg=class{constructor(e,t,r,i,s,o,c,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ju(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return S(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return S(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return S(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===P.RESOURCE_EXHAUSTED?(_n(t.toString()),_n("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new V(P.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>S(this,null,function*(){this.state=0,this.start()}))}I_(e){return k("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(k("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Ng=class extends Rg{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=yk(this.serializer,e),r=function(s){if(!("targetChange"in s))return Q.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Q.min():o.readTime?Bi(o.readTime):Q.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=pD(this.serializer),t.addTarget=function(s,o){let c,u=o.target;if(c=Wp(u)?{documents:vk(s,u)}:{query:_k(s,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=pk(s,o.resumeToken);let d=ng(s,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(Q.min())>0){c.readTime=fk(s,o.snapshotVersion.toTimestamp());let d=ng(s,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);let r=wk(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=pD(this.serializer),t.removeTarget=e,this.a_(t)}};var xg=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new V(P.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,rg(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new V(P.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,rg(t,r),i,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new V(P.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Mg=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(_n(t),this.D_=!1):k("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Pg=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>S(this,null,function*(){Yo(this)&&(k("RemoteStore","Restarting streams for network reachability change."),yield function(u){return S(this,null,function*(){let d=ue(u);d.L_.add(4),yield Qo(d),d.q_.set("Unknown"),d.L_.delete(4),yield nl(d)})}(this))}))}),this.q_=new Mg(r,i)}};function nl(n){return S(this,null,function*(){if(Yo(n))for(let e of n.B_)yield e(!0)})}function Qo(n){return S(this,null,function*(){for(let e of n.B_)yield e(!1)})}function nT(n,e){let t=ue(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),um(t)?cm(t):rs(t).r_()&&am(t,e))}function om(n,e){let t=ue(n),r=rs(t);t.N_.delete(e),r.r_()&&rT(t,e),t.N_.size===0&&(r.r_()?r.o_():Yo(t)&&t.q_.set("Unknown"))}function am(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Q.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}rs(n).A_(e)}function rT(n,e){n.Q_.xe(e),rs(n).R_(e)}function cm(n){n.Q_=new eg({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),rs(n).start(),n.q_.v_()}function um(n){return Yo(n)&&!rs(n).n_()&&n.N_.size>0}function Yo(n){return ue(n).L_.size===0}function iT(n){n.Q_=void 0}function Mk(n){return S(this,null,function*(){n.q_.set("Online")})}function Pk(n){return S(this,null,function*(){n.N_.forEach((e,t)=>{am(n,e)})})}function Ok(n,e){return S(this,null,function*(){iT(n),um(n)?(n.q_.M_(e),cm(n)):n.q_.set("Unknown")})}function kk(n,e,t){return S(this,null,function*(){if(n.q_.set("Online"),e instanceof ku&&e.state===2&&e.cause)try{yield function(i,s){return S(this,null,function*(){let o=s.cause;for(let c of s.targetIds)i.N_.has(c)&&(yield i.remoteSyncer.rejectListen(c,o),i.N_.delete(c),i.Q_.removeTarget(c))})}(n,e)}catch(r){k("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield mD(n,r)}else if(e instanceof ji?n.Q_.Ke(e):e instanceof Ou?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Q.min()))try{let r=yield eT(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let c=s.Q_.rt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){let f=s.N_.get(d);f&&s.N_.set(d,f.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{let f=s.N_.get(u);if(!f)return;s.N_.set(u,f.withResumeToken(Je.EMPTY_BYTE_STRING,f.snapshotVersion)),rT(s,u);let g=new Ho(f.target,u,d,f.sequenceNumber);am(s,g)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){k("RemoteStore","Failed to raise snapshot:",r),yield mD(n,r)}})}function mD(n,e,t){return S(this,null,function*(){if(!Ko(e))throw e;n.L_.add(1),yield Qo(n),n.q_.set("Offline"),t||(t=()=>eT(n.localStore)),n.asyncQueue.enqueueRetryable(()=>S(this,null,function*(){k("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield nl(n)}))})}function yD(n,e){return S(this,null,function*(){let t=ue(n);t.asyncQueue.verifyOperationInProgress(),k("RemoteStore","RemoteStore received new credentials");let r=Yo(t);t.L_.add(3),yield Qo(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield nl(t)})}function Lk(n,e){return S(this,null,function*(){let t=ue(n);e?(t.L_.delete(2),yield nl(t)):e||(t.L_.add(2),yield Qo(t),t.q_.set("Unknown"))})}function rs(n){return n.K_||(n.K_=function(t,r,i){let s=ue(t);return s.w_(),new Ng(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:Mk.bind(null,n),Ro:Pk.bind(null,n),mo:Ok.bind(null,n),d_:kk.bind(null,n)}),n.B_.push(e=>S(this,null,function*(){e?(n.K_.s_(),um(n)?cm(n):n.q_.set("Unknown")):(yield n.K_.stop(),iT(n))}))),n.K_}var Og=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Wn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,c=new n(e,t,o,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new V(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function sT(n,e){if(_n("AsyncQueue",`${e}: ${n}`),Ko(n))return new V(P.UNAVAILABLE,`${e}: ${n}`);throw n}var Bu=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||B.comparator(t.key,r.key):(t,r)=>B.comparator(t.key,r.key),this.keyedMap=No(),this.sortedSet=new Ae(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var $u=class{constructor(){this.W_=new Ae(B.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):G():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},ts=class n{constructor(e,t,r,i,s,o,c,u,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(c=>{o.push({type:0,doc:c})}),new n(e,t,Bu.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&el(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var kg=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Lg=class{constructor(){this.queries=vD(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=ue(t),s=i.queries;i.queries=vD(),s.forEach((o,c)=>{for(let u of c.j_)u.onError(r)})})(this,new V(P.ABORTED,"Firestore shutting down"))}};function vD(){return new Qn(n=>FD(n),el)}function Fk(n,e){return S(this,null,function*(){let t=ue(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new kg,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let c=sT(o,`Initialization of query '${Li(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&lm(t)})}function Vk(n,e){return S(this,null,function*(){let t=ue(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function Uk(n,e){let t=ue(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let c of o.j_)c.X_(i)&&(r=!0);o.z_=i}}r&&lm(t)}function jk(n,e,t){let r=ue(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function lm(n){n.Y_.forEach(e=>{e.next()})}var Fg,_D;(_D=Fg||(Fg={})).ea="default",_D.Cache="cache";var Vg=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ts(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=ts.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Fg.Cache}};var Hu=class{constructor(e){this.key=e}},qu=class{constructor(e){this.key=e}},Ug=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=de(),this.mutatedKeys=de(),this.Aa=VD(e),this.Ra=new Bu(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new $u,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,g)=>{let _=i.get(f),E=tl(this.query,g)?g:null,A=!!_&&this.mutatedKeys.has(_.key),x=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations),R=!1;_&&E?_.data.isEqual(E.data)?A!==x&&(r.track({type:3,doc:E}),R=!0):this.ga(_,E)||(r.track({type:2,doc:E}),R=!0,(u&&this.Aa(E,u)>0||d&&this.Aa(E,d)<0)&&(c=!0)):!_&&E?(r.track({type:0,doc:E}),R=!0):_&&!E&&(r.track({type:1,doc:_}),R=!0,(u||d)&&(c=!0)),R&&(E?(o=o.add(E),s=x?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:c,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((f,g)=>function(E,A){let x=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G()}};return x(E)-x(A)}(f.type,g.type)||this.Aa(f.doc,g.doc)),this.pa(r),i=i!=null&&i;let c=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new ts(this.query,e.Ra,s,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new $u,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=de(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new qu(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Hu(r))}),t}ba(e){this.Ta=e.Ts,this.da=de();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return ts.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},jg=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Bg=class{constructor(e){this.key=e,this.va=!1}},$g=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Qn(c=>FD(c),el),this.Ma=new Map,this.xa=new Set,this.Oa=new Ae(B.comparator),this.Na=new Map,this.La=new zo,this.Ba={},this.ka=new Map,this.qa=qo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function Bk(n,e,t=!0){return S(this,null,function*(){let r=lT(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield oT(r,e,t,!0),i})}function $k(n,e){return S(this,null,function*(){let t=lT(n);yield oT(t,e,!0,!1)})}function oT(n,e,t,r){return S(this,null,function*(){let i=yield Rk(n.localStore,Jt(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),c;return r&&(c=yield Hk(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&nT(n.remoteStore,i),c})}function Hk(n,e,t,r,i){return S(this,null,function*(){n.Ka=(g,_,E)=>function(x,R,F,Y){return S(this,null,function*(){let X=R.view.ma(F);X.ns&&(X=yield gD(x.localStore,R.query,!1).then(({documents:w})=>R.view.ma(w,X)));let ge=Y&&Y.targetChanges.get(R.targetId),Re=Y&&Y.targetMismatches.get(R.targetId)!=null,Z=R.view.applyChanges(X,x.isPrimaryClient,ge,Re);return wD(x,R.targetId,Z.wa),Z.snapshot})}(n,g,_,E);let s=yield gD(n.localStore,e,!0),o=new Ug(e,s.Ts),c=o.ma(s.documents),u=$o.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=o.applyChanges(c,n.isPrimaryClient,u);wD(n,t,d.wa);let f=new jg(e,t,o);return n.Fa.set(e,f),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),d.snapshot})}function qk(n,e,t){return S(this,null,function*(){let r=ue(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!el(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Tg(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&om(r.remoteStore,i.targetId),Hg(r,i.targetId)}).catch(Xg))):(Hg(r,i.targetId),yield Tg(r.localStore,i.targetId,!0))})}function zk(n,e){return S(this,null,function*(){let t=ue(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),om(t.remoteStore,r.targetId))})}function aT(n,e){return S(this,null,function*(){let t=ue(n);try{let r=yield Sk(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Na.get(s);o&&(Se(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Se(o.va):i.removedDocuments.size>0&&(Se(o.va),o.va=!1))}),yield uT(t,r,e)}catch(r){yield Xg(r)}})}function ID(n,e,t){let r=ue(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,o)=>{let c=o.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){let u=ue(o);u.onlineState=c;let d=!1;u.queries.forEach((f,g)=>{for(let _ of g.j_)_.Z_(c)&&(d=!0)}),d&&lm(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Gk(n,e,t){return S(this,null,function*(){let r=ue(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ae(B.comparator);o=o.insert(s,Ut.newNoDocument(s,Q.min()));let c=de().add(s),u=new Pu(Q.min(),new Map,new Ae(pe),o,c);yield aT(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),dm(r)}else yield Tg(r.localStore,e,!1).then(()=>Hg(r,e,t)).catch(Xg)})}function Hg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||cT(n,r)})}function cT(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(om(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),dm(n))}function wD(n,e,t){for(let r of t)r instanceof Hu?(n.La.addReference(r.key,e),Wk(n,r)):r instanceof qu?(k("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||cT(n,r.key)):G()}function Wk(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(k("SyncEngine","New document in limbo: "+t),n.xa.add(r),dm(n))}function dm(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new B(Pe.fromString(e)),r=n.qa.next();n.Na.set(r,new Bg(t)),n.Oa=n.Oa.insert(t,r),nT(n.remoteStore,new Ho(Jt(sm(t.path)),r,"TargetPurposeLimboResolution",RD.oe))}}function uT(n,e,t){return S(this,null,function*(){let r=ue(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{o.push(r.Ka(u,e,t).then(d=>{var f;if((d||t)&&r.isPrimaryClient){let g=d?!d.fromCache:(f=t?.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(d){i.push(d);let g=Ig.Wi(u.targetId,d);s.push(g)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(u,d){return S(this,null,function*(){let f=ue(u);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>N.forEach(d,_=>N.forEach(_.$i,E=>f.persistence.referenceDelegate.addReference(g,_.targetId,E)).next(()=>N.forEach(_.Ui,E=>f.persistence.referenceDelegate.removeReference(g,_.targetId,E)))))}catch(g){if(!Ko(g))throw g;k("LocalStore","Failed to update sequence numbers: "+g)}for(let g of d){let _=g.targetId;if(!g.fromCache){let E=f.os.get(_),A=E.snapshotVersion,x=E.withLastLimboFreeSnapshotVersion(A);f.os=f.os.insert(_,x)}}})}(r.localStore,s))})}function Kk(n,e){return S(this,null,function*(){let t=ue(n);if(!t.currentUser.isEqual(e)){k("SyncEngine","User change. New user:",e.toKey());let r=yield XD(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(c=>{c.forEach(u=>{u.reject(new V(P.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield uT(t,r.hs)}})}function Qk(n,e){let t=ue(n),r=t.Na.get(e);if(r&&r.va)return de().add(r.key);{let i=de(),s=t.Ma.get(e);if(!s)return i;for(let o of s){let c=t.Fa.get(o);i=i.unionWith(c.view.Va)}return i}}function lT(n){let e=ue(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=aT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Qk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Gk.bind(null,e),e.Ca.d_=Uk.bind(null,e.eventManager),e.Ca.$a=jk.bind(null,e.eventManager),e}var ED=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return S(this,null,function*(){this.serializer=tT(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return Ck(this.persistence,new Eg,t.initialUser,this.serializer)}Ga(t){return new yg(_g.Zr,this.serializer)}Wa(t){return new bg}terminate(){return S(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var Yk=(()=>{class n{initialize(t,r){return S(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>ID(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Kk.bind(null,this.syncEngine),yield Lk(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Lg}()}createDatastore(t){let r=tT(t.databaseInfo.databaseId),i=function(o){return new Ag(o)}(t.databaseInfo);return function(o,c,u,d){return new xg(o,c,u,d)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,c,u){return new Pg(i,s,o,c,u)}(this.localStore,this.datastore,t.asyncQueue,r=>ID(this.syncEngine,r,0),function(){return Uu.D()?new Uu:new Cg}())}createSyncEngine(t,r){return function(s,o,c,u,d,f,g){let _=new $g(s,o,c,u,d,f);return g&&(_.Qa=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return S(this,null,function*(){var t,r;yield function(s){return S(this,null,function*(){let o=ue(s);k("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Qo(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var qg=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):_n("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var zg=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=$e.UNAUTHENTICATED,this.clientId=Mp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>S(this,null,function*(){k("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(k("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Wn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>S(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=sT(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Tp(n,e){return S(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),k("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>S(this,null,function*(){r.isEqual(i)||(yield XD(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function DD(n,e){return S(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Zk(n);k("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>yD(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>yD(e.remoteStore,i)),n._onlineComponents=e})}function Zk(n){return S(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){k("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Tp(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===P.FAILED_PRECONDITION||i.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;qi("Error using user provided cache. Falling back to memory cache: "+t),yield Tp(n,new ED)}}else k("FirestoreClient","Using default OfflineComponentProvider"),yield Tp(n,new ED);return n._offlineComponents})}function Jk(n){return S(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(k("FirestoreClient","Using user provided OnlineComponentProvider"),yield DD(n,n._uninitializedComponentsProvider._online)):(k("FirestoreClient","Using default OnlineComponentProvider"),yield DD(n,new Yk))),n._onlineComponents})}function TD(n){return S(this,null,function*(){let e=yield Jk(n),t=e.eventManager;return t.onListen=Bk.bind(null,e.syncEngine),t.onUnlisten=qk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=$k.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=zk.bind(null,e.syncEngine),t})}function dT(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var bD=new Map;function Xk(n,e,t){if(!t)throw new V(P.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function e1(n,e,t,r){if(e===!0&&r===!0)throw new V(P.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function CD(n){if(B.isDocumentKey(n))throw new V(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function t1(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":G()}function bu(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new V(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=t1(n);throw new V(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var zu=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new V(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new V(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}e1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new V(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new V(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new V(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Go=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zu({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new V(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new V(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zu(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new bp;switch(r.type){case"firstParty":return new Rp(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new V(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return S(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=bD.get(t);r&&(k("ComponentProvider","Removing Datastore"),bD.delete(t),r.terminate())}(this),Promise.resolve()}};function hT(n,e,t,r={}){var i;let s=(n=bu(n,Go))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&qi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=$e.MOCK_USER;else{c=sE(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new V(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new $e(d)}n._authCredentials=new Cp(new Cu(c,u))}}var Gu=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Or=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $i(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},$i=class n extends Gu{constructor(e,t,r){super(e,t,sm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Or(this.firestore,null,new B(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function fT(n,e,...t){if(n=Bn(n),Xk("collection","path",e),n instanceof Go){let r=Pe.fromString(e,...t);return CD(r),new $i(n,null,r)}{if(!(n instanceof Or||n instanceof $i))throw new V(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Pe.fromString(e,...t));return CD(r),new $i(n.firestore,null,r)}}var Wu=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ju(this,"async_queue_retry"),this.Vu=()=>{let r=Dp();r&&k("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=Dp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Dp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Wn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return S(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ko(e))throw e;k("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw _n("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=Og.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&G()}verifyOperationInProgress(){}wu(){return S(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function SD(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var Wo=class extends Go{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Wu,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return S(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Wu(e),this._firestoreClient=void 0,yield e}})}};function pT(n,e){let t=typeof n=="object"?n:vo(),r=typeof n=="string"?n:e||"(default)",i=Qf(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=rE("firestore");s&&hT(i,...s)}return i}function n1(n){if(n._terminated)throw new V(P.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||r1(n),n._firestoreClient}function r1(n){var e,t,r;let i=n._freezeSettings(),s=function(c,u,d,f){return new kp(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,dT(f.experimentalLongPollingOptions),f.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new zg(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(c){let u=c?._online.build();return{_offline:c?._offline.build(u),_online:u}}(n._componentsProvider))}var Gg=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Je.fromBase64String(e))}catch(t){throw new V(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Je.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Ku=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new V(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Wg=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new V(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new V(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}};var Kg=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var i1=new RegExp("[~\\*/\\[\\]]");function s1(n,e,t){if(e.search(i1)>=0)throw AD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ku(...e.split("."))._internalPath}catch{throw AD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function AD(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new V(P.INVALID_ARGUMENT,c+n+u)}var Qu=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Or(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Qg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(gT("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Qg=class extends Qu{data(){return super.data()}};function gT(n,e){return typeof e=="string"?s1(n,e):e instanceof Ku?e._internalPath:e._delegate._internalPath}function o1(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new V(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Yg=class{convertValue(e,t="none"){switch(Pr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return De(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Kn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw G()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Xu(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>De(o.doubleValue));return new Kg(s)}convertGeoPoint(e){return new Wg(De(e.latitude),De(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=tm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Lo(e));default:return null}}convertTimestamp(e){let t=In(e);return new St(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Pe.fromString(e);Se(JD(r));let i=new xu(r.get(1),r.get(3)),s=new B(r.popFirst(5));return i.isEqual(t)||_n(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};var Nr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Yu=class extends Qu{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Hi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(gT("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Hi=class extends Yu{data(e={}){return super.data(e)}},Zg=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Nr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Hi(this._firestore,this._userDataWriter,r.key,r,new Nr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new V(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{let u=new Hi(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Nr(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let u=new Hi(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Nr(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:a1(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function a1(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G()}}var Zu=class extends Yg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gg(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Or(this.firestore,null,t)}};function hm(n,...e){var t,r,i;n=Bn(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||SD(e[o])||(s=e[o],o++);let c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(SD(e[o])){let g=e[o];e[o]=(t=g.next)===null||t===void 0?void 0:t.bind(g),e[o+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[o+2]=(i=g.complete)===null||i===void 0?void 0:i.bind(g)}let u,d,f;if(n instanceof Or)d=bu(n.firestore,Wo),f=sm(n._key.path),u={next:g=>{e[o]&&e[o](c1(d,n,g))},error:e[o+1],complete:e[o+2]};else{let g=bu(n,Gu);d=bu(g.firestore,Wo),f=g._query;let _=new Zu(d);u={next:E=>{e[o]&&e[o](new Zg(d,_,g,E))},error:e[o+1],complete:e[o+2]},o1(n._query)}return function(_,E,A,x){let R=new qg(x),F=new Vg(E,R,A);return _.asyncQueue.enqueueAndForget(()=>S(this,null,function*(){return Fk(yield TD(_),F)})),()=>{R.Za(),_.asyncQueue.enqueueAndForget(()=>S(this,null,function*(){return Vk(yield TD(_),F)}))}}(n1(d),f,c,u)}function c1(n,e,t){let r=t.docs.get(e._key),i=new Zu(n);return new Yu(n,i,e._key,r,new Nr(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){ns=i})(Mi),qn(new Ct("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),c=new Wo(new Sp(r.getProvider("auth-internal")),new xp(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new V(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xu(d.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),Be(QE,"4.7.3",e),Be(QE,"4.7.3","esm2017")})();var rl=function(){return rl=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},rl.apply(this,arguments)};var d1={includeMetadataChanges:!1};function mT(n,e){return e===void 0&&(e=d1),new re(function(t){var r=hm(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function yT(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:rl(rl({},r),(t={},t[e.idField]=n.id,t))}function vT(n){return mT(n,{includeMetadataChanges:!0}).pipe(ee(function(e){return e.docs}))}function _T(n,e){return e===void 0&&(e={}),vT(n).pipe(ee(function(t){return t.map(function(r){return yT(r,e)})}))}var wn=class{constructor(e){return e}},IT="firestore",fm=class{constructor(){return Io(IT)}};var pm=new H("angularfire2.firestore-instances");function h1(n,e){let t=Jf(IT,n,e);return t&&new wn(t)}function f1(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new wn(r)}}var p1={provide:fm,deps:[[new Ot,pm]]},g1={provide:wn,useFactory:h1,deps:[[new Ot,pm],Tr]};function wT(n,...e){return Be("angularfire",Oi.full,"fst"),Vn([g1,p1,{provide:pm,useFactory:f1(n),multi:!0,deps:[Ie,Pt,wo,Eo,[new Ot,_u],[new Ot,_o],...e]}])}var il=Dr(_T,!0);var sl=Dr(fT,!0);var ET=Dr(pT,!0);var TT={production:!1,firebase:{apiKey:"AIzaSyC55uA0H15tS9S7X0F19BbeHzTeupQMVBk",authDomain:"my-cv-3f209.firebaseapp.com",projectId:"my-cv-3f209",storageBucket:"my-cv-3f209.firebasestorage.app",messagingSenderId:"321143830106",appId:"1:321143830106:web:cb7d60376894242a1d0a63"}};var bT=[];var CT={providers:[$I({eventCoalescing:!0}),Jw(bT),SE(()=>AE(TT.firebase)),wT(()=>ET())]};var ol=class{constructor(){this.name="name",this.goalLife="goal",this.photoUrl="photo",this.email="email@domain.com",this.phoneNumber="999-999-9999",this.location="city, country",this.socialNetwork="@facebook"}};var ST=(()=>{class n{constructor(t){this.firestore=t,this.dbPath="/header"}getHeader(){let t=sl(this.firestore,this.dbPath);return il(t,{idField:"id"})}static{this.\u0275fac=function(r){return new(r||n)(W(wn))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function y1(n,e){if(n&1&&it(0,"img",2),n&2){let t=Ah(2);pr("src",t.header.photoUrl,eI)}}function v1(n,e){if(n&1&&(le(0,"div")(1,"h2"),Te(2),ae(),le(3,"p"),Te(4),ae(),vi(5,y1,1,1,"img",1),le(6,"p"),Te(7),ae(),le(8,"p"),Te(9),ae(),le(10,"p"),Te(11),ae(),le(12,"p"),Te(13),ae()()),n&2){let t=Ah();at(2),Mc(t.header.name),at(2),Mc(t.header.goalLife),at(),pr("ngIf",t.header.photoUrl),at(2),Lt("Email: ",t.header.email,""),at(2),Lt("Tel\xE9fono: ",t.header.phoneNumber,""),at(2),Lt("Ubicaci\xF3n: ",t.header.location,""),at(2),Lt("Redes: ",t.header.socialNetwork,"")}}var AT=(()=>{class n{constructor(t){this.headerService=t,this.header=new ol}ngOnInit(){this.retrieveHeaders()}retrieveHeaders(){this.headerService.getHeader().subscribe({next:t=>{this.header=t[0],console.log("Headers obtenidos:",this.header)},error:t=>{console.error("Error al obtener headers:",t)}})}static{this.\u0275fac=function(r){return new(r||n)(Et(ST))}}static{this.\u0275cmp=Ue({type:n,selectors:[["app-header"]],standalone:!0,features:[je],decls:1,vars:1,consts:[[4,"ngIf"],["width","200","height","200","alt","Profile photo",3,"src",4,"ngIf"],["width","200","height","200","alt","Profile photo",3,"src"]],template:function(r,i){r&1&&vi(0,v1,14,7,"div",0),r&2&&pr("ngIf",i.header)},dependencies:[zs,iw]})}}return n})();var RT=(()=>{class n{constructor(t){this.firestore=t,this.dbPath="/work-experience"}getWorkExperience(){let t=sl(this.firestore,this.dbPath);return il(t,{idField:"id"})}static{this.\u0275fac=function(r){return new(r||n)(W(wn))}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function I1(n,e){if(n&1&&(le(0,"div")(1,"h3"),Te(2),ae(),le(3,"p"),Te(4),ae(),le(5,"p"),Te(6),ae(),le(7,"p"),Te(8),ae(),le(9,"p"),Te(10),ae(),it(11,"hr"),ae()),n&2){let t=e.$implicit;at(2),Pc("",t.position," en ",t.company,""),at(2),Pc("",t.startDate," - ",t.endDate,""),at(2),Lt("Ubicaci\xF3n: ",t.location,""),at(2),Lt("Logros: ",t.accomplishments,""),at(2),Lt("company: ",t.company,"")}}var NT=(()=>{class n{constructor(t){this.workExperienceService=t,this.workExperience=[]}ngOnInit(){this.retrieveWorkExperience()}retrieveWorkExperience(){this.workExperienceService.getWorkExperience().subscribe({next:t=>{this.workExperience=t,console.log("Work Experience obtenida:",this.workExperience)},error:t=>{console.error("Error al obtener work experience:",t)}})}static{this.\u0275fac=function(r){return new(r||n)(Et(RT))}}static{this.\u0275cmp=Ue({type:n,selectors:[["app-work-experience"]],standalone:!0,features:[je],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(r,i){r&1&&vi(0,I1,12,7,"div",0),r&2&&pr("ngForOf",i.workExperience)},dependencies:[zs,rw]})}}return n})();var xT=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ue({type:n,selectors:[["app-education"]],standalone:!0,features:[je],decls:2,vars:0,template:function(r,i){r&1&&(le(0,"p"),Te(1,"education works!"),ae())}})}}return n})();var MT=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ue({type:n,selectors:[["app-certificates"]],standalone:!0,features:[je],decls:2,vars:0,template:function(r,i){r&1&&(le(0,"p"),Te(1,"certificates works!"),ae())}})}}return n})();var PT=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ue({type:n,selectors:[["app-skills"]],standalone:!0,features:[je],decls:2,vars:0,template:function(r,i){r&1&&(le(0,"p"),Te(1,"skills works!"),ae())}})}}return n})();var OT=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ue({type:n,selectors:[["app-languages"]],standalone:!0,features:[je],decls:2,vars:0,template:function(r,i){r&1&&(le(0,"p"),Te(1,"languages works!"),ae())}})}}return n})();var kT=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ue({type:n,selectors:[["app-interests"]],standalone:!0,features:[je],decls:2,vars:0,template:function(r,i){r&1&&(le(0,"p"),Te(1,"interests works!"),ae())}})}}return n})();var LT=(()=>{class n{constructor(){this.title="mycv"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ue({type:n,selectors:[["app-root"]],standalone:!0,features:[je],decls:19,vars:0,consts:[["border","1"],["colspan","2"]],template:function(r,i){r&1&&(le(0,"table",0)(1,"tr")(2,"td",1),it(3,"app-header"),ae()(),le(4,"tr")(5,"td"),it(6,"app-work-experience"),ae(),le(7,"td"),it(8,"app-skills"),ae()(),le(9,"tr")(10,"td"),it(11,"app-education"),ae(),le(12,"td"),it(13,"app-certificates"),ae()(),le(14,"tr")(15,"td"),it(16,"app-languages"),ae(),le(17,"td"),it(18,"app-interests"),ae()()())},dependencies:[AT,NT,xT,MT,PT,OT,kT]})}}return n})();pw(LT,CT).catch(n=>console.error(n));
